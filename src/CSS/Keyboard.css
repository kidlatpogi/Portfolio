:root {
  --travel: 20;
  --key-border-color: rgba(255, 255, 255, 0.5);
}

#one, #two, #three, #four, #five, #six, #seven, #eight, #nine, #ten, #eleven, #twelve, #thirteen, #fourteen, #fifteen {
  --hue: 0;
  --saturate: 0%;
  --brightness: 1;
  --sepia: 0%;
}

.keyboard-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.5rem;
  position: relative;
  width: 100%;
}

.keyboard-controls {
  display: flex;
  justify-content: left;
  width: 100%;
  margin-top: 1rem;
  margin-bottom: 1.5rem;
}

.switch-toggle {
  display: flex;
  align-items: center;
  gap: 1rem;
  cursor: pointer;
  position: relative;
}

.switch-toggle input {
  display: none;
}

.toggle-slider {
  position: relative;
  width: 220px;
  height: 44px;
  background: transparent;
  border: 2.5px solid rgba(59, 130, 246, 0.4);
  border-radius: 22px;
  transition: all 500ms cubic-bezier(0.34, 1.56, 0.64, 1);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 4px;
  box-sizing: border-box;
  overflow: hidden;
}

.toggle-slider::before {
  content: '';
  position: absolute;
  width: calc(50% - 6px);
  height: calc(100% - 8px);
  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
  border-radius: 16px;
  transition: all 500ms cubic-bezier(0.34, 1.56, 0.64, 1);
  display: block;
  left: 6px;
  top: 4px;
  z-index: 1;
  box-shadow: 0 4px 20px rgba(59, 130, 246, 0.4);
}

.switch-toggle input:checked + .toggle-slider::before {
  left: calc(45% + 11px);
}

.toggle-slider::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

.toggle-label {
  position: absolute;
  top: 0;
  width: 50%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 700;
  letter-spacing: 0.1em;
  text-transform: capitalize;
  transition: all 500ms cubic-bezier(0.34, 1.56, 0.64, 1);
  z-index: 2;
  border-radius: 18px;
}

.toggle-label:first-of-type {
  left: 4px;
  color: rgba(255, 255, 255, 0.6);
}

.switch-toggle input:not(:checked) ~ .toggle-label:first-of-type {
  color: #ffffff;
  text-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
}

.toggle-label:last-of-type {
  right: 4px;
  color: rgba(59, 130, 246, 0.6);
}

.switch-toggle input:checked ~ .toggle-label:last-of-type {
  color: #ffffff;
  border-color: rgba(59, 130, 246, 0.6);
  text-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
}

.switch-toggle input:hover + .toggle-slider {
  border-color: rgba(59, 130, 246, 0.6);
  box-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
}

/* Light Mode Styles */
body.light-mode .toggle-slider {
  border-color: rgba(251, 191, 36, 0.4);
}

body.light-mode .toggle-slider::before {
  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
  box-shadow: 0 4px 20px rgba(251, 191, 36, 0.4);
}

body.light-mode .toggle-label:first-of-type {
  color: rgba(251, 191, 36, 0.6);
}

body.light-mode .switch-toggle input:not(:checked) ~ .toggle-label:first-of-type {
  color: #ffffff;
  text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
}

body.light-mode .toggle-label:last-of-type {
  color: rgba(251, 191, 36, 0.3);
}

body.light-mode .switch-toggle input:checked ~ .toggle-label:last-of-type {
  color: #ffffff;
  text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
}

body.light-mode .switch-toggle input:hover + .toggle-slider {
  border-color: rgba(251, 191, 36, 0.6);
  box-shadow: 0 0 30px rgba(251, 191, 36, 0.3);
}

.keypad {
  position: relative;
  aspect-ratio: 500 / 410;
  display: flex;
  place-items: center;
  width: clamp(280px, 45vw, 500px);
  -webkit-tap-highlight-color: #0000;
  transition-property: translate, transform;
  transition-duration: 0.26s;
  transition-timing-function: ease-out;
  transform-style: preserve-3d;
  scale: 1;
  margin: 2rem auto 0;
}

@media (max-width: 768px) {
  .keypad {
    width: clamp(240px, 70vw, 400px);
    margin-left: 80px;
    scale: 1.1;
  }
}

.keyboard-hint {
  font-size: clamp(12px, 2.5vw, 14px);
  color: rgba(255, 255, 255, 0.7);
  text-align: center;
  margin: 0;
  font-weight: 600;
  letter-spacing: 0.02em;
  transition: color 220ms ease;

  position: absolute;
  top: 90%;
  left: 44%;
  width: 100%;
  max-width: 900px;
  z-index: 10;
  transform: translate(-50%, 0) rotateX(36deg) rotateY(45deg) rotateX(-50deg) rotate(0.5deg);
}

@media (max-width:768px) {
    .keyboard-hint {
        position: relative;
        top: auto;
        left: auto;
        width: auto;
        transform: none !important;
    }
}

@media (max-width: 800px) {
  .keyboard-hint {
    position: relative;
    top: auto;
    left: auto;
    width: auto;
    transform: none !important;
  }
}

body.light-mode .keyboard-hint {
  color: rgba(0, 0, 0, 0.8);
  font-weight: 700;
}

.keyboard-display {
  font-size: clamp(40px, 12vw, 120px);
  color: rgba(255, 255, 255, 0.50);
  text-align: center;
  font-weight: 900;
  min-height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: fadeIn 300ms ease-out;
  text-transform: uppercase;
  transform-style: preserve-3d;
  perspective: 1200px;
  
  /* Absolute positioning */
  position: absolute;
  top: 17%;
  left: 56%;
  width: 100%;
  max-width: 900px;
  z-index: 10;
  transform: translate(-50%, 0) rotateX(36deg) rotateY(45deg) rotateX(-55deg) rotate(1deg);
}

.keyboard-display:not(:empty) {
  opacity: 1;
  pointer-events: auto;
}

@media (max-width:768px) {
    .keyboard-display {
        position: inherit;
        top: auto;
        left: auto;
        width: auto;
        transform: none !important;
    }
}

body.light-mode .keyboard-display {
  color: rgba(0, 0, 0, 0.1);
}

.keyboard-display h3 {
  margin: 0;
  padding: 0;
  font-size: inherit;
  font-weight: inherit;
  letter-spacing: inherit;
  transform-style: preserve-3d;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.keypad .key {
  transform-style: preserve-3d;
  border: 0;
  background: #0000;
  padding: 0;
  cursor: pointer;
  outline: none;
}

.keypad .key[data-pressed='true'],
.keypad .key:active .key__content {
  translate: 0 calc(var(--travel) * 1%);
}

/* Key Positioning */
.keypad #one { left: 12.5%; bottom: 57.2%; }
.keypad #two { left: 24.8%; bottom: 48.5%; }
.keypad #three { left: 37%; bottom: 39.2%; }
.keypad #four { left: 49.4%; bottom: 30.2%; }
.keypad #five { left: 61.2%; bottom: 21%; }
.keypad #six[data-layer='2'] { left: 0.2%; top: 28%; }
.keypad #seven[data-layer='2'] { left: 12.2%; top: 37%; }
.keypad #eight[data-layer='2'] { left: 24.2%; top: 46%; }
.keypad #nine[data-layer='2'] { left: 36.2%; top: 55%; }
.keypad #ten[data-layer='2'] { left: 48.4%; top: 64.2%; }
.keypad #eleven[data-layer='3'] { left: -12.2%; top: 37.2%; }
.keypad #twelve[data-layer='3'] { left: -0.5%; top: 46.2%; }
.keypad #thirteen[data-layer='3'] { left: 12.2%; top: 55.2%; }
.keypad #fourteen[data-layer='3'] { left: 24.2%; top: 64.2%; }
.keypad #fifteen[data-layer='3'] { left: 36.2%; top: 73.2%; }

.keypad .key__content {
  width: 100%;
  display: inline-block;
  height: 100%;
  transition: translate 0.12s ease-out;
  container-type: inline-size;
}

.keypad .key__text {
  width: 52%;
  height: 62%;
  position: absolute;
  font-size: 18cqi;
  z-index: 21;
  top: 5%;
  left: 0;
  mix-blend-mode: normal;
  color: white;
  translate: 45% -16%;
  transform: rotateX(36deg) rotateY(45deg) rotateX(-90deg) rotate(0deg);
  display: grid;
  place-items: center;
}

.keypad .key__logo {
  width: 62%;
  height: auto;
  display: block;
  margin: 0 auto;
  color: inherit;
}

.keypad #nine .key__text,
.keypad #five .key__text,
.keypad #ten .key__text,
.keypad #eleven .key__text,
.keypad #twelve .key__text,
.keypad #fourteen .key__text {
  color: black;
}

.keypad .inlined-logo {
  width: 62%;
  height: auto;
  display: block;
  margin: 0 auto;
  fill: currentColor;
}

.keypad .keypad__single {
  position: absolute;
  width: 21%;
  left: 54%;
  bottom: 36%;
  height: 24%;
  clip-path: polygon(
    0 0, 54% 0, 89% 24%, 100% 70%, 54% 100%, 46% 100%, 0 69%, 12% 23%, 47% 0%
  );
}

.keypad .keypad__single > .key__mask > .key__content > img {
  top: 0;
  opacity: 1;
  width: 96%;
  position: absolute;
  left: 50%;
  translate: -50% 1%;
  filter: none;
}

.keypad .key {
  --hue: 0;
  --saturate: 100%;
  --brightness: 1;
  --travel: 20;
}

.keypad .key__mask {
  width: 100%;
  height: 100%;
  display: inline-block;
}

.keypad img {
  width: 100%;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .keypad {
    width: clamp(240px, 70vw, 400px);
  }
  
  .keyboard-controls {
    margin-top: -0.75rem;
    margin-bottom: 1rem;
  }
}
