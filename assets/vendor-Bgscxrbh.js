function EI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qa={exports:{}},Ha={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vu;function bm(){return vu||(vu=1,(function(n){function e(K,le){var ne=K.length;K.push(le);e:for(;0<ne;){var Ie=ne-1>>>1,Ve=K[Ie];if(0<s(Ve,le))K[Ie]=le,K[ne]=Ve,ne=Ie;else break e}}function t(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var le=K[0],ne=K.pop();if(ne!==le){K[0]=ne;e:for(var Ie=0,Ve=K.length,N=Ve>>>1;Ie<N;){var tn=2*(Ie+1)-1,Fn=K[tn],ht=tn+1,Qe=K[ht];if(0>s(Fn,ne))ht<Ve&&0>s(Qe,Fn)?(K[Ie]=Qe,K[ht]=ne,Ie=ht):(K[Ie]=Fn,K[tn]=ne,Ie=tn);else if(ht<Ve&&0>s(Qe,ne))K[Ie]=Qe,K[ht]=ne,Ie=ht;else break e}}return le}function s(K,le){var ne=K.sortIndex-le.sortIndex;return ne!==0?ne:K.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var h=[],f=[],g=1,y=null,b=3,x=!1,M=!1,V=!1,$=!1,L=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function U(K){for(var le=t(f);le!==null;){if(le.callback===null)i(f);else if(le.startTime<=K)i(f),le.sortIndex=le.expirationTime,e(h,le);else break;le=t(f)}}function ve(K){if(V=!1,U(K),!M)if(t(h)!==null)M=!0,me||(me=!0,k());else{var le=t(f);le!==null&&St(ve,le.startTime-K)}}var me=!1,I=-1,w=5,E=-1;function S(){return $?!0:!(n.unstable_now()-E<w)}function A(){if($=!1,me){var K=n.unstable_now();E=K;var le=!0;try{e:{M=!1,V&&(V=!1,j(I),I=-1),x=!0;var ne=b;try{t:{for(U(K),y=t(h);y!==null&&!(y.expirationTime>K&&S());){var Ie=y.callback;if(typeof Ie=="function"){y.callback=null,b=y.priorityLevel;var Ve=Ie(y.expirationTime<=K);if(K=n.unstable_now(),typeof Ve=="function"){y.callback=Ve,U(K),le=!0;break t}y===t(h)&&i(h),U(K)}else i(h);y=t(h)}if(y!==null)le=!0;else{var N=t(f);N!==null&&St(ve,N.startTime-K),le=!1}}break e}finally{y=null,b=ne,x=!1}le=void 0}}finally{le?k():me=!1}}}var k;if(typeof G=="function")k=function(){G(A)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,Ge=T.port2;T.port1.onmessage=A,k=function(){Ge.postMessage(null)}}else k=function(){L(A,0)};function St(K,le){I=L(function(){K(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(K){switch(b){case 1:case 2:case 3:var le=3;break;default:le=b}var ne=b;b=le;try{return K()}finally{b=ne}},n.unstable_requestPaint=function(){$=!0},n.unstable_runWithPriority=function(K,le){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ne=b;b=K;try{return le()}finally{b=ne}},n.unstable_scheduleCallback=function(K,le,ne){var Ie=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Ie+ne:Ie):ne=Ie,K){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=ne+Ve,K={id:g++,callback:le,priorityLevel:K,startTime:ne,expirationTime:Ve,sortIndex:-1},ne>Ie?(K.sortIndex=ne,e(f,K),t(h)===null&&K===t(f)&&(V?(j(I),I=-1):V=!0,St(ve,ne-Ie))):(K.sortIndex=Ve,e(h,K),M||x||(M=!0,me||(me=!0,k()))),K},n.unstable_shouldYield=S,n.unstable_wrapCallback=function(K){var le=b;return function(){var ne=b;b=le;try{return K.apply(this,arguments)}finally{b=ne}}}})(Ha)),Ha}var bu;function TI(){return bu||(bu=1,qa.exports=bm()),qa.exports}var Ro={exports:{}};/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var wm=Ro.exports,wu;function Em(){return wu||(wu=1,(function(n,e){(function(t,i){n.exports=i()})(wm,function(){const t=new Map,i={set(m,l,d){t.has(m)||t.set(m,new Map);const _=t.get(m);_.has(l)||_.size===0?_.set(l,d):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(_.keys())[0]}.`)},get:(m,l)=>t.has(m)&&t.get(m).get(l)||null,remove(m,l){if(!t.has(m))return;const d=t.get(m);d.delete(l),d.size===0&&t.delete(m)}},s="transitionend",r=m=>(m&&window.CSS&&window.CSS.escape&&(m=m.replace(/#([^\s"#']+)/g,(l,d)=>`#${CSS.escape(d)}`)),m),a=m=>m==null?`${m}`:Object.prototype.toString.call(m).match(/\s([a-z]+)/i)[1].toLowerCase(),c=m=>{m.dispatchEvent(new Event(s))},h=m=>!(!m||typeof m!="object")&&(m.jquery!==void 0&&(m=m[0]),m.nodeType!==void 0),f=m=>h(m)?m.jquery?m[0]:m:typeof m=="string"&&m.length>0?document.querySelector(r(m)):null,g=m=>{if(!h(m)||m.getClientRects().length===0)return!1;const l=getComputedStyle(m).getPropertyValue("visibility")==="visible",d=m.closest("details:not([open])");if(!d)return l;if(d!==m){const _=m.closest("summary");if(_&&_.parentNode!==d||_===null)return!1}return l},y=m=>!m||m.nodeType!==Node.ELEMENT_NODE||!!m.classList.contains("disabled")||(m.disabled!==void 0?m.disabled:m.hasAttribute("disabled")&&m.getAttribute("disabled")!=="false"),b=m=>{if(!document.documentElement.attachShadow)return null;if(typeof m.getRootNode=="function"){const l=m.getRootNode();return l instanceof ShadowRoot?l:null}return m instanceof ShadowRoot?m:m.parentNode?b(m.parentNode):null},x=()=>{},M=m=>{m.offsetHeight},V=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,$=[],L=()=>document.documentElement.dir==="rtl",j=m=>{var l;l=()=>{const d=V();if(d){const _=m.NAME,C=d.fn[_];d.fn[_]=m.jQueryInterface,d.fn[_].Constructor=m,d.fn[_].noConflict=()=>(d.fn[_]=C,m.jQueryInterface)}},document.readyState==="loading"?($.length||document.addEventListener("DOMContentLoaded",()=>{for(const d of $)d()}),$.push(l)):l()},G=(m,l=[],d=m)=>typeof m=="function"?m.call(...l):d,U=(m,l,d=!0)=>{if(!d)return void G(m);const _=(O=>{if(!O)return 0;let{transitionDuration:z,transitionDelay:H}=window.getComputedStyle(O);const Q=Number.parseFloat(z),X=Number.parseFloat(H);return Q||X?(z=z.split(",")[0],H=H.split(",")[0],1e3*(Number.parseFloat(z)+Number.parseFloat(H))):0})(l)+5;let C=!1;const P=({target:O})=>{O===l&&(C=!0,l.removeEventListener(s,P),G(m))};l.addEventListener(s,P),setTimeout(()=>{C||c(l)},_)},ve=(m,l,d,_)=>{const C=m.length;let P=m.indexOf(l);return P===-1?!d&&_?m[C-1]:m[0]:(P+=d?1:-1,_&&(P=(P+C)%C),m[Math.max(0,Math.min(P,C-1))])},me=/[^.]*(?=\..*)\.|.*/,I=/\..*/,w=/::\d+$/,E={};let S=1;const A={mouseenter:"mouseover",mouseleave:"mouseout"},k=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function T(m,l){return l&&`${l}::${S++}`||m.uidEvent||S++}function Ge(m){const l=T(m);return m.uidEvent=l,E[l]=E[l]||{},E[l]}function St(m,l,d=null){return Object.values(m).find(_=>_.callable===l&&_.delegationSelector===d)}function K(m,l,d){const _=typeof l=="string",C=_?d:l||d;let P=Ve(m);return k.has(P)||(P=m),[_,C,P]}function le(m,l,d,_,C){if(typeof l!="string"||!m)return;let[P,O,z]=K(l,d,_);l in A&&(O=(se=>function(ie){if(!ie.relatedTarget||ie.relatedTarget!==ie.delegateTarget&&!ie.delegateTarget.contains(ie.relatedTarget))return se.call(this,ie)})(O));const H=Ge(m),Q=H[z]||(H[z]={}),X=St(Q,O,P?d:null);if(X)return void(X.oneOff=X.oneOff&&C);const W=T(O,l.replace(me,"")),ue=P?(function(te,se,ie){return function re(Ce){const Re=te.querySelectorAll(se);for(let{target:de}=Ce;de&&de!==this;de=de.parentNode)for(const be of Re)if(be===de)return tn(Ce,{delegateTarget:de}),re.oneOff&&N.off(te,Ce.type,se,ie),ie.apply(de,[Ce])}})(m,d,O):(function(te,se){return function ie(re){return tn(re,{delegateTarget:te}),ie.oneOff&&N.off(te,re.type,se),se.apply(te,[re])}})(m,O);ue.delegationSelector=P?d:null,ue.callable=O,ue.oneOff=C,ue.uidEvent=W,Q[W]=ue,m.addEventListener(z,ue,P)}function ne(m,l,d,_,C){const P=St(l[d],_,C);P&&(m.removeEventListener(d,P,!!C),delete l[d][P.uidEvent])}function Ie(m,l,d,_){const C=l[d]||{};for(const[P,O]of Object.entries(C))P.includes(_)&&ne(m,l,d,O.callable,O.delegationSelector)}function Ve(m){return m=m.replace(I,""),A[m]||m}const N={on(m,l,d,_){le(m,l,d,_,!1)},one(m,l,d,_){le(m,l,d,_,!0)},off(m,l,d,_){if(typeof l!="string"||!m)return;const[C,P,O]=K(l,d,_),z=O!==l,H=Ge(m),Q=H[O]||{},X=l.startsWith(".");if(P===void 0){if(X)for(const W of Object.keys(H))Ie(m,H,W,l.slice(1));for(const[W,ue]of Object.entries(Q)){const te=W.replace(w,"");z&&!l.includes(te)||ne(m,H,O,ue.callable,ue.delegationSelector)}}else{if(!Object.keys(Q).length)return;ne(m,H,O,P,C?d:null)}},trigger(m,l,d){if(typeof l!="string"||!m)return null;const _=V();let C=null,P=!0,O=!0,z=!1;l!==Ve(l)&&_&&(C=_.Event(l,d),_(m).trigger(C),P=!C.isPropagationStopped(),O=!C.isImmediatePropagationStopped(),z=C.isDefaultPrevented());const H=tn(new Event(l,{bubbles:P,cancelable:!0}),d);return z&&H.preventDefault(),O&&m.dispatchEvent(H),H.defaultPrevented&&C&&C.preventDefault(),H}};function tn(m,l={}){for(const[d,_]of Object.entries(l))try{m[d]=_}catch{Object.defineProperty(m,d,{configurable:!0,get:()=>_})}return m}function Fn(m){if(m==="true")return!0;if(m==="false")return!1;if(m===Number(m).toString())return Number(m);if(m===""||m==="null")return null;if(typeof m!="string")return m;try{return JSON.parse(decodeURIComponent(m))}catch{return m}}function ht(m){return m.replace(/[A-Z]/g,l=>`-${l.toLowerCase()}`)}const Qe={setDataAttribute(m,l,d){m.setAttribute(`data-bs-${ht(l)}`,d)},removeDataAttribute(m,l){m.removeAttribute(`data-bs-${ht(l)}`)},getDataAttributes(m){if(!m)return{};const l={},d=Object.keys(m.dataset).filter(_=>_.startsWith("bs")&&!_.startsWith("bsConfig"));for(const _ of d){let C=_.replace(/^bs/,"");C=C.charAt(0).toLowerCase()+C.slice(1),l[C]=Fn(m.dataset[_])}return l},getDataAttribute:(m,l)=>Fn(m.getAttribute(`data-bs-${ht(l)}`))};class zn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(l){return l=this._mergeConfigObj(l),l=this._configAfterMerge(l),this._typeCheckConfig(l),l}_configAfterMerge(l){return l}_mergeConfigObj(l,d){const _=h(d)?Qe.getDataAttribute(d,"config"):{};return{...this.constructor.Default,...typeof _=="object"?_:{},...h(d)?Qe.getDataAttributes(d):{},...typeof l=="object"?l:{}}}_typeCheckConfig(l,d=this.constructor.DefaultType){for(const[_,C]of Object.entries(d)){const P=l[_],O=h(P)?"element":a(P);if(!new RegExp(C).test(O))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${_}" provided type "${O}" but expected type "${C}".`)}}}class wt extends zn{constructor(l,d){super(),(l=f(l))&&(this._element=l,this._config=this._getConfig(d),i.set(this._element,this.constructor.DATA_KEY,this))}dispose(){i.remove(this._element,this.constructor.DATA_KEY),N.off(this._element,this.constructor.EVENT_KEY);for(const l of Object.getOwnPropertyNames(this))this[l]=null}_queueCallback(l,d,_=!0){U(l,d,_)}_getConfig(l){return l=this._mergeConfigObj(l,this._element),l=this._configAfterMerge(l),this._typeCheckConfig(l),l}static getInstance(l){return i.get(f(l),this.DATA_KEY)}static getOrCreateInstance(l,d={}){return this.getInstance(l)||new this(l,typeof d=="object"?d:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(l){return`${l}${this.EVENT_KEY}`}}const Oi=m=>{let l=m.getAttribute("data-bs-target");if(!l||l==="#"){let d=m.getAttribute("href");if(!d||!d.includes("#")&&!d.startsWith("."))return null;d.includes("#")&&!d.startsWith("#")&&(d=`#${d.split("#")[1]}`),l=d&&d!=="#"?d.trim():null}return l?l.split(",").map(d=>r(d)).join(","):null},Z={find:(m,l=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(l,m)),findOne:(m,l=document.documentElement)=>Element.prototype.querySelector.call(l,m),children:(m,l)=>[].concat(...m.children).filter(d=>d.matches(l)),parents(m,l){const d=[];let _=m.parentNode.closest(l);for(;_;)d.push(_),_=_.parentNode.closest(l);return d},prev(m,l){let d=m.previousElementSibling;for(;d;){if(d.matches(l))return[d];d=d.previousElementSibling}return[]},next(m,l){let d=m.nextElementSibling;for(;d;){if(d.matches(l))return[d];d=d.nextElementSibling}return[]},focusableChildren(m){const l=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(d=>`${d}:not([tabindex^="-"])`).join(",");return this.find(l,m).filter(d=>!y(d)&&g(d))},getSelectorFromElement(m){const l=Oi(m);return l&&Z.findOne(l)?l:null},getElementFromSelector(m){const l=Oi(m);return l?Z.findOne(l):null},getMultipleElementsFromSelector(m){const l=Oi(m);return l?Z.find(l):[]}},ys=(m,l="hide")=>{const d=`click.dismiss${m.EVENT_KEY}`,_=m.NAME;N.on(document,d,`[data-bs-dismiss="${_}"]`,function(C){if(["A","AREA"].includes(this.tagName)&&C.preventDefault(),y(this))return;const P=Z.getElementFromSelector(this)||this.closest(`.${_}`);m.getOrCreateInstance(P)[l]()})},Jr=".bs.alert",Zr=`close${Jr}`,Xs=`closed${Jr}`;class ri extends wt{static get NAME(){return"alert"}close(){if(N.trigger(this._element,Zr).defaultPrevented)return;this._element.classList.remove("show");const l=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,l)}_destroyElement(){this._element.remove(),N.trigger(this._element,Xs),this.dispose()}static jQueryInterface(l){return this.each(function(){const d=ri.getOrCreateInstance(this);if(typeof l=="string"){if(d[l]===void 0||l.startsWith("_")||l==="constructor")throw new TypeError(`No method named "${l}"`);d[l](this)}})}}ys(ri,"close"),j(ri);const eo='[data-bs-toggle="button"]';class Bn extends wt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(l){return this.each(function(){const d=Bn.getOrCreateInstance(this);l==="toggle"&&d[l]()})}}N.on(document,"click.bs.button.data-api",eo,m=>{m.preventDefault();const l=m.target.closest(eo);Bn.getOrCreateInstance(l).toggle()}),j(Bn);const gn=".bs.swipe",to=`touchstart${gn}`,Xe=`touchmove${gn}`,st=`touchend${gn}`,_s=`pointerdown${gn}`,wa=`pointerup${gn}`,no={endCallback:null,leftCallback:null,rightCallback:null},Ea={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class yn extends zn{constructor(l,d){super(),this._element=l,l&&yn.isSupported()&&(this._config=this._getConfig(d),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return no}static get DefaultType(){return Ea}static get NAME(){return"swipe"}dispose(){N.off(this._element,gn)}_start(l){this._supportPointerEvents?this._eventIsPointerPenTouch(l)&&(this._deltaX=l.clientX):this._deltaX=l.touches[0].clientX}_end(l){this._eventIsPointerPenTouch(l)&&(this._deltaX=l.clientX-this._deltaX),this._handleSwipe(),G(this._config.endCallback)}_move(l){this._deltaX=l.touches&&l.touches.length>1?0:l.touches[0].clientX-this._deltaX}_handleSwipe(){const l=Math.abs(this._deltaX);if(l<=40)return;const d=l/this._deltaX;this._deltaX=0,d&&G(d>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(N.on(this._element,_s,l=>this._start(l)),N.on(this._element,wa,l=>this._end(l)),this._element.classList.add("pointer-event")):(N.on(this._element,to,l=>this._start(l)),N.on(this._element,Xe,l=>this._move(l)),N.on(this._element,st,l=>this._end(l)))}_eventIsPointerPenTouch(l){return this._supportPointerEvents&&(l.pointerType==="pen"||l.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const nn=".bs.carousel",Ys=".data-api",Js="ArrowLeft",Ta="ArrowRight",Mi="next",$n="prev",Un="left",_n="right",Zs=`slide${nn}`,Vi=`slid${nn}`,jn=`keydown${nn}`,io=`mouseenter${nn}`,vs=`mouseleave${nn}`,so=`dragstart${nn}`,Li=`load${nn}${Ys}`,ro=`click${nn}${Ys}`,Ye="carousel",Ni="active",oi=".active",ai=".carousel-item",Ia=oi+ai,Aa={[Js]:_n,[Ta]:Un},li={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ca={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ci extends wt{constructor(l,d){super(l,d),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Z.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Ye&&this.cycle()}static get Default(){return li}static get DefaultType(){return Ca}static get NAME(){return"carousel"}next(){this._slide(Mi)}nextWhenVisible(){!document.hidden&&g(this._element)&&this.next()}prev(){this._slide($n)}pause(){this._isSliding&&c(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?N.one(this._element,Vi,()=>this.cycle()):this.cycle())}to(l){const d=this._getItems();if(l>d.length-1||l<0)return;if(this._isSliding)return void N.one(this._element,Vi,()=>this.to(l));const _=this._getItemIndex(this._getActive());if(_===l)return;const C=l>_?Mi:$n;this._slide(C,d[l])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(l){return l.defaultInterval=l.interval,l}_addEventListeners(){this._config.keyboard&&N.on(this._element,jn,l=>this._keydown(l)),this._config.pause==="hover"&&(N.on(this._element,io,()=>this.pause()),N.on(this._element,vs,()=>this._maybeEnableCycle())),this._config.touch&&yn.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const d of Z.find(".carousel-item img",this._element))N.on(d,so,_=>_.preventDefault());const l={leftCallback:()=>this._slide(this._directionToOrder(Un)),rightCallback:()=>this._slide(this._directionToOrder(_n)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new yn(this._element,l)}_keydown(l){if(/input|textarea/i.test(l.target.tagName))return;const d=Aa[l.key];d&&(l.preventDefault(),this._slide(this._directionToOrder(d)))}_getItemIndex(l){return this._getItems().indexOf(l)}_setActiveIndicatorElement(l){if(!this._indicatorsElement)return;const d=Z.findOne(oi,this._indicatorsElement);d.classList.remove(Ni),d.removeAttribute("aria-current");const _=Z.findOne(`[data-bs-slide-to="${l}"]`,this._indicatorsElement);_&&(_.classList.add(Ni),_.setAttribute("aria-current","true"))}_updateInterval(){const l=this._activeElement||this._getActive();if(!l)return;const d=Number.parseInt(l.getAttribute("data-bs-interval"),10);this._config.interval=d||this._config.defaultInterval}_slide(l,d=null){if(this._isSliding)return;const _=this._getActive(),C=l===Mi,P=d||ve(this._getItems(),_,C,this._config.wrap);if(P===_)return;const O=this._getItemIndex(P),z=W=>N.trigger(this._element,W,{relatedTarget:P,direction:this._orderToDirection(l),from:this._getItemIndex(_),to:O});if(z(Zs).defaultPrevented||!_||!P)return;const H=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(O),this._activeElement=P;const Q=C?"carousel-item-start":"carousel-item-end",X=C?"carousel-item-next":"carousel-item-prev";P.classList.add(X),M(P),_.classList.add(Q),P.classList.add(Q),this._queueCallback(()=>{P.classList.remove(Q,X),P.classList.add(Ni),_.classList.remove(Ni,X,Q),this._isSliding=!1,z(Vi)},_,this._isAnimated()),H&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Z.findOne(Ia,this._element)}_getItems(){return Z.find(ai,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(l){return L()?l===Un?$n:Mi:l===Un?Mi:$n}_orderToDirection(l){return L()?l===$n?Un:_n:l===$n?_n:Un}static jQueryInterface(l){return this.each(function(){const d=ci.getOrCreateInstance(this,l);if(typeof l!="number"){if(typeof l=="string"){if(d[l]===void 0||l.startsWith("_")||l==="constructor")throw new TypeError(`No method named "${l}"`);d[l]()}}else d.to(l)})}}N.on(document,ro,"[data-bs-slide], [data-bs-slide-to]",function(m){const l=Z.getElementFromSelector(this);if(!l||!l.classList.contains(Ye))return;m.preventDefault();const d=ci.getOrCreateInstance(l),_=this.getAttribute("data-bs-slide-to");return _?(d.to(_),void d._maybeEnableCycle()):Qe.getDataAttribute(this,"slide")==="next"?(d.next(),void d._maybeEnableCycle()):(d.prev(),void d._maybeEnableCycle())}),N.on(window,Li,()=>{const m=Z.find('[data-bs-ride="carousel"]');for(const l of m)ci.getOrCreateInstance(l)}),j(ci);const vn=".bs.collapse",oo=`show${vn}`,ao=`shown${vn}`,er=`hide${vn}`,Fi=`hidden${vn}`,Sa=`click${vn}.data-api`,Ut="show",qn="collapse",zi="collapsing",tr=`:scope .${qn} .${qn}`,Bi='[data-bs-toggle="collapse"]',lo={parent:null,toggle:!0},xa={parent:"(null|element)",toggle:"boolean"};class Hn extends wt{constructor(l,d){super(l,d),this._isTransitioning=!1,this._triggerArray=[];const _=Z.find(Bi);for(const C of _){const P=Z.getSelectorFromElement(C),O=Z.find(P).filter(z=>z===this._element);P!==null&&O.length&&this._triggerArray.push(C)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return lo}static get DefaultType(){return xa}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let l=[];if(this._config.parent&&(l=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(C=>C!==this._element).map(C=>Hn.getOrCreateInstance(C,{toggle:!1}))),l.length&&l[0]._isTransitioning||N.trigger(this._element,oo).defaultPrevented)return;for(const C of l)C.hide();const d=this._getDimension();this._element.classList.remove(qn),this._element.classList.add(zi),this._element.style[d]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const _=`scroll${d[0].toUpperCase()+d.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(zi),this._element.classList.add(qn,Ut),this._element.style[d]="",N.trigger(this._element,ao)},this._element,!0),this._element.style[d]=`${this._element[_]}px`}hide(){if(this._isTransitioning||!this._isShown()||N.trigger(this._element,er).defaultPrevented)return;const l=this._getDimension();this._element.style[l]=`${this._element.getBoundingClientRect()[l]}px`,M(this._element),this._element.classList.add(zi),this._element.classList.remove(qn,Ut);for(const d of this._triggerArray){const _=Z.getElementFromSelector(d);_&&!this._isShown(_)&&this._addAriaAndCollapsedClass([d],!1)}this._isTransitioning=!0,this._element.style[l]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(zi),this._element.classList.add(qn),N.trigger(this._element,Fi)},this._element,!0)}_isShown(l=this._element){return l.classList.contains(Ut)}_configAfterMerge(l){return l.toggle=!!l.toggle,l.parent=f(l.parent),l}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const l=this._getFirstLevelChildren(Bi);for(const d of l){const _=Z.getElementFromSelector(d);_&&this._addAriaAndCollapsedClass([d],this._isShown(_))}}_getFirstLevelChildren(l){const d=Z.find(tr,this._config.parent);return Z.find(l,this._config.parent).filter(_=>!d.includes(_))}_addAriaAndCollapsedClass(l,d){if(l.length)for(const _ of l)_.classList.toggle("collapsed",!d),_.setAttribute("aria-expanded",d)}static jQueryInterface(l){const d={};return typeof l=="string"&&/show|hide/.test(l)&&(d.toggle=!1),this.each(function(){const _=Hn.getOrCreateInstance(this,d);if(typeof l=="string"){if(_[l]===void 0)throw new TypeError(`No method named "${l}"`);_[l]()}})}}N.on(document,Sa,Bi,function(m){(m.target.tagName==="A"||m.delegateTarget&&m.delegateTarget.tagName==="A")&&m.preventDefault();for(const l of Z.getMultipleElementsFromSelector(this))Hn.getOrCreateInstance(l,{toggle:!1}).toggle()}),j(Hn);var rt="top",Je="bottom",ft="right",We="left",bn="auto",xt=[rt,Je,ft,We],sn="start",ui="end",nr="clippingParents",bs="viewport",Gn="popper",ws="reference",$i=xt.reduce(function(m,l){return m.concat([l+"-"+sn,l+"-"+ui])},[]),Es=[].concat(xt,[bn]).reduce(function(m,l){return m.concat([l,l+"-"+sn,l+"-"+ui])},[]),ir="beforeRead",sr="read",co="afterRead",rn="beforeMain",Dt="main",hi="afterMain",fi="beforeWrite",Ts="write",Ae="afterWrite",Ui=[ir,sr,co,rn,Dt,hi,fi,Ts,Ae];function dt(m){return m?(m.nodeName||"").toLowerCase():null}function Ke(m){if(m==null)return window;if(m.toString()!=="[object Window]"){var l=m.ownerDocument;return l&&l.defaultView||window}return m}function Wn(m){return m instanceof Ke(m).Element||m instanceof Element}function Et(m){return m instanceof Ke(m).HTMLElement||m instanceof HTMLElement}function rr(m){return typeof ShadowRoot<"u"&&(m instanceof Ke(m).ShadowRoot||m instanceof ShadowRoot)}const or={name:"applyStyles",enabled:!0,phase:"write",fn:function(m){var l=m.state;Object.keys(l.elements).forEach(function(d){var _=l.styles[d]||{},C=l.attributes[d]||{},P=l.elements[d];Et(P)&&dt(P)&&(Object.assign(P.style,_),Object.keys(C).forEach(function(O){var z=C[O];z===!1?P.removeAttribute(O):P.setAttribute(O,z===!0?"":z)}))})},effect:function(m){var l=m.state,d={popper:{position:l.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(l.elements.popper.style,d.popper),l.styles=d,l.elements.arrow&&Object.assign(l.elements.arrow.style,d.arrow),function(){Object.keys(l.elements).forEach(function(_){var C=l.elements[_],P=l.attributes[_]||{},O=Object.keys(l.styles.hasOwnProperty(_)?l.styles[_]:d[_]).reduce(function(z,H){return z[H]="",z},{});Et(C)&&dt(C)&&(Object.assign(C.style,O),Object.keys(P).forEach(function(z){C.removeAttribute(z)}))})}},requires:["computeStyles"]};function jt(m){return m.split("-")[0]}var Kn=Math.max,wn=Math.min,Pt=Math.round;function Is(){var m=navigator.userAgentData;return m!=null&&m.brands&&Array.isArray(m.brands)?m.brands.map(function(l){return l.brand+"/"+l.version}).join(" "):navigator.userAgent}function ar(){return!/^((?!chrome|android).)*safari/i.test(Is())}function Qn(m,l,d){l===void 0&&(l=!1),d===void 0&&(d=!1);var _=m.getBoundingClientRect(),C=1,P=1;l&&Et(m)&&(C=m.offsetWidth>0&&Pt(_.width)/m.offsetWidth||1,P=m.offsetHeight>0&&Pt(_.height)/m.offsetHeight||1);var O=(Wn(m)?Ke(m):window).visualViewport,z=!ar()&&d,H=(_.left+(z&&O?O.offsetLeft:0))/C,Q=(_.top+(z&&O?O.offsetTop:0))/P,X=_.width/C,W=_.height/P;return{width:X,height:W,top:Q,right:H+X,bottom:Q+W,left:H,x:H,y:Q}}function As(m){var l=Qn(m),d=m.offsetWidth,_=m.offsetHeight;return Math.abs(l.width-d)<=1&&(d=l.width),Math.abs(l.height-_)<=1&&(_=l.height),{x:m.offsetLeft,y:m.offsetTop,width:d,height:_}}function lr(m,l){var d=l.getRootNode&&l.getRootNode();if(m.contains(l))return!0;if(d&&rr(d)){var _=l;do{if(_&&m.isSameNode(_))return!0;_=_.parentNode||_.host}while(_)}return!1}function pt(m){return Ke(m).getComputedStyle(m)}function Pa(m){return["table","td","th"].indexOf(dt(m))>=0}function En(m){return((Wn(m)?m.ownerDocument:m.document)||window.document).documentElement}function Cs(m){return dt(m)==="html"?m:m.assignedSlot||m.parentNode||(rr(m)?m.host:null)||En(m)}function on(m){return Et(m)&&pt(m).position!=="fixed"?m.offsetParent:null}function ji(m){for(var l=Ke(m),d=on(m);d&&Pa(d)&&pt(d).position==="static";)d=on(d);return d&&(dt(d)==="html"||dt(d)==="body"&&pt(d).position==="static")?l:d||(function(_){var C=/firefox/i.test(Is());if(/Trident/i.test(Is())&&Et(_)&&pt(_).position==="fixed")return null;var P=Cs(_);for(rr(P)&&(P=P.host);Et(P)&&["html","body"].indexOf(dt(P))<0;){var O=pt(P);if(O.transform!=="none"||O.perspective!=="none"||O.contain==="paint"||["transform","perspective"].indexOf(O.willChange)!==-1||C&&O.willChange==="filter"||C&&O.filter&&O.filter!=="none")return P;P=P.parentNode}return null})(m)||l}function qi(m){return["top","bottom"].indexOf(m)>=0?"x":"y"}function Tn(m,l,d){return Kn(m,wn(l,d))}function cr(m){return Object.assign({},{top:0,right:0,bottom:0,left:0},m)}function di(m,l){return l.reduce(function(d,_){return d[_]=m,d},{})}const pi={name:"arrow",enabled:!0,phase:"main",fn:function(m){var l,d=m.state,_=m.name,C=m.options,P=d.elements.arrow,O=d.modifiersData.popperOffsets,z=jt(d.placement),H=qi(z),Q=[We,ft].indexOf(z)>=0?"height":"width";if(P&&O){var X=(function(Se,Ee){return cr(typeof(Se=typeof Se=="function"?Se(Object.assign({},Ee.rects,{placement:Ee.placement})):Se)!="number"?Se:di(Se,xt))})(C.padding,d),W=As(P),ue=H==="y"?rt:We,te=H==="y"?Je:ft,se=d.rects.reference[Q]+d.rects.reference[H]-O[H]-d.rects.popper[Q],ie=O[H]-d.rects.reference[H],re=ji(P),Ce=re?H==="y"?re.clientHeight||0:re.clientWidth||0:0,Re=se/2-ie/2,de=X[ue],be=Ce-W[Q]-X[te],he=Ce/2-W[Q]/2+Re,pe=Tn(de,he,be),we=H;d.modifiersData[_]=((l={})[we]=pe,l.centerOffset=pe-he,l)}},effect:function(m){var l=m.state,d=m.options.element,_=d===void 0?"[data-popper-arrow]":d;_!=null&&(typeof _!="string"||(_=l.elements.popper.querySelector(_)))&&lr(l.elements.popper,_)&&(l.elements.arrow=_)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xn(m){return m.split("-")[1]}var ur={top:"auto",right:"auto",bottom:"auto",left:"auto"};function De(m){var l,d=m.popper,_=m.popperRect,C=m.placement,P=m.variation,O=m.offsets,z=m.position,H=m.gpuAcceleration,Q=m.adaptive,X=m.roundOffsets,W=m.isFixed,ue=O.x,te=ue===void 0?0:ue,se=O.y,ie=se===void 0?0:se,re=typeof X=="function"?X({x:te,y:ie}):{x:te,y:ie};te=re.x,ie=re.y;var Ce=O.hasOwnProperty("x"),Re=O.hasOwnProperty("y"),de=We,be=rt,he=window;if(Q){var pe=ji(d),we="clientHeight",Se="clientWidth";pe===Ke(d)&&pt(pe=En(d)).position!=="static"&&z==="absolute"&&(we="scrollHeight",Se="scrollWidth"),(C===rt||(C===We||C===ft)&&P===ui)&&(be=Je,ie-=(W&&pe===he&&he.visualViewport?he.visualViewport.height:pe[we])-_.height,ie*=H?1:-1),C!==We&&(C!==rt&&C!==Je||P!==ui)||(de=ft,te-=(W&&pe===he&&he.visualViewport?he.visualViewport.width:pe[Se])-_.width,te*=H?1:-1)}var Ee,Be=Object.assign({position:z},Q&&ur),Ot=X===!0?(function(cn,Tt){var Wt=cn.x,Kt=cn.y,Fe=Tt.devicePixelRatio||1;return{x:Pt(Wt*Fe)/Fe||0,y:Pt(Kt*Fe)/Fe||0}})({x:te,y:ie},Ke(d)):{x:te,y:ie};return te=Ot.x,ie=Ot.y,H?Object.assign({},Be,((Ee={})[be]=Re?"0":"",Ee[de]=Ce?"0":"",Ee.transform=(he.devicePixelRatio||1)<=1?"translate("+te+"px, "+ie+"px)":"translate3d("+te+"px, "+ie+"px, 0)",Ee)):Object.assign({},Be,((l={})[be]=Re?ie+"px":"",l[de]=Ce?te+"px":"",l.transform="",l))}const hr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(m){var l=m.state,d=m.options,_=d.gpuAcceleration,C=_===void 0||_,P=d.adaptive,O=P===void 0||P,z=d.roundOffsets,H=z===void 0||z,Q={placement:jt(l.placement),variation:Xn(l.placement),popper:l.elements.popper,popperRect:l.rects.popper,gpuAcceleration:C,isFixed:l.options.strategy==="fixed"};l.modifiersData.popperOffsets!=null&&(l.styles.popper=Object.assign({},l.styles.popper,De(Object.assign({},Q,{offsets:l.modifiersData.popperOffsets,position:l.options.strategy,adaptive:O,roundOffsets:H})))),l.modifiersData.arrow!=null&&(l.styles.arrow=Object.assign({},l.styles.arrow,De(Object.assign({},Q,{offsets:l.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:H})))),l.attributes.popper=Object.assign({},l.attributes.popper,{"data-popper-placement":l.placement})},data:{}};var Ss={passive:!0};const xs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(m){var l=m.state,d=m.instance,_=m.options,C=_.scroll,P=C===void 0||C,O=_.resize,z=O===void 0||O,H=Ke(l.elements.popper),Q=[].concat(l.scrollParents.reference,l.scrollParents.popper);return P&&Q.forEach(function(X){X.addEventListener("scroll",d.update,Ss)}),z&&H.addEventListener("resize",d.update,Ss),function(){P&&Q.forEach(function(X){X.removeEventListener("scroll",d.update,Ss)}),z&&H.removeEventListener("resize",d.update,Ss)}},data:{}};var uo={left:"right",right:"left",bottom:"top",top:"bottom"};function Hi(m){return m.replace(/left|right|bottom|top/g,function(l){return uo[l]})}var Ps={start:"end",end:"start"};function an(m){return m.replace(/start|end/g,function(l){return Ps[l]})}function ks(m){var l=Ke(m);return{scrollLeft:l.pageXOffset,scrollTop:l.pageYOffset}}function fr(m){return Qn(En(m)).left+ks(m).scrollLeft}function Yn(m){var l=pt(m),d=l.overflow,_=l.overflowX,C=l.overflowY;return/auto|scroll|overlay|hidden/.test(d+C+_)}function dr(m){return["html","body","#document"].indexOf(dt(m))>=0?m.ownerDocument.body:Et(m)&&Yn(m)?m:dr(Cs(m))}function Jn(m,l){var d;l===void 0&&(l=[]);var _=dr(m),C=_===((d=m.ownerDocument)==null?void 0:d.body),P=Ke(_),O=C?[P].concat(P.visualViewport||[],Yn(_)?_:[]):_,z=l.concat(O);return C?z:z.concat(Jn(Cs(O)))}function mi(m){return Object.assign({},m,{left:m.x,top:m.y,right:m.x+m.width,bottom:m.y+m.height})}function pr(m,l,d){return l===bs?mi((function(_,C){var P=Ke(_),O=En(_),z=P.visualViewport,H=O.clientWidth,Q=O.clientHeight,X=0,W=0;if(z){H=z.width,Q=z.height;var ue=ar();(ue||!ue&&C==="fixed")&&(X=z.offsetLeft,W=z.offsetTop)}return{width:H,height:Q,x:X+fr(_),y:W}})(m,d)):Wn(l)?(function(_,C){var P=Qn(_,!1,C==="fixed");return P.top=P.top+_.clientTop,P.left=P.left+_.clientLeft,P.bottom=P.top+_.clientHeight,P.right=P.left+_.clientWidth,P.width=_.clientWidth,P.height=_.clientHeight,P.x=P.left,P.y=P.top,P})(l,d):mi((function(_){var C,P=En(_),O=ks(_),z=(C=_.ownerDocument)==null?void 0:C.body,H=Kn(P.scrollWidth,P.clientWidth,z?z.scrollWidth:0,z?z.clientWidth:0),Q=Kn(P.scrollHeight,P.clientHeight,z?z.scrollHeight:0,z?z.clientHeight:0),X=-O.scrollLeft+fr(_),W=-O.scrollTop;return pt(z||P).direction==="rtl"&&(X+=Kn(P.clientWidth,z?z.clientWidth:0)-H),{width:H,height:Q,x:X,y:W}})(En(m)))}function Gi(m){var l,d=m.reference,_=m.element,C=m.placement,P=C?jt(C):null,O=C?Xn(C):null,z=d.x+d.width/2-_.width/2,H=d.y+d.height/2-_.height/2;switch(P){case rt:l={x:z,y:d.y-_.height};break;case Je:l={x:z,y:d.y+d.height};break;case ft:l={x:d.x+d.width,y:H};break;case We:l={x:d.x-_.width,y:H};break;default:l={x:d.x,y:d.y}}var Q=P?qi(P):null;if(Q!=null){var X=Q==="y"?"height":"width";switch(O){case sn:l[Q]=l[Q]-(d[X]/2-_[X]/2);break;case ui:l[Q]=l[Q]+(d[X]/2-_[X]/2)}}return l}function gi(m,l){l===void 0&&(l={});var d=l,_=d.placement,C=_===void 0?m.placement:_,P=d.strategy,O=P===void 0?m.strategy:P,z=d.boundary,H=z===void 0?nr:z,Q=d.rootBoundary,X=Q===void 0?bs:Q,W=d.elementContext,ue=W===void 0?Gn:W,te=d.altBoundary,se=te!==void 0&&te,ie=d.padding,re=ie===void 0?0:ie,Ce=cr(typeof re!="number"?re:di(re,xt)),Re=ue===Gn?ws:Gn,de=m.rects.popper,be=m.elements[se?Re:ue],he=(function(Tt,Wt,Kt,Fe){var Pn=Wt==="clippingParents"?(function(xe){var It=Jn(Cs(xe)),Qt=["absolute","fixed"].indexOf(pt(xe).position)>=0&&Et(xe)?ji(xe):xe;return Wn(Qt)?It.filter(function(bi){return Wn(bi)&&lr(bi,Qt)&&dt(bi)!=="body"}):[]})(Tt):[].concat(Wt),kn=[].concat(Pn,[Kt]),Ls=kn[0],Ze=kn.reduce(function(xe,It){var Qt=pr(Tt,It,Fe);return xe.top=Kn(Qt.top,xe.top),xe.right=wn(Qt.right,xe.right),xe.bottom=wn(Qt.bottom,xe.bottom),xe.left=Kn(Qt.left,xe.left),xe},pr(Tt,Ls,Fe));return Ze.width=Ze.right-Ze.left,Ze.height=Ze.bottom-Ze.top,Ze.x=Ze.left,Ze.y=Ze.top,Ze})(Wn(be)?be:be.contextElement||En(m.elements.popper),H,X,O),pe=Qn(m.elements.reference),we=Gi({reference:pe,element:de,placement:C}),Se=mi(Object.assign({},de,we)),Ee=ue===Gn?Se:pe,Be={top:he.top-Ee.top+Ce.top,bottom:Ee.bottom-he.bottom+Ce.bottom,left:he.left-Ee.left+Ce.left,right:Ee.right-he.right+Ce.right},Ot=m.modifiersData.offset;if(ue===Gn&&Ot){var cn=Ot[C];Object.keys(Be).forEach(function(Tt){var Wt=[ft,Je].indexOf(Tt)>=0?1:-1,Kt=[rt,Je].indexOf(Tt)>=0?"y":"x";Be[Tt]+=cn[Kt]*Wt})}return Be}function ho(m,l){l===void 0&&(l={});var d=l,_=d.placement,C=d.boundary,P=d.rootBoundary,O=d.padding,z=d.flipVariations,H=d.allowedAutoPlacements,Q=H===void 0?Es:H,X=Xn(_),W=X?z?$i:$i.filter(function(se){return Xn(se)===X}):xt,ue=W.filter(function(se){return Q.indexOf(se)>=0});ue.length===0&&(ue=W);var te=ue.reduce(function(se,ie){return se[ie]=gi(m,{placement:ie,boundary:C,rootBoundary:P,padding:O})[jt(ie)],se},{});return Object.keys(te).sort(function(se,ie){return te[se]-te[ie]})}const yi={name:"flip",enabled:!0,phase:"main",fn:function(m){var l=m.state,d=m.options,_=m.name;if(!l.modifiersData[_]._skip){for(var C=d.mainAxis,P=C===void 0||C,O=d.altAxis,z=O===void 0||O,H=d.fallbackPlacements,Q=d.padding,X=d.boundary,W=d.rootBoundary,ue=d.altBoundary,te=d.flipVariations,se=te===void 0||te,ie=d.allowedAutoPlacements,re=l.options.placement,Ce=jt(re),Re=H||(Ce!==re&&se?(function(xe){if(jt(xe)===bn)return[];var It=Hi(xe);return[an(xe),It,an(It)]})(re):[Hi(re)]),de=[re].concat(Re).reduce(function(xe,It){return xe.concat(jt(It)===bn?ho(l,{placement:It,boundary:X,rootBoundary:W,padding:Q,flipVariations:se,allowedAutoPlacements:ie}):It)},[]),be=l.rects.reference,he=l.rects.popper,pe=new Map,we=!0,Se=de[0],Ee=0;Ee<de.length;Ee++){var Be=de[Ee],Ot=jt(Be),cn=Xn(Be)===sn,Tt=[rt,Je].indexOf(Ot)>=0,Wt=Tt?"width":"height",Kt=gi(l,{placement:Be,boundary:X,rootBoundary:W,altBoundary:ue,padding:Q}),Fe=Tt?cn?ft:We:cn?Je:rt;be[Wt]>he[Wt]&&(Fe=Hi(Fe));var Pn=Hi(Fe),kn=[];if(P&&kn.push(Kt[Ot]<=0),z&&kn.push(Kt[Fe]<=0,Kt[Pn]<=0),kn.every(function(xe){return xe})){Se=Be,we=!1;break}pe.set(Be,kn)}if(we)for(var Ls=function(xe){var It=de.find(function(Qt){var bi=pe.get(Qt);if(bi)return bi.slice(0,xe).every(function(To){return To})});if(It)return Se=It,"break"},Ze=se?3:1;Ze>0&&Ls(Ze)!=="break";Ze--);l.placement!==Se&&(l.modifiersData[_]._skip=!0,l.placement=Se,l.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function mr(m,l,d){return d===void 0&&(d={x:0,y:0}),{top:m.top-l.height-d.y,right:m.right-l.width+d.x,bottom:m.bottom-l.height+d.y,left:m.left-l.width-d.x}}function gr(m){return[rt,ft,Je,We].some(function(l){return m[l]>=0})}const Rs={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(m){var l=m.state,d=m.name,_=l.rects.reference,C=l.rects.popper,P=l.modifiersData.preventOverflow,O=gi(l,{elementContext:"reference"}),z=gi(l,{altBoundary:!0}),H=mr(O,_),Q=mr(z,C,P),X=gr(H),W=gr(Q);l.modifiersData[d]={referenceClippingOffsets:H,popperEscapeOffsets:Q,isReferenceHidden:X,hasPopperEscaped:W},l.attributes.popper=Object.assign({},l.attributes.popper,{"data-popper-reference-hidden":X,"data-popper-escaped":W})}},Ds={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(m){var l=m.state,d=m.options,_=m.name,C=d.offset,P=C===void 0?[0,0]:C,O=Es.reduce(function(X,W){return X[W]=(function(ue,te,se){var ie=jt(ue),re=[We,rt].indexOf(ie)>=0?-1:1,Ce=typeof se=="function"?se(Object.assign({},te,{placement:ue})):se,Re=Ce[0],de=Ce[1];return Re=Re||0,de=(de||0)*re,[We,ft].indexOf(ie)>=0?{x:de,y:Re}:{x:Re,y:de}})(W,l.rects,P),X},{}),z=O[l.placement],H=z.x,Q=z.y;l.modifiersData.popperOffsets!=null&&(l.modifiersData.popperOffsets.x+=H,l.modifiersData.popperOffsets.y+=Q),l.modifiersData[_]=O}},Os={name:"popperOffsets",enabled:!0,phase:"read",fn:function(m){var l=m.state,d=m.name;l.modifiersData[d]=Gi({reference:l.rects.reference,element:l.rects.popper,placement:l.placement})},data:{}},Wi={name:"preventOverflow",enabled:!0,phase:"main",fn:function(m){var l=m.state,d=m.options,_=m.name,C=d.mainAxis,P=C===void 0||C,O=d.altAxis,z=O!==void 0&&O,H=d.boundary,Q=d.rootBoundary,X=d.altBoundary,W=d.padding,ue=d.tether,te=ue===void 0||ue,se=d.tetherOffset,ie=se===void 0?0:se,re=gi(l,{boundary:H,rootBoundary:Q,padding:W,altBoundary:X}),Ce=jt(l.placement),Re=Xn(l.placement),de=!Re,be=qi(Ce),he=be==="x"?"y":"x",pe=l.modifiersData.popperOffsets,we=l.rects.reference,Se=l.rects.popper,Ee=typeof ie=="function"?ie(Object.assign({},l.rects,{placement:l.placement})):ie,Be=typeof Ee=="number"?{mainAxis:Ee,altAxis:Ee}:Object.assign({mainAxis:0,altAxis:0},Ee),Ot=l.modifiersData.offset?l.modifiersData.offset[l.placement]:null,cn={x:0,y:0};if(pe){if(P){var Tt,Wt=be==="y"?rt:We,Kt=be==="y"?Je:ft,Fe=be==="y"?"height":"width",Pn=pe[be],kn=Pn+re[Wt],Ls=Pn-re[Kt],Ze=te?-Se[Fe]/2:0,xe=Re===sn?we[Fe]:Se[Fe],It=Re===sn?-Se[Fe]:-we[Fe],Qt=l.elements.arrow,bi=te&&Qt?As(Qt):{width:0,height:0},To=l.modifiersData["arrow#persistent"]?l.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},au=To[Wt],lu=To[Kt],Io=Tn(0,we[Fe],bi[Fe]),fm=de?we[Fe]/2-Ze-Io-au-Be.mainAxis:xe-Io-au-Be.mainAxis,dm=de?-we[Fe]/2+Ze+Io+lu+Be.mainAxis:It+Io+lu+Be.mainAxis,$a=l.elements.arrow&&ji(l.elements.arrow),pm=$a?be==="y"?$a.clientTop||0:$a.clientLeft||0:0,cu=(Tt=Ot?.[be])!=null?Tt:0,mm=Pn+dm-cu,uu=Tn(te?wn(kn,Pn+fm-cu-pm):kn,Pn,te?Kn(Ls,mm):Ls);pe[be]=uu,cn[be]=uu-Pn}if(z){var hu,gm=be==="x"?rt:We,ym=be==="x"?Je:ft,es=pe[he],Ao=he==="y"?"height":"width",fu=es+re[gm],du=es-re[ym],Ua=[rt,We].indexOf(Ce)!==-1,pu=(hu=Ot?.[he])!=null?hu:0,mu=Ua?fu:es-we[Ao]-Se[Ao]-pu+Be.altAxis,gu=Ua?es+we[Ao]+Se[Ao]-pu-Be.altAxis:du,yu=te&&Ua?(function(_m,vm,ja){var _u=Tn(_m,vm,ja);return _u>ja?ja:_u})(mu,es,gu):Tn(te?mu:fu,es,te?gu:du);pe[he]=yu,cn[he]=yu-es}l.modifiersData[_]=cn}},requiresIfExists:["offset"]};function fo(m,l,d){d===void 0&&(d=!1);var _,C,P=Et(l),O=Et(l)&&(function(W){var ue=W.getBoundingClientRect(),te=Pt(ue.width)/W.offsetWidth||1,se=Pt(ue.height)/W.offsetHeight||1;return te!==1||se!==1})(l),z=En(l),H=Qn(m,O,d),Q={scrollLeft:0,scrollTop:0},X={x:0,y:0};return(P||!P&&!d)&&((dt(l)!=="body"||Yn(z))&&(Q=(_=l)!==Ke(_)&&Et(_)?{scrollLeft:(C=_).scrollLeft,scrollTop:C.scrollTop}:ks(_)),Et(l)?((X=Qn(l,!0)).x+=l.clientLeft,X.y+=l.clientTop):z&&(X.x=fr(z))),{x:H.left+Q.scrollLeft-X.x,y:H.top+Q.scrollTop-X.y,width:H.width,height:H.height}}function po(m){var l=new Map,d=new Set,_=[];function C(P){d.add(P.name),[].concat(P.requires||[],P.requiresIfExists||[]).forEach(function(O){if(!d.has(O)){var z=l.get(O);z&&C(z)}}),_.push(P)}return m.forEach(function(P){l.set(P.name,P)}),m.forEach(function(P){d.has(P.name)||C(P)}),_}var In={placement:"bottom",modifiers:[],strategy:"absolute"};function yr(){for(var m=arguments.length,l=new Array(m),d=0;d<m;d++)l[d]=arguments[d];return!l.some(function(_){return!(_&&typeof _.getBoundingClientRect=="function")})}function Ki(m){m===void 0&&(m={});var l=m,d=l.defaultModifiers,_=d===void 0?[]:d,C=l.defaultOptions,P=C===void 0?In:C;return function(O,z,H){H===void 0&&(H=P);var Q,X,W={placement:"bottom",orderedModifiers:[],options:Object.assign({},In,P),modifiersData:{},elements:{reference:O,popper:z},attributes:{},styles:{}},ue=[],te=!1,se={state:W,setOptions:function(re){var Ce=typeof re=="function"?re(W.options):re;ie(),W.options=Object.assign({},P,W.options,Ce),W.scrollParents={reference:Wn(O)?Jn(O):O.contextElement?Jn(O.contextElement):[],popper:Jn(z)};var Re,de,be=(function(he){var pe=po(he);return Ui.reduce(function(we,Se){return we.concat(pe.filter(function(Ee){return Ee.phase===Se}))},[])})((Re=[].concat(_,W.options.modifiers),de=Re.reduce(function(he,pe){var we=he[pe.name];return he[pe.name]=we?Object.assign({},we,pe,{options:Object.assign({},we.options,pe.options),data:Object.assign({},we.data,pe.data)}):pe,he},{}),Object.keys(de).map(function(he){return de[he]})));return W.orderedModifiers=be.filter(function(he){return he.enabled}),W.orderedModifiers.forEach(function(he){var pe=he.name,we=he.options,Se=we===void 0?{}:we,Ee=he.effect;if(typeof Ee=="function"){var Be=Ee({state:W,name:pe,instance:se,options:Se});ue.push(Be||function(){})}}),se.update()},forceUpdate:function(){if(!te){var re=W.elements,Ce=re.reference,Re=re.popper;if(yr(Ce,Re)){W.rects={reference:fo(Ce,ji(Re),W.options.strategy==="fixed"),popper:As(Re)},W.reset=!1,W.placement=W.options.placement,W.orderedModifiers.forEach(function(Ee){return W.modifiersData[Ee.name]=Object.assign({},Ee.data)});for(var de=0;de<W.orderedModifiers.length;de++)if(W.reset!==!0){var be=W.orderedModifiers[de],he=be.fn,pe=be.options,we=pe===void 0?{}:pe,Se=be.name;typeof he=="function"&&(W=he({state:W,options:we,name:Se,instance:se})||W)}else W.reset=!1,de=-1}}},update:(Q=function(){return new Promise(function(re){se.forceUpdate(),re(W)})},function(){return X||(X=new Promise(function(re){Promise.resolve().then(function(){X=void 0,re(Q())})})),X}),destroy:function(){ie(),te=!0}};if(!yr(O,z))return se;function ie(){ue.forEach(function(re){return re()}),ue=[]}return se.setOptions(H).then(function(re){!te&&H.onFirstUpdate&&H.onFirstUpdate(re)}),se}}var mo=Ki(),go=Ki({defaultModifiers:[xs,Os,hr,or]}),_i=Ki({defaultModifiers:[xs,Os,hr,or,Ds,yi,Wi,pi,Rs]});const mt=Object.freeze(Object.defineProperty({__proto__:null,afterMain:hi,afterRead:co,afterWrite:Ae,applyStyles:or,arrow:pi,auto:bn,basePlacements:xt,beforeMain:rn,beforeRead:ir,beforeWrite:fi,bottom:Je,clippingParents:nr,computeStyles:hr,createPopper:_i,createPopperBase:mo,createPopperLite:go,detectOverflow:gi,end:ui,eventListeners:xs,flip:yi,hide:Rs,left:We,main:Dt,modifierPhases:Ui,offset:Ds,placements:Es,popper:Gn,popperGenerator:Ki,popperOffsets:Os,preventOverflow:Wi,read:sr,reference:ws,right:ft,start:sn,top:rt,variationPlacements:$i,viewport:bs,write:Ts},Symbol.toStringTag,{value:"Module"})),_r="dropdown",An=".bs.dropdown",Cn=".data-api",o="ArrowUp",u="ArrowDown",p=`hide${An}`,v=`hidden${An}`,R=`show${An}`,D=`shown${An}`,q=`click${An}${Cn}`,ae=`keydown${An}${Cn}`,ze=`keyup${An}${Cn}`,ge="show",ke='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',qt=`${ke}.${ge}`,Ht=".dropdown-menu",Sn=L()?"top-end":"top-start",xn=L()?"top-start":"top-end",Ms=L()?"bottom-end":"bottom-start",vr=L()?"bottom-start":"bottom-end",Xd=L()?"left-start":"right-start",Yd=L()?"right-start":"left-start",Jd={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Zd={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ln extends wt{constructor(l,d){super(l,d),this._popper=null,this._parent=this._element.parentNode,this._menu=Z.next(this._element,Ht)[0]||Z.prev(this._element,Ht)[0]||Z.findOne(Ht,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Jd}static get DefaultType(){return Zd}static get NAME(){return _r}toggle(){return this._isShown()?this.hide():this.show()}show(){if(y(this._element)||this._isShown())return;const l={relatedTarget:this._element};if(!N.trigger(this._element,R,l).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const d of[].concat(...document.body.children))N.on(d,"mouseover",x);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ge),this._element.classList.add(ge),N.trigger(this._element,D,l)}}hide(){if(y(this._element)||!this._isShown())return;const l={relatedTarget:this._element};this._completeHide(l)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(l){if(!N.trigger(this._element,p,l).defaultPrevented){if("ontouchstart"in document.documentElement)for(const d of[].concat(...document.body.children))N.off(d,"mouseover",x);this._popper&&this._popper.destroy(),this._menu.classList.remove(ge),this._element.classList.remove(ge),this._element.setAttribute("aria-expanded","false"),Qe.removeDataAttribute(this._menu,"popper"),N.trigger(this._element,v,l)}}_getConfig(l){if(typeof(l=super._getConfig(l)).reference=="object"&&!h(l.reference)&&typeof l.reference.getBoundingClientRect!="function")throw new TypeError(`${_r.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return l}_createPopper(){if(mt===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let l=this._element;this._config.reference==="parent"?l=this._parent:h(this._config.reference)?l=f(this._config.reference):typeof this._config.reference=="object"&&(l=this._config.reference);const d=this._getPopperConfig();this._popper=_i(l,this._menu,d)}_isShown(){return this._menu.classList.contains(ge)}_getPlacement(){const l=this._parent;if(l.classList.contains("dropend"))return Xd;if(l.classList.contains("dropstart"))return Yd;if(l.classList.contains("dropup-center"))return"top";if(l.classList.contains("dropdown-center"))return"bottom";const d=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return l.classList.contains("dropup")?d?xn:Sn:d?vr:Ms}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:l}=this._config;return typeof l=="string"?l.split(",").map(d=>Number.parseInt(d,10)):typeof l=="function"?d=>l(d,this._element):l}_getPopperConfig(){const l={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Qe.setDataAttribute(this._menu,"popper","static"),l.modifiers=[{name:"applyStyles",enabled:!1}]),{...l,...G(this._config.popperConfig,[void 0,l])}}_selectMenuItem({key:l,target:d}){const _=Z.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(C=>g(C));_.length&&ve(_,d,l===u,!_.includes(d)).focus()}static jQueryInterface(l){return this.each(function(){const d=ln.getOrCreateInstance(this,l);if(typeof l=="string"){if(d[l]===void 0)throw new TypeError(`No method named "${l}"`);d[l]()}})}static clearMenus(l){if(l.button===2||l.type==="keyup"&&l.key!=="Tab")return;const d=Z.find(qt);for(const _ of d){const C=ln.getInstance(_);if(!C||C._config.autoClose===!1)continue;const P=l.composedPath(),O=P.includes(C._menu);if(P.includes(C._element)||C._config.autoClose==="inside"&&!O||C._config.autoClose==="outside"&&O||C._menu.contains(l.target)&&(l.type==="keyup"&&l.key==="Tab"||/input|select|option|textarea|form/i.test(l.target.tagName)))continue;const z={relatedTarget:C._element};l.type==="click"&&(z.clickEvent=l),C._completeHide(z)}}static dataApiKeydownHandler(l){const d=/input|textarea/i.test(l.target.tagName),_=l.key==="Escape",C=[o,u].includes(l.key);if(!C&&!_||d&&!_)return;l.preventDefault();const P=this.matches(ke)?this:Z.prev(this,ke)[0]||Z.next(this,ke)[0]||Z.findOne(ke,l.delegateTarget.parentNode),O=ln.getOrCreateInstance(P);if(C)return l.stopPropagation(),O.show(),void O._selectMenuItem(l);O._isShown()&&(l.stopPropagation(),O.hide(),P.focus())}}N.on(document,ae,ke,ln.dataApiKeydownHandler),N.on(document,ae,Ht,ln.dataApiKeydownHandler),N.on(document,q,ln.clearMenus),N.on(document,ze,ln.clearMenus),N.on(document,q,ke,function(m){m.preventDefault(),ln.getOrCreateInstance(this).toggle()}),j(ln);const Pc="backdrop",kc="show",Rc=`mousedown.bs.${Pc}`,ep={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},tp={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Dc extends zn{constructor(l){super(),this._config=this._getConfig(l),this._isAppended=!1,this._element=null}static get Default(){return ep}static get DefaultType(){return tp}static get NAME(){return Pc}show(l){if(!this._config.isVisible)return void G(l);this._append();const d=this._getElement();this._config.isAnimated&&M(d),d.classList.add(kc),this._emulateAnimation(()=>{G(l)})}hide(l){this._config.isVisible?(this._getElement().classList.remove(kc),this._emulateAnimation(()=>{this.dispose(),G(l)})):G(l)}dispose(){this._isAppended&&(N.off(this._element,Rc),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const l=document.createElement("div");l.className=this._config.className,this._config.isAnimated&&l.classList.add("fade"),this._element=l}return this._element}_configAfterMerge(l){return l.rootElement=f(l.rootElement),l}_append(){if(this._isAppended)return;const l=this._getElement();this._config.rootElement.append(l),N.on(l,Rc,()=>{G(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(l){U(l,this._getElement(),this._config.isAnimated)}}const yo=".bs.focustrap",np=`focusin${yo}`,ip=`keydown.tab${yo}`,Oc="backward",sp={autofocus:!0,trapElement:null},rp={autofocus:"boolean",trapElement:"element"};class Mc extends zn{constructor(l){super(),this._config=this._getConfig(l),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return sp}static get DefaultType(){return rp}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),N.off(document,yo),N.on(document,np,l=>this._handleFocusin(l)),N.on(document,ip,l=>this._handleKeydown(l)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,N.off(document,yo))}_handleFocusin(l){const{trapElement:d}=this._config;if(l.target===document||l.target===d||d.contains(l.target))return;const _=Z.focusableChildren(d);_.length===0?d.focus():this._lastTabNavDirection===Oc?_[_.length-1].focus():_[0].focus()}_handleKeydown(l){l.key==="Tab"&&(this._lastTabNavDirection=l.shiftKey?Oc:"forward")}}const Vc=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Lc=".sticky-top",_o="padding-right",Nc="margin-right";class ka{constructor(){this._element=document.body}getWidth(){const l=document.documentElement.clientWidth;return Math.abs(window.innerWidth-l)}hide(){const l=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,_o,d=>d+l),this._setElementAttributes(Vc,_o,d=>d+l),this._setElementAttributes(Lc,Nc,d=>d-l)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,_o),this._resetElementAttributes(Vc,_o),this._resetElementAttributes(Lc,Nc)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(l,d,_){const C=this.getWidth();this._applyManipulationCallback(l,P=>{if(P!==this._element&&window.innerWidth>P.clientWidth+C)return;this._saveInitialAttribute(P,d);const O=window.getComputedStyle(P).getPropertyValue(d);P.style.setProperty(d,`${_(Number.parseFloat(O))}px`)})}_saveInitialAttribute(l,d){const _=l.style.getPropertyValue(d);_&&Qe.setDataAttribute(l,d,_)}_resetElementAttributes(l,d){this._applyManipulationCallback(l,_=>{const C=Qe.getDataAttribute(_,d);C!==null?(Qe.removeDataAttribute(_,d),_.style.setProperty(d,C)):_.style.removeProperty(d)})}_applyManipulationCallback(l,d){if(h(l))d(l);else for(const _ of Z.find(l,this._element))d(_)}}const Gt=".bs.modal",op=`hide${Gt}`,ap=`hidePrevented${Gt}`,Fc=`hidden${Gt}`,zc=`show${Gt}`,lp=`shown${Gt}`,cp=`resize${Gt}`,up=`click.dismiss${Gt}`,hp=`mousedown.dismiss${Gt}`,fp=`keydown.dismiss${Gt}`,dp=`click${Gt}.data-api`,Bc="modal-open",$c="show",Ra="modal-static",pp={backdrop:!0,focus:!0,keyboard:!0},mp={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Qi extends wt{constructor(l,d){super(l,d),this._dialog=Z.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ka,this._addEventListeners()}static get Default(){return pp}static get DefaultType(){return mp}static get NAME(){return"modal"}toggle(l){return this._isShown?this.hide():this.show(l)}show(l){this._isShown||this._isTransitioning||N.trigger(this._element,zc,{relatedTarget:l}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Bc),this._adjustDialog(),this._backdrop.show(()=>this._showElement(l)))}hide(){this._isShown&&!this._isTransitioning&&(N.trigger(this._element,op).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove($c),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){N.off(window,Gt),N.off(this._dialog,Gt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Dc({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Mc({trapElement:this._element})}_showElement(l){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const d=Z.findOne(".modal-body",this._dialog);d&&(d.scrollTop=0),M(this._element),this._element.classList.add($c),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,N.trigger(this._element,lp,{relatedTarget:l})},this._dialog,this._isAnimated())}_addEventListeners(){N.on(this._element,fp,l=>{l.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),N.on(window,cp,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),N.on(this._element,hp,l=>{N.one(this._element,up,d=>{this._element===l.target&&this._element===d.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Bc),this._resetAdjustments(),this._scrollBar.reset(),N.trigger(this._element,Fc)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(N.trigger(this._element,ap).defaultPrevented)return;const l=this._element.scrollHeight>document.documentElement.clientHeight,d=this._element.style.overflowY;d==="hidden"||this._element.classList.contains(Ra)||(l||(this._element.style.overflowY="hidden"),this._element.classList.add(Ra),this._queueCallback(()=>{this._element.classList.remove(Ra),this._queueCallback(()=>{this._element.style.overflowY=d},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const l=this._element.scrollHeight>document.documentElement.clientHeight,d=this._scrollBar.getWidth(),_=d>0;if(_&&!l){const C=L()?"paddingLeft":"paddingRight";this._element.style[C]=`${d}px`}if(!_&&l){const C=L()?"paddingRight":"paddingLeft";this._element.style[C]=`${d}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(l,d){return this.each(function(){const _=Qi.getOrCreateInstance(this,l);if(typeof l=="string"){if(_[l]===void 0)throw new TypeError(`No method named "${l}"`);_[l](d)}})}}N.on(document,dp,'[data-bs-toggle="modal"]',function(m){const l=Z.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&m.preventDefault(),N.one(l,zc,_=>{_.defaultPrevented||N.one(l,Fc,()=>{g(this)&&this.focus()})});const d=Z.findOne(".modal.show");d&&Qi.getInstance(d).hide(),Qi.getOrCreateInstance(l).toggle(this)}),ys(Qi),j(Qi);const Zn=".bs.offcanvas",Uc=".data-api",gp=`load${Zn}${Uc}`,jc="show",qc="showing",Hc="hiding",Gc=".offcanvas.show",yp=`show${Zn}`,_p=`shown${Zn}`,vp=`hide${Zn}`,Wc=`hidePrevented${Zn}`,Kc=`hidden${Zn}`,bp=`resize${Zn}`,wp=`click${Zn}${Uc}`,Ep=`keydown.dismiss${Zn}`,Tp={backdrop:!0,keyboard:!0,scroll:!1},Ip={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ei extends wt{constructor(l,d){super(l,d),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Tp}static get DefaultType(){return Ip}static get NAME(){return"offcanvas"}toggle(l){return this._isShown?this.hide():this.show(l)}show(l){this._isShown||N.trigger(this._element,yp,{relatedTarget:l}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new ka().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(qc),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(jc),this._element.classList.remove(qc),N.trigger(this._element,_p,{relatedTarget:l})},this._element,!0))}hide(){this._isShown&&(N.trigger(this._element,vp).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Hc),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(jc,Hc),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ka().reset(),N.trigger(this._element,Kc)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const l=!!this._config.backdrop;return new Dc({className:"offcanvas-backdrop",isVisible:l,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:l?()=>{this._config.backdrop!=="static"?this.hide():N.trigger(this._element,Wc)}:null})}_initializeFocusTrap(){return new Mc({trapElement:this._element})}_addEventListeners(){N.on(this._element,Ep,l=>{l.key==="Escape"&&(this._config.keyboard?this.hide():N.trigger(this._element,Wc))})}static jQueryInterface(l){return this.each(function(){const d=ei.getOrCreateInstance(this,l);if(typeof l=="string"){if(d[l]===void 0||l.startsWith("_")||l==="constructor")throw new TypeError(`No method named "${l}"`);d[l](this)}})}}N.on(document,wp,'[data-bs-toggle="offcanvas"]',function(m){const l=Z.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&m.preventDefault(),y(this))return;N.one(l,Kc,()=>{g(this)&&this.focus()});const d=Z.findOne(Gc);d&&d!==l&&ei.getInstance(d).hide(),ei.getOrCreateInstance(l).toggle(this)}),N.on(window,gp,()=>{for(const m of Z.find(Gc))ei.getOrCreateInstance(m).show()}),N.on(window,bp,()=>{for(const m of Z.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(m).position!=="fixed"&&ei.getOrCreateInstance(m).hide()}),ys(ei),j(ei);const Qc={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ap=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Cp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Sp=(m,l)=>{const d=m.nodeName.toLowerCase();return l.includes(d)?!Ap.has(d)||!!Cp.test(m.nodeValue):l.filter(_=>_ instanceof RegExp).some(_=>_.test(d))},xp={allowList:Qc,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Pp={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},kp={entry:"(string|element|function|null)",selector:"(string|element)"};class Rp extends zn{constructor(l){super(),this._config=this._getConfig(l)}static get Default(){return xp}static get DefaultType(){return Pp}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(l=>this._resolvePossibleFunction(l)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(l){return this._checkContent(l),this._config.content={...this._config.content,...l},this}toHtml(){const l=document.createElement("div");l.innerHTML=this._maybeSanitize(this._config.template);for(const[C,P]of Object.entries(this._config.content))this._setContent(l,P,C);const d=l.children[0],_=this._resolvePossibleFunction(this._config.extraClass);return _&&d.classList.add(..._.split(" ")),d}_typeCheckConfig(l){super._typeCheckConfig(l),this._checkContent(l.content)}_checkContent(l){for(const[d,_]of Object.entries(l))super._typeCheckConfig({selector:d,entry:_},kp)}_setContent(l,d,_){const C=Z.findOne(_,l);C&&((d=this._resolvePossibleFunction(d))?h(d)?this._putElementInTemplate(f(d),C):this._config.html?C.innerHTML=this._maybeSanitize(d):C.textContent=d:C.remove())}_maybeSanitize(l){return this._config.sanitize?(function(d,_,C){if(!d.length)return d;if(C&&typeof C=="function")return C(d);const P=new window.DOMParser().parseFromString(d,"text/html"),O=[].concat(...P.body.querySelectorAll("*"));for(const z of O){const H=z.nodeName.toLowerCase();if(!Object.keys(_).includes(H)){z.remove();continue}const Q=[].concat(...z.attributes),X=[].concat(_["*"]||[],_[H]||[]);for(const W of Q)Sp(W,X)||z.removeAttribute(W.nodeName)}return P.body.innerHTML})(l,this._config.allowList,this._config.sanitizeFn):l}_resolvePossibleFunction(l){return G(l,[void 0,this])}_putElementInTemplate(l,d){if(this._config.html)return d.innerHTML="",void d.append(l);d.textContent=l.textContent}}const Dp=new Set(["sanitize","allowList","sanitizeFn"]),Da="fade",vo="show",Op=".tooltip-inner",Xc=".modal",Yc="hide.bs.modal",br="hover",Oa="focus",Ma="click",Mp={AUTO:"auto",TOP:"top",RIGHT:L()?"left":"right",BOTTOM:"bottom",LEFT:L()?"right":"left"},Vp={allowList:Qc,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Lp={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Xi extends wt{constructor(l,d){if(mt===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(l,d),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Vp}static get DefaultType(){return Lp}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),N.off(this._element.closest(Xc),Yc,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const l=N.trigger(this._element,this.constructor.eventName("show")),d=(b(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(l.defaultPrevented||!d)return;this._disposePopper();const _=this._getTipElement();this._element.setAttribute("aria-describedby",_.getAttribute("id"));const{container:C}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(C.append(_),N.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(_),_.classList.add(vo),"ontouchstart"in document.documentElement)for(const P of[].concat(...document.body.children))N.on(P,"mouseover",x);this._queueCallback(()=>{N.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!N.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(vo),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))N.off(l,"mouseover",x);this._activeTrigger[Ma]=!1,this._activeTrigger[Oa]=!1,this._activeTrigger[br]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),N.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(l){const d=this._getTemplateFactory(l).toHtml();if(!d)return null;d.classList.remove(Da,vo),d.classList.add(`bs-${this.constructor.NAME}-auto`);const _=(C=>{do C+=Math.floor(1e6*Math.random());while(document.getElementById(C));return C})(this.constructor.NAME).toString();return d.setAttribute("id",_),this._isAnimated()&&d.classList.add(Da),d}setContent(l){this._newContent=l,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(l){return this._templateFactory?this._templateFactory.changeContent(l):this._templateFactory=new Rp({...this._config,content:l,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Op]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(l){return this.constructor.getOrCreateInstance(l.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Da)}_isShown(){return this.tip&&this.tip.classList.contains(vo)}_createPopper(l){const d=G(this._config.placement,[this,l,this._element]),_=Mp[d.toUpperCase()];return _i(this._element,l,this._getPopperConfig(_))}_getOffset(){const{offset:l}=this._config;return typeof l=="string"?l.split(",").map(d=>Number.parseInt(d,10)):typeof l=="function"?d=>l(d,this._element):l}_resolvePossibleFunction(l){return G(l,[this._element,this._element])}_getPopperConfig(l){const d={placement:l,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:_=>{this._getTipElement().setAttribute("data-popper-placement",_.state.placement)}}]};return{...d,...G(this._config.popperConfig,[void 0,d])}}_setListeners(){const l=this._config.trigger.split(" ");for(const d of l)if(d==="click")N.on(this._element,this.constructor.eventName("click"),this._config.selector,_=>{const C=this._initializeOnDelegatedTarget(_);C._activeTrigger[Ma]=!(C._isShown()&&C._activeTrigger[Ma]),C.toggle()});else if(d!=="manual"){const _=d===br?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),C=d===br?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");N.on(this._element,_,this._config.selector,P=>{const O=this._initializeOnDelegatedTarget(P);O._activeTrigger[P.type==="focusin"?Oa:br]=!0,O._enter()}),N.on(this._element,C,this._config.selector,P=>{const O=this._initializeOnDelegatedTarget(P);O._activeTrigger[P.type==="focusout"?Oa:br]=O._element.contains(P.relatedTarget),O._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},N.on(this._element.closest(Xc),Yc,this._hideModalHandler)}_fixTitle(){const l=this._element.getAttribute("title");l&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",l),this._element.setAttribute("data-bs-original-title",l),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(l,d){clearTimeout(this._timeout),this._timeout=setTimeout(l,d)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(l){const d=Qe.getDataAttributes(this._element);for(const _ of Object.keys(d))Dp.has(_)&&delete d[_];return l={...d,...typeof l=="object"&&l?l:{}},l=this._mergeConfigObj(l),l=this._configAfterMerge(l),this._typeCheckConfig(l),l}_configAfterMerge(l){return l.container=l.container===!1?document.body:f(l.container),typeof l.delay=="number"&&(l.delay={show:l.delay,hide:l.delay}),typeof l.title=="number"&&(l.title=l.title.toString()),typeof l.content=="number"&&(l.content=l.content.toString()),l}_getDelegateConfig(){const l={};for(const[d,_]of Object.entries(this._config))this.constructor.Default[d]!==_&&(l[d]=_);return l.selector=!1,l.trigger="manual",l}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(l){return this.each(function(){const d=Xi.getOrCreateInstance(this,l);if(typeof l=="string"){if(d[l]===void 0)throw new TypeError(`No method named "${l}"`);d[l]()}})}}j(Xi);const Np=".popover-header",Fp=".popover-body",zp={...Xi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Bp={...Xi.DefaultType,content:"(null|string|element|function)"};class bo extends Xi{static get Default(){return zp}static get DefaultType(){return Bp}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Np]:this._getTitle(),[Fp]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(l){return this.each(function(){const d=bo.getOrCreateInstance(this,l);if(typeof l=="string"){if(d[l]===void 0)throw new TypeError(`No method named "${l}"`);d[l]()}})}}j(bo);const Va=".bs.scrollspy",$p=`activate${Va}`,Jc=`click${Va}`,Up=`load${Va}.data-api`,Vs="active",La="[href]",Zc=".nav-link",jp=`${Zc}, .nav-item > ${Zc}, .list-group-item`,qp={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Hp={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class wr extends wt{constructor(l,d){super(l,d),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return qp}static get DefaultType(){return Hp}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const l of this._observableSections.values())this._observer.observe(l)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(l){return l.target=f(l.target)||document.body,l.rootMargin=l.offset?`${l.offset}px 0px -30%`:l.rootMargin,typeof l.threshold=="string"&&(l.threshold=l.threshold.split(",").map(d=>Number.parseFloat(d))),l}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(N.off(this._config.target,Jc),N.on(this._config.target,Jc,La,l=>{const d=this._observableSections.get(l.target.hash);if(d){l.preventDefault();const _=this._rootElement||window,C=d.offsetTop-this._element.offsetTop;if(_.scrollTo)return void _.scrollTo({top:C,behavior:"smooth"});_.scrollTop=C}}))}_getNewObserver(){const l={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(d=>this._observerCallback(d),l)}_observerCallback(l){const d=O=>this._targetLinks.get(`#${O.target.id}`),_=O=>{this._previousScrollData.visibleEntryTop=O.target.offsetTop,this._process(d(O))},C=(this._rootElement||document.documentElement).scrollTop,P=C>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=C;for(const O of l){if(!O.isIntersecting){this._activeTarget=null,this._clearActiveClass(d(O));continue}const z=O.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(P&&z){if(_(O),!C)return}else P||z||_(O)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const l=Z.find(La,this._config.target);for(const d of l){if(!d.hash||y(d))continue;const _=Z.findOne(decodeURI(d.hash),this._element);g(_)&&(this._targetLinks.set(decodeURI(d.hash),d),this._observableSections.set(d.hash,_))}}_process(l){this._activeTarget!==l&&(this._clearActiveClass(this._config.target),this._activeTarget=l,l.classList.add(Vs),this._activateParents(l),N.trigger(this._element,$p,{relatedTarget:l}))}_activateParents(l){if(l.classList.contains("dropdown-item"))Z.findOne(".dropdown-toggle",l.closest(".dropdown")).classList.add(Vs);else for(const d of Z.parents(l,".nav, .list-group"))for(const _ of Z.prev(d,jp))_.classList.add(Vs)}_clearActiveClass(l){l.classList.remove(Vs);const d=Z.find(`${La}.${Vs}`,l);for(const _ of d)_.classList.remove(Vs)}static jQueryInterface(l){return this.each(function(){const d=wr.getOrCreateInstance(this,l);if(typeof l=="string"){if(d[l]===void 0||l.startsWith("_")||l==="constructor")throw new TypeError(`No method named "${l}"`);d[l]()}})}}N.on(window,Up,()=>{for(const m of Z.find('[data-bs-spy="scroll"]'))wr.getOrCreateInstance(m)}),j(wr);const Yi=".bs.tab",Gp=`hide${Yi}`,Wp=`hidden${Yi}`,Kp=`show${Yi}`,Qp=`shown${Yi}`,Xp=`click${Yi}`,Yp=`keydown${Yi}`,Jp=`load${Yi}`,Zp="ArrowLeft",eu="ArrowRight",em="ArrowUp",tu="ArrowDown",Na="Home",nu="End",Ji="active",iu="fade",Fa="show",su=".dropdown-toggle",za=`:not(${su})`,ru='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ba=`.nav-link${za}, .list-group-item${za}, [role="tab"]${za}, ${ru}`,tm=`.${Ji}[data-bs-toggle="tab"], .${Ji}[data-bs-toggle="pill"], .${Ji}[data-bs-toggle="list"]`;class Zi extends wt{constructor(l){super(l),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),N.on(this._element,Yp,d=>this._keydown(d)))}static get NAME(){return"tab"}show(){const l=this._element;if(this._elemIsActive(l))return;const d=this._getActiveElem(),_=d?N.trigger(d,Gp,{relatedTarget:l}):null;N.trigger(l,Kp,{relatedTarget:d}).defaultPrevented||_&&_.defaultPrevented||(this._deactivate(d,l),this._activate(l,d))}_activate(l,d){l&&(l.classList.add(Ji),this._activate(Z.getElementFromSelector(l)),this._queueCallback(()=>{l.getAttribute("role")==="tab"?(l.removeAttribute("tabindex"),l.setAttribute("aria-selected",!0),this._toggleDropDown(l,!0),N.trigger(l,Qp,{relatedTarget:d})):l.classList.add(Fa)},l,l.classList.contains(iu)))}_deactivate(l,d){l&&(l.classList.remove(Ji),l.blur(),this._deactivate(Z.getElementFromSelector(l)),this._queueCallback(()=>{l.getAttribute("role")==="tab"?(l.setAttribute("aria-selected",!1),l.setAttribute("tabindex","-1"),this._toggleDropDown(l,!1),N.trigger(l,Wp,{relatedTarget:d})):l.classList.remove(Fa)},l,l.classList.contains(iu)))}_keydown(l){if(![Zp,eu,em,tu,Na,nu].includes(l.key))return;l.stopPropagation(),l.preventDefault();const d=this._getChildren().filter(C=>!y(C));let _;if([Na,nu].includes(l.key))_=d[l.key===Na?0:d.length-1];else{const C=[eu,tu].includes(l.key);_=ve(d,l.target,C,!0)}_&&(_.focus({preventScroll:!0}),Zi.getOrCreateInstance(_).show())}_getChildren(){return Z.find(Ba,this._parent)}_getActiveElem(){return this._getChildren().find(l=>this._elemIsActive(l))||null}_setInitialAttributes(l,d){this._setAttributeIfNotExists(l,"role","tablist");for(const _ of d)this._setInitialAttributesOnChild(_)}_setInitialAttributesOnChild(l){l=this._getInnerElement(l);const d=this._elemIsActive(l),_=this._getOuterElement(l);l.setAttribute("aria-selected",d),_!==l&&this._setAttributeIfNotExists(_,"role","presentation"),d||l.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(l,"role","tab"),this._setInitialAttributesOnTargetPanel(l)}_setInitialAttributesOnTargetPanel(l){const d=Z.getElementFromSelector(l);d&&(this._setAttributeIfNotExists(d,"role","tabpanel"),l.id&&this._setAttributeIfNotExists(d,"aria-labelledby",`${l.id}`))}_toggleDropDown(l,d){const _=this._getOuterElement(l);if(!_.classList.contains("dropdown"))return;const C=(P,O)=>{const z=Z.findOne(P,_);z&&z.classList.toggle(O,d)};C(su,Ji),C(".dropdown-menu",Fa),_.setAttribute("aria-expanded",d)}_setAttributeIfNotExists(l,d,_){l.hasAttribute(d)||l.setAttribute(d,_)}_elemIsActive(l){return l.classList.contains(Ji)}_getInnerElement(l){return l.matches(Ba)?l:Z.findOne(Ba,l)}_getOuterElement(l){return l.closest(".nav-item, .list-group-item")||l}static jQueryInterface(l){return this.each(function(){const d=Zi.getOrCreateInstance(this);if(typeof l=="string"){if(d[l]===void 0||l.startsWith("_")||l==="constructor")throw new TypeError(`No method named "${l}"`);d[l]()}})}}N.on(document,Xp,ru,function(m){["A","AREA"].includes(this.tagName)&&m.preventDefault(),y(this)||Zi.getOrCreateInstance(this).show()}),N.on(window,Jp,()=>{for(const m of Z.find(tm))Zi.getOrCreateInstance(m)}),j(Zi);const vi=".bs.toast",nm=`mouseover${vi}`,im=`mouseout${vi}`,sm=`focusin${vi}`,rm=`focusout${vi}`,om=`hide${vi}`,am=`hidden${vi}`,lm=`show${vi}`,cm=`shown${vi}`,ou="hide",wo="show",Eo="showing",um={animation:"boolean",autohide:"boolean",delay:"number"},hm={animation:!0,autohide:!0,delay:5e3};class Er extends wt{constructor(l,d){super(l,d),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return hm}static get DefaultType(){return um}static get NAME(){return"toast"}show(){N.trigger(this._element,lm).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(ou),M(this._element),this._element.classList.add(wo,Eo),this._queueCallback(()=>{this._element.classList.remove(Eo),N.trigger(this._element,cm),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(N.trigger(this._element,om).defaultPrevented||(this._element.classList.add(Eo),this._queueCallback(()=>{this._element.classList.add(ou),this._element.classList.remove(Eo,wo),N.trigger(this._element,am)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(wo),super.dispose()}isShown(){return this._element.classList.contains(wo)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(l,d){switch(l.type){case"mouseover":case"mouseout":this._hasMouseInteraction=d;break;case"focusin":case"focusout":this._hasKeyboardInteraction=d}if(d)return void this._clearTimeout();const _=l.relatedTarget;this._element===_||this._element.contains(_)||this._maybeScheduleHide()}_setListeners(){N.on(this._element,nm,l=>this._onInteraction(l,!0)),N.on(this._element,im,l=>this._onInteraction(l,!1)),N.on(this._element,sm,l=>this._onInteraction(l,!0)),N.on(this._element,rm,l=>this._onInteraction(l,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(l){return this.each(function(){const d=Er.getOrCreateInstance(this,l);if(typeof l=="string"){if(d[l]===void 0)throw new TypeError(`No method named "${l}"`);d[l](this)}})}}return ys(Er),j(Er),{Alert:ri,Button:Bn,Carousel:ci,Collapse:Hn,Dropdown:ln,Modal:Qi,Offcanvas:ei,Popover:bo,ScrollSpy:wr,Tab:Zi,Toast:Er,Tooltip:Xi}})})(Ro)),Ro.exports}Em();const Sr="generated",Tm="pointerdown",Im="pointerup",bl="pointerleave",Am="pointerout",as="pointermove",Cm="touchstart",Eu="touchend",Sm="touchmove",xm="touchcancel",Pm="resize",km="visibilitychange",Zt="tsParticles - Error";class Mt{constructor(e,t,i){if(this._updateFromAngle=(s,r)=>{this.x=Math.cos(s)*r,this.y=Math.sin(s)*r},!hn(e)&&e){this.x=e.x,this.y=e.y;const s=e;this.z=s.z?s.z:0}else if(e!==void 0&&t!==void 0)this.x=e,this.y=t,this.z=i??0;else throw new Error(`${Zt} Vector3d not initialized correctly`)}static get origin(){return Mt.create(0,0,0)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return Mt.create(e.x,e.y,e.z)}static create(e,t,i){return new Mt(e,t,i)}add(e){return Mt.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return Mt.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return Mt.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**2+this.y**2}mult(e){return Mt.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;e!=0&&this.multTo(1/e)}rotate(e){return Mt.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),0)}setTo(e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:0}sub(e){return Mt.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}}class nt extends Mt{constructor(e,t){super(e,t,0)}static get origin(){return nt.create(0,0)}static clone(e){return nt.create(e.x,e.y)}static create(e,t){return new nt(e,t)}}let Rm=Math.random;const wl=new Map;function Ga(n,e){wl.get(n)||wl.set(n,e)}function Gh(n){return wl.get(n)||(e=>e)}function Oe(){return dn(Rm(),0,1-1e-16)}function dn(n,e,t){return Math.min(Math.max(n,e),t)}function Wa(n,e,t,i){return Math.floor((n*t+e*i)/(t+i))}function Rt(n){const e=wi(n);let t=Ul(n);return e===t&&(t=0),Oe()*(e-t)+t}function ee(n){return hn(n)?n:Rt(n)}function Ul(n){return hn(n)?n:n.min}function wi(n){return hn(n)?n:n.max}function fe(n,e){if(n===e||e===void 0&&hn(n))return n;const t=Ul(n),i=wi(n);return e!==void 0?{min:Math.min(t,e),max:Math.max(i,e)}:fe(t,i)}function ls(n){const e=n.random,{enable:t,minimumValue:i}=Ei(e)?{enable:e,minimumValue:0}:e;return ee(t?fe(n.value,i):n.value)}function At(n,e){const t=n.x-e.x,i=n.y-e.y;return{dx:t,dy:i,distance:Math.sqrt(t**2+i**2)}}function zt(n,e){return At(n,e).distance}function Dm(n,e,t){if(hn(n))return n*Math.PI/180;switch(n){case"top":return-Math.PI/2;case"top-right":return-Math.PI/4;case"right":return 0;case"bottom-right":return Math.PI/4;case"bottom":return Math.PI/2;case"bottom-left":return 3*Math.PI/4;case"left":return Math.PI;case"top-left":return-3*Math.PI/4;case"inside":return Math.atan2(t.y-e.y,t.x-e.x);case"outside":return Math.atan2(e.y-t.y,e.x-t.x);default:return Oe()*Math.PI*2}}function Om(n){const e=nt.origin;return e.length=1,e.angle=n,e}function Tu(n,e,t,i){return nt.create(n.x*(t-i)/(t+i)+e.x*2*i/(t+i),n.y)}function Mm(n){return{x:n.position?.x??Oe()*n.size.width,y:n.position?.y??Oe()*n.size.height}}function Wh(n){return n?n.endsWith("%")?parseFloat(n)/100:parseFloat(n):1}const Vm={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function cs(){return Vm}function Iu(n){const e={bounced:!1},{pSide:t,pOtherSide:i,rectSide:s,rectOtherSide:r,velocity:a,factor:c}=n;return i.min<r.min||i.min>r.max||i.max<r.min||i.max>r.max||(t.max>=s.min&&t.max<=(s.max+s.min)/2&&a>0||t.min<=s.max&&t.min>(s.max+s.min)/2&&a<0)&&(e.velocity=a*-c,e.bounced=!0),e}function Lm(n,e){const t=it(e,i=>n.matches(i));return Bt(t)?t.some(i=>i):t}function Us(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function Nm(){return!Us()&&typeof matchMedia<"u"}function Kh(n){if(Nm())return matchMedia(n)}function Fm(n){if(!(Us()||typeof MutationObserver>"u"))return new MutationObserver(n)}function Ue(n,e){return n===e||Bt(e)&&e.indexOf(n)>-1}async function zm(n,e){try{await document.fonts.load(`${e??"400"} 36px '${n??"Verdana"}'`)}catch{}}function Bm(n){return Math.floor(Oe()*n.length)}function ia(n,e,t=!0){return n[e!==void 0&&t?e%n.length:Bm(n)]}function jl(n,e,t,i,s){return $m(Kr(n,i??0),e,t,s)}function $m(n,e,t,i){let s=!0;return(!i||i==="bottom")&&(s=n.top<e.height+t.x),s&&(!i||i==="left")&&(s=n.right>t.x),s&&(!i||i==="right")&&(s=n.left<e.width+t.y),s&&(!i||i==="top")&&(s=n.bottom>t.y),s}function Kr(n,e){return{bottom:n.y+e,left:n.x-e,right:n.x+e,top:n.y-e}}function vt(n,...e){for(const t of e){if(t==null)continue;if(!Bs(t)){n=t;continue}const i=Array.isArray(t);i&&(Bs(n)||!n||!Array.isArray(n))?n=[]:!i&&(Bs(n)||!n||Array.isArray(n))&&(n={});for(const s in t){if(s==="__proto__")continue;const r=t,a=r[s],c=n;c[s]=Bs(a)&&Array.isArray(a)?a.map(h=>vt(c[s],h)):vt(c[s],a)}}return n}function ql(n,e){return!!Yh(e,t=>t.enable&&Ue(n,t.mode))}function Hl(n,e,t){it(e,i=>{const s=i.mode;i.enable&&Ue(n,s)&&Um(i,t)})}function Um(n,e){const t=n.selectors;it(t,i=>{e(i,n)})}function Qh(n,e){if(!(!e||!n))return Yh(n,t=>Lm(e,t.selectors))}function El(n){return{position:n.getPosition(),radius:n.getRadius(),mass:n.getMass(),velocity:n.velocity,factor:nt.create(ls(n.options.bounce.horizontal),ls(n.options.bounce.vertical))}}function Xh(n,e){const{x:t,y:i}=n.velocity.sub(e.velocity),[s,r]=[n.position,e.position],{dx:a,dy:c}=At(r,s);if(t*a+i*c<0)return;const h=-Math.atan2(c,a),f=n.mass,g=e.mass,y=n.velocity.rotate(h),b=e.velocity.rotate(h),x=Tu(y,b,f,g),M=Tu(b,y,f,g),V=x.rotate(-h),$=M.rotate(-h);n.velocity.x=V.x*n.factor.x,n.velocity.y=V.y*n.factor.y,e.velocity.x=$.x*e.factor.x,e.velocity.y=$.y*e.factor.y}function jm(n,e){const t=n.getPosition(),i=n.getRadius(),s=Kr(t,i),r=Iu({pSide:{min:s.left,max:s.right},pOtherSide:{min:s.top,max:s.bottom},rectSide:{min:e.left,max:e.right},rectOtherSide:{min:e.top,max:e.bottom},velocity:n.velocity.x,factor:ls(n.options.bounce.horizontal)});r.bounced&&(r.velocity!==void 0&&(n.velocity.x=r.velocity),r.position!==void 0&&(n.position.x=r.position));const a=Iu({pSide:{min:s.top,max:s.bottom},pOtherSide:{min:s.left,max:s.right},rectSide:{min:e.top,max:e.bottom},rectOtherSide:{min:e.left,max:e.right},velocity:n.velocity.y,factor:ls(n.options.bounce.vertical)});a.bounced&&(a.velocity!==void 0&&(n.velocity.y=a.velocity),a.position!==void 0&&(n.position.y=a.position))}function it(n,e){return Bt(n)?n.map((t,i)=>e(t,i)):e(n,0)}function ti(n,e,t){return Bt(n)?ia(n,e,t):n}function Yh(n,e){return Bt(n)?n.find((t,i)=>e(t,i)):e(n,0)?n:void 0}function Jh(n,e){const t=n.value,i=n.animation,s={delayTime:ee(i.delay)*1e3,enable:i.enable,value:ee(n.value)*e,max:wi(t)*e,min:Ul(t)*e,loops:0,maxLoops:ee(i.count),time:0};if(i.enable){switch(s.decay=1-ee(i.decay),i.mode){case"increase":s.status="increasing";break;case"decrease":s.status="decreasing";break;case"random":s.status=Oe()>=.5?"increasing":"decreasing";break}const r=i.mode==="auto";switch(i.startValue){case"min":s.value=s.min,r&&(s.status="increasing");break;case"max":s.value=s.max,r&&(s.status="decreasing");break;case"random":default:s.value=Rt(s),r&&(s.status=Oe()>=.5?"increasing":"decreasing");break}}return s.initialValue=s.value,s}function qm(n,e){if(!(n.mode==="percent")){const{mode:s,...r}=n;return r}return"x"in n?{x:n.x/100*e.width,y:n.y/100*e.height}:{width:n.width/100*e.width,height:n.height/100*e.height}}function Zh(n,e){return qm(n,e)}function Ei(n){return typeof n=="boolean"}function un(n){return typeof n=="string"}function hn(n){return typeof n=="number"}function ef(n){return typeof n=="function"}function Bs(n){return typeof n=="object"&&n!==null}function Bt(n){return Array.isArray(n)}const Fo="random",Do="mid",sa=new Map;function Au(n){sa.set(n.key,n)}function Ka(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Hm(n){for(const[,r]of sa)if(n.startsWith(r.stringPrefix))return r.parseString(n);const e=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,t=n.replace(e,(r,a,c,h,f)=>a+a+c+c+h+h+(f!==void 0?f+f:"")),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,s=i.exec(t);return s?{a:s[4]!==void 0?parseInt(s[4],16)/255:1,b:parseInt(s[3],16),g:parseInt(s[2],16),r:parseInt(s[1],16)}:void 0}function fn(n,e,t=!0){if(!n)return;const i=un(n)?{value:n}:n;if(un(i.value))return tf(i.value,e,t);if(Bt(i.value))return fn({value:ia(i.value,e,t)});for(const[,s]of sa){const r=s.handleRangeColor(i);if(r)return r}}function tf(n,e,t=!0){if(!n)return;const i=un(n)?{value:n}:n;if(un(i.value))return i.value===Fo?sf():Gm(i.value);if(Bt(i.value))return tf({value:ia(i.value,e,t)});for(const[,s]of sa){const r=s.handleColor(i);if(r)return r}}function Lr(n,e,t=!0){const i=fn(n,e,t);return i?nf(i):void 0}function nf(n){const e=n.r/255,t=n.g/255,i=n.b/255,s=Math.max(e,t,i),r=Math.min(e,t,i),a={h:0,l:(s+r)/2,s:0};return s!==r&&(a.s=a.l<.5?(s-r)/(s+r):(s-r)/(2-s-r),a.h=e===s?(t-i)/(s-r):a.h=t===s?2+(i-e)/(s-r):4+(e-t)/(s-r)),a.l*=100,a.s*=100,a.h*=60,a.h<0&&(a.h+=360),a.h>=360&&(a.h-=360),a}function Gm(n){return Hm(n)}function js(n){const e={b:0,g:0,r:0},t={h:n.h/360,l:n.l/100,s:n.s/100};if(!t.s)e.r=e.g=e.b=t.l;else{const i=t.l<.5?t.l*(1+t.s):t.l+t.s-t.l*t.s,s=2*t.l-i;e.r=Ka(s,i,t.h+1/3),e.g=Ka(s,i,t.h),e.b=Ka(s,i,t.h-1/3)}return e.r=Math.floor(e.r*255),e.g=Math.floor(e.g*255),e.b=Math.floor(e.b*255),e}function Wm(n){const e=js(n);return{a:n.a,b:e.b,g:e.g,r:e.r}}function sf(n){return{b:Math.floor(Rt(fe(0,256))),g:Math.floor(Rt(fe(0,256))),r:Math.floor(Rt(fe(0,256)))}}function ni(n,e){return`rgba(${n.r}, ${n.g}, ${n.b}, ${e??1})`}function Nr(n,e){return`hsla(${n.h}, ${n.s}%, ${n.l}%, ${e??1})`}function Gl(n,e,t,i){let s=n,r=e;return s.r===void 0&&(s=js(n)),r.r===void 0&&(r=js(e)),{b:Wa(s.b,r.b,t,i),g:Wa(s.g,r.g,t,i),r:Wa(s.r,r.r,t,i)}}function Tl(n,e,t){if(t===Fo)return sf();if(t===Do){const i=n.getFillColor()??n.getStrokeColor(),s=e?.getFillColor()??e?.getStrokeColor();if(i&&s&&e)return Gl(i,s,n.getRadius(),e.getRadius());{const r=i??s;if(r)return js(r)}}else return t}function rf(n,e,t){const i=un(n)?n:n.value;return i===Fo?t?fn({value:i}):e?Fo:Do:i===Do?Do:fn({value:i})}function Cu(n){return n!==void 0?{h:n.h.value,s:n.s.value,l:n.l.value}:void 0}function of(n,e,t){const i={h:{enable:!1,value:n.h},s:{enable:!1,value:n.s},l:{enable:!1,value:n.l}};return e&&(Qa(i.h,e.h,t),Qa(i.s,e.s,t),Qa(i.l,e.l,t)),i}function Qa(n,e,t){n.enable=e.enable,n.enable?(n.velocity=ee(e.speed)/100*t,n.decay=1-ee(e.decay),n.status="increasing",n.loops=0,n.maxLoops=ee(e.count),n.time=0,n.delayTime=ee(e.delay)*1e3,e.sync||(n.velocity*=Oe(),n.value*=Oe()),n.initialValue=n.value):n.velocity=0}function xr(n,e,t){n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.closePath()}function Km(n,e,t,i){n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.lineTo(i.x,i.y),n.closePath()}function Qm(n,e,t){n.fillStyle=t??"rgba(0,0,0,0)",n.fillRect(0,0,e.width,e.height)}function Xm(n,e,t,i){t&&(n.globalAlpha=i,n.drawImage(t,0,0,e.width,e.height),n.globalAlpha=1)}function Xa(n,e){n.clearRect(0,0,e.width,e.height)}function Ym(n){const{container:e,context:t,particle:i,delta:s,colorStyles:r,backgroundMask:a,composite:c,radius:h,opacity:f,shadow:g,transform:y}=n,b=i.getPosition(),x=i.rotation+(i.pathRotation?i.velocity.angle:0),M={sin:Math.sin(x),cos:Math.cos(x)},V={a:M.cos*(y.a??1),b:M.sin*(y.b??1),c:-M.sin*(y.c??1),d:M.cos*(y.d??1)};t.setTransform(V.a,V.b,V.c,V.d,b.x,b.y),t.beginPath(),a&&(t.globalCompositeOperation=c);const $=i.shadowColor;g.enable&&$&&(t.shadowBlur=g.blur,t.shadowColor=ni($),t.shadowOffsetX=g.offset.x,t.shadowOffsetY=g.offset.y),r.fill&&(t.fillStyle=r.fill);const L=i.strokeWidth??0;t.lineWidth=L,r.stroke&&(t.strokeStyle=r.stroke),Jm(e,t,i,h,f,s),L>0&&t.stroke(),i.close&&t.closePath(),i.fill&&t.fill(),Zm(e,t,i,h,f,s),t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0)}function Jm(n,e,t,i,s,r){if(!t.shape)return;const a=n.drawers.get(t.shape);a&&a.draw(e,t,i,s,r,n.retina.pixelRatio)}function Zm(n,e,t,i,s,r){if(!t.shape)return;const a=n.drawers.get(t.shape);!a||!a.afterEffect||a.afterEffect(e,t,i,s,r,n.retina.pixelRatio)}function eg(n,e,t){e.draw&&e.draw(n,t)}function tg(n,e,t,i){e.drawParticle&&e.drawParticle(n,t,i)}function ng(n,e,t){return{h:n.h,s:n.s,l:n.l+(e==="darken"?-1:1)*t}}function ig(n,e,t){const i=e[t];i!==void 0&&(n[t]=(n[t]??1)*i)}class sg{constructor(e){this.container=e,this._applyPostDrawUpdaters=t=>{for(const i of this._postDrawUpdaters)i.afterDraw&&i.afterDraw(t)},this._applyPreDrawUpdaters=(t,i,s,r,a,c)=>{for(const h of this._preDrawUpdaters){if(h.getColorStyles){const{fill:f,stroke:g}=h.getColorStyles(i,t,s,r);f&&(a.fill=f),g&&(a.stroke=g)}if(h.getTransformValues){const f=h.getTransformValues(i);for(const g in f)ig(c,f,g)}h.beforeDraw&&h.beforeDraw(i)}},this._applyResizePlugins=()=>{for(const t of this._resizePlugins)t.resize&&t.resize()},this._getPluginParticleColors=t=>{let i,s;for(const r of this._colorPlugins)if(!i&&r.particleFillColor&&(i=Lr(r.particleFillColor(t))),!s&&r.particleStrokeColor&&(s=Lr(r.particleStrokeColor(t))),i&&s)break;return[i,s]},this._initCover=()=>{const t=this.container.actualOptions,i=t.backgroundMask.cover,s=i.color,r=fn(s);if(r){const a={...r,a:i.opacity};this._coverColorStyle=ni(a,a.a)}},this._initStyle=()=>{const t=this.element,i=this.container.actualOptions;if(t){this._fullScreen?(this._originalStyle=vt({},t.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const s in i.style){if(!s||!i.style)continue;const r=i.style[s];r&&t.style.setProperty(s,r,"important")}}},this._initTrail=async()=>{const t=this.container.actualOptions,i=t.particles.move.trail,s=i.fill;if(i.enable)if(s.color){const r=fn(s.color);if(!r)return;const a=t.particles.move.trail;this._trailFill={color:{...r},opacity:1/a.length}}else await new Promise((r,a)=>{if(!s.image)return;const c=document.createElement("img");c.addEventListener("load",()=>{this._trailFill={image:c,opacity:1/i.length},r()}),c.addEventListener("error",h=>{a(h.error)}),c.src=s.image})},this._paintBase=t=>{this.draw(i=>Qm(i,this.size,t))},this._paintImage=(t,i)=>{this.draw(s=>Xm(s,this.size,t,i))},this._repairStyle=()=>{const t=this.element;t&&(this._safeMutationObserver(i=>i.disconnect()),this._initStyle(),this.initBackground(),this._safeMutationObserver(i=>i.observe(t,{attributes:!0})))},this._resetOriginalStyle=()=>{const t=this.element,i=this._originalStyle;if(!(t&&i))return;const s=t.style;s.position=i.position,s.zIndex=i.zIndex,s.top=i.top,s.left=i.left,s.width=i.width,s.height=i.height},this._safeMutationObserver=t=>{this._mutationObserver&&t(this._mutationObserver)},this._setFullScreenStyle=()=>{const t=this.element;if(!t)return;const i="important",s=t.style;s.setProperty("position","fixed",i),s.setProperty("z-index",this.container.actualOptions.fullScreen.zIndex.toString(10),i),s.setProperty("top","0",i),s.setProperty("left","0",i),s.setProperty("width","100%",i),s.setProperty("height","100%",i)},this.size={height:0,width:0},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const e=this.container.actualOptions,t=e.particles.move.trail,i=this._trailFill;e.backgroundMask.enable?this.paint():t.enable&&t.length>0&&i?i.color?this._paintBase(ni(i.color,i.opacity)):i.image&&this._paintImage(i.image,i.opacity):this.draw(s=>{Xa(s,this.size)})}destroy(){if(this.stop(),this._generated){const e=this.element;e&&e.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(e){const t=this._context;if(t)return e(t)}drawParticle(e,t){if(e.spawning||e.destroyed)return;const i=e.getRadius();if(i<=0)return;const s=e.getFillColor(),r=e.getStrokeColor()??s;let[a,c]=this._getPluginParticleColors(e);a||(a=s),c||(c=r),!(!a&&!c)&&this.draw(h=>{const f=this.container,g=f.actualOptions,y=e.options.zIndex,b=(1-e.zIndexFactor)**y.opacityRate,x=e.bubble.opacity??e.opacity?.value??1,M=e.strokeOpacity??x,V=x*b,$=M*b,L={},j={fill:a?Nr(a,V):void 0};j.stroke=c?Nr(c,$):j.fill,this._applyPreDrawUpdaters(h,e,i,V,j,L),Ym({container:f,context:h,particle:e,delta:t,colorStyles:j,backgroundMask:g.backgroundMask.enable,composite:g.backgroundMask.composite,radius:i*(1-e.zIndexFactor)**y.sizeRate,opacity:V,shadow:e.options.shadow,transform:L}),this._applyPostDrawUpdaters(e)})}drawParticlePlugin(e,t,i){this.draw(s=>tg(s,e,t,i))}drawPlugin(e,t){this.draw(i=>eg(i,e,t))}async init(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=Fm(e=>{for(const t of e)t.type==="attributes"&&t.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),this._initCover();try{await this._initTrail()}catch(e){cs().error(e)}this.initBackground(),this._safeMutationObserver(e=>{this.element&&e.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const e=this.container.actualOptions,t=e.background,i=this.element;if(!i)return;const s=i.style;if(s){if(t.color){const r=fn(t.color);s.backgroundColor=r?ni(r,t.opacity):""}else s.backgroundColor="";s.backgroundImage=t.image||"",s.backgroundPosition=t.position||"",s.backgroundRepeat=t.repeat||"",s.backgroundSize=t.size||""}}initPlugins(){this._resizePlugins=[];for(const[,e]of this.container.plugins)e.resize&&this._resizePlugins.push(e),(e.particleFillColor||e.particleStrokeColor)&&this._colorPlugins.push(e)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const e of this.container.particles.updaters)e.afterDraw&&this._postDrawUpdaters.push(e),(e.getColorStyles||e.getTransformValues||e.beforeDraw)&&this._preDrawUpdaters.push(e)}loadCanvas(e){this._generated&&this.element&&this.element.remove(),this._generated=e.dataset&&Sr in e.dataset?e.dataset[Sr]==="true":this._generated,this.element=e,this.element.ariaHidden="true",this._originalStyle=vt({},this.element.style),this.size.height=e.offsetHeight,this.size.width=e.offsetWidth,this._context=this.element.getContext("2d"),this._safeMutationObserver(t=>{this.element&&t.observe(this.element,{attributes:!0})}),this.container.retina.init(),this.initBackground()}paint(){const e=this.container.actualOptions;this.draw(t=>{e.backgroundMask.enable&&e.backgroundMask.cover?(Xa(t,this.size),this._paintBase(this._coverColorStyle)):this._paintBase()})}resize(){if(!this.element)return!1;const e=this.container,t=e.retina.pixelRatio,i=e.canvas.size,s={width:this.element.offsetWidth*t,height:this.element.offsetHeight*t};if(s.height===i.height&&s.width===i.width&&s.height===this.element.height&&s.width===this.element.width)return!1;const r={...i};return this.element.width=i.width=this.element.offsetWidth*t,this.element.height=i.height=this.element.offsetHeight*t,this.container.started&&(this.resizeFactor={width:i.width/r.width,height:i.height/r.height}),!0}stop(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=void 0,this.draw(e=>Xa(e,this.size))}async windowResize(){if(!this.element||!this.resize())return;const e=this.container,t=e.updateActualOptions();e.particles.setDensity(),this._applyResizePlugins(),t&&await e.refresh()}}function Xt(n,e,t,i,s){if(i){let r={passive:!0};Ei(s)?r.capture=s:s!==void 0&&(r=s),n.addEventListener(e,t,r)}else{const r=s;n.removeEventListener(e,t,r)}}class rg{constructor(e){this.container=e,this._doMouseTouchClick=t=>{const i=this.container,s=i.actualOptions;if(this._canPush){const r=i.interactivity.mouse,a=r.position;if(!a)return;r.clickPosition={...a},r.clickTime=new Date().getTime();const c=s.interactivity.events.onClick;it(c.mode,h=>this.container.handleClickMode(h))}t.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),500)},this._handleThemeChange=t=>{const i=t,s=this.container,r=s.options,a=r.defaultThemes,c=i.matches?a.dark:a.light,h=r.themes.find(f=>f.name===c);h&&h.default.auto&&s.loadTheme(c)},this._handleVisibilityChange=()=>{const t=this.container,i=t.actualOptions;this._mouseTouchFinish(),i.pauseOnBlur&&(document&&document.hidden?(t.pageHidden=!0,t.pause()):(t.pageHidden=!1,t.getAnimationStatus()?t.play(!0):t.draw(!0)))},this._handleWindowResize=async()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout),this._resizeTimeout=setTimeout(async()=>{const t=this.container.canvas;t&&await t.windowResize()},this.container.actualOptions.interactivity.events.resize.delay*1e3)},this._manageInteractivityListeners=(t,i)=>{const s=this._handlers,r=this.container,a=r.actualOptions,c=r.interactivity.element;if(!c)return;const h=c,f=r.canvas.element;f&&(f.style.pointerEvents=h===f?"initial":"none"),(a.interactivity.events.onHover.enable||a.interactivity.events.onClick.enable)&&(Xt(c,as,s.mouseMove,i),Xt(c,Cm,s.touchStart,i),Xt(c,Sm,s.touchMove,i),a.interactivity.events.onClick.enable?(Xt(c,Eu,s.touchEndClick,i),Xt(c,Im,s.mouseUp,i),Xt(c,Tm,s.mouseDown,i)):Xt(c,Eu,s.touchEnd,i),Xt(c,t,s.mouseLeave,i),Xt(c,xm,s.touchCancel,i))},this._manageListeners=t=>{const i=this._handlers,s=this.container,r=s.actualOptions,a=r.interactivity.detectsOn,c=s.canvas.element;let h=bl;a==="window"?(s.interactivity.element=window,h=Am):a==="parent"&&c?s.interactivity.element=c.parentElement??c.parentNode:s.interactivity.element=c,this._manageMediaMatch(t),this._manageResize(t),this._manageInteractivityListeners(h,t),document&&Xt(document,km,i.visibilityChange,t,!1)},this._manageMediaMatch=t=>{const i=this._handlers,s=Kh("(prefers-color-scheme: dark)");if(s){if(s.addEventListener!==void 0){Xt(s,"change",i.themeChange,t);return}s.addListener!==void 0&&(t?s.addListener(i.oldThemeChange):s.removeListener(i.oldThemeChange))}},this._manageResize=t=>{const i=this._handlers,s=this.container;if(!s.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){Xt(window,Pm,i.resize,t);return}const a=s.canvas.element;this._resizeObserver&&!t?(a&&this._resizeObserver.unobserve(a),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&t&&a&&(this._resizeObserver=new ResizeObserver(async c=>{c.find(f=>f.target===a)&&await this._handleWindowResize()}),this._resizeObserver.observe(a))},this._mouseDown=()=>{const{interactivity:t}=this.container;if(!t)return;const{mouse:i}=t;i.clicking=!0,i.downPosition=i.position},this._mouseTouchClick=t=>{const i=this.container,s=i.actualOptions,{mouse:r}=i.interactivity;r.inside=!0;let a=!1;const c=r.position;if(!(!c||!s.interactivity.events.onClick.enable)){for(const[,h]of i.plugins)if(h.clickPositionValid&&(a=h.clickPositionValid(c),a))break;a||this._doMouseTouchClick(t),r.clicking=!1}},this._mouseTouchFinish=()=>{const t=this.container.interactivity;if(!t)return;const i=t.mouse;delete i.position,delete i.clickPosition,delete i.downPosition,t.status=bl,i.inside=!1,i.clicking=!1},this._mouseTouchMove=t=>{const i=this.container,s=i.actualOptions,r=i.interactivity,a=i.canvas.element;if(!r||!r.element)return;r.mouse.inside=!0;let c;if(t.type.startsWith("pointer")){this._canPush=!0;const f=t;if(r.element===window){if(a){const g=a.getBoundingClientRect();c={x:f.clientX-g.left,y:f.clientY-g.top}}}else if(s.interactivity.detectsOn==="parent"){const g=f.target,y=f.currentTarget;if(g&&y&&a){const b=g.getBoundingClientRect(),x=y.getBoundingClientRect(),M=a.getBoundingClientRect();c={x:f.offsetX+2*b.left-(x.left+M.left),y:f.offsetY+2*b.top-(x.top+M.top)}}else c={x:f.offsetX??f.clientX,y:f.offsetY??f.clientY}}else f.target===a&&(c={x:f.offsetX??f.clientX,y:f.offsetY??f.clientY})}else if(this._canPush=t.type!=="touchmove",a){const f=t,g=f.touches[f.touches.length-1],y=a.getBoundingClientRect();c={x:g.clientX-(y.left??0),y:g.clientY-(y.top??0)}}const h=i.retina.pixelRatio;c&&(c.x*=h,c.y*=h),r.mouse.position=c,r.status=as},this._touchEnd=t=>{const i=t,s=Array.from(i.changedTouches);for(const r of s)this._touches.delete(r.identifier);this._mouseTouchFinish()},this._touchEndClick=t=>{const i=t,s=Array.from(i.changedTouches);for(const r of s)this._touches.delete(r.identifier);this._mouseTouchClick(t)},this._touchStart=t=>{const i=t,s=Array.from(i.changedTouches);for(const r of s)this._touches.set(r.identifier,performance.now());this._mouseTouchMove(t)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:t=>this._mouseTouchMove(t),mouseUp:t=>this._mouseTouchClick(t),touchStart:t=>this._touchStart(t),touchMove:t=>this._mouseTouchMove(t),touchEnd:t=>this._touchEnd(t),touchCancel:t=>this._touchEnd(t),touchEndClick:t=>this._touchEndClick(t),visibilityChange:()=>this._handleVisibilityChange(),themeChange:t=>this._handleThemeChange(t),oldThemeChange:t=>this._handleThemeChange(t),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}class ct{constructor(){this.value=""}static create(e,t){const i=new ct;return i.load(e),t!==void 0&&(un(t)||Bt(t)?i.load({value:t}):i.load(t)),i}load(e){e?.value!==void 0&&(this.value=e.value)}}class og{constructor(){this.color=new ct,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(e){e&&(e.color!==void 0&&(this.color=ct.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.position!==void 0&&(this.position=e.position),e.repeat!==void 0&&(this.repeat=e.repeat),e.size!==void 0&&(this.size=e.size),e.opacity!==void 0&&(this.opacity=e.opacity))}}class ag{constructor(){this.color=new ct,this.color.value="#fff",this.opacity=1}load(e){e&&(e.color!==void 0&&(this.color=ct.create(this.color,e.color)),e.opacity!==void 0&&(this.opacity=e.opacity))}}class lg{constructor(){this.composite="destination-out",this.cover=new ag,this.enable=!1}load(e){if(e){if(e.composite!==void 0&&(this.composite=e.composite),e.cover!==void 0){const t=e.cover,i=un(e.cover)?{color:e.cover}:e.cover;this.cover.load(t.color!==void 0?t:{color:i})}e.enable!==void 0&&(this.enable=e.enable)}}}class cg{constructor(){this.enable=!0,this.zIndex=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.zIndex!==void 0&&(this.zIndex=e.zIndex))}}class ug{constructor(){this.enable=!1,this.mode=[]}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode))}}class Su{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type="circle"}get el(){return this.elementId}set el(e){this.elementId=e}get elementId(){return this.ids}set elementId(e){this.ids=e}get ids(){return it(this.selectors,e=>e.replace("#",""))}set ids(e){this.selectors=it(e,t=>`#${t}`)}load(e){if(!e)return;const t=e.ids??e.elementId??e.el;t!==void 0&&(this.ids=t),e.selectors!==void 0&&(this.selectors=e.selectors),e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),e.type!==void 0&&(this.type=e.type)}}class hg{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.force!==void 0&&(this.force=e.force),e.smooth!==void 0&&(this.smooth=e.smooth))}}class fg{constructor(){this.enable=!1,this.mode=[],this.parallax=new hg}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),this.parallax.load(e.parallax))}}class dg{constructor(){this.delay=.5,this.enable=!0}load(e){e!==void 0&&(e.delay!==void 0&&(this.delay=e.delay),e.enable!==void 0&&(this.enable=e.enable))}}class pg{constructor(){this.onClick=new ug,this.onDiv=new Su,this.onHover=new fg,this.resize=new dg}get onclick(){return this.onClick}set onclick(e){this.onClick=e}get ondiv(){return this.onDiv}set ondiv(e){this.onDiv=e}get onhover(){return this.onHover}set onhover(e){this.onHover=e}load(e){if(!e)return;this.onClick.load(e.onClick??e.onclick);const t=e.onDiv??e.ondiv;t!==void 0&&(this.onDiv=it(t,i=>{const s=new Su;return s.load(i),s})),this.onHover.load(e.onHover??e.onhover),Ei(e.resize)?this.resize.enable=e.resize:this.resize.load(e.resize)}}class mg{constructor(e,t){this._engine=e,this._container=t}load(e){if(!e||!this._container)return;const t=this._engine.plugins.interactors.get(this._container);if(t)for(const i of t)i.loadModeOptions&&i.loadModeOptions(this,e)}}class af{constructor(e,t){this.detectsOn="window",this.events=new pg,this.modes=new mg(e,t)}get detect_on(){return this.detectsOn}set detect_on(e){this.detectsOn=e}load(e){if(!e)return;const t=e.detectsOn??e.detect_on;t!==void 0&&(this.detectsOn=t),this.events.load(e.events),this.modes.load(e.modes)}}class gg{load(e){e&&(e.position&&(this.position={x:e.position.x??50,y:e.position.y??50,mode:e.position.mode??"percent"}),e.options&&(this.options=vt({},e.options)))}}class yg{constructor(){this.maxWidth=1/0,this.options={},this.mode="canvas"}load(e){e&&(e.maxWidth!==void 0&&(this.maxWidth=e.maxWidth),e.mode!==void 0&&(e.mode==="screen"?this.mode="screen":this.mode="canvas"),e.options!==void 0&&(this.options=vt({},e.options)))}}class _g{constructor(){this.auto=!1,this.mode="any",this.value=!1}load(e){e&&(e.auto!==void 0&&(this.auto=e.auto),e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class vg{constructor(){this.name="",this.default=new _g}load(e){e&&(e.name!==void 0&&(this.name=e.name),this.default.load(e.default),e.options!==void 0&&(this.options=vt({},e.options)))}}class Ya{constructor(){this.count=0,this.enable=!1,this.offset=0,this.speed=1,this.delay=0,this.decay=0,this.sync=!0}load(e){e&&(e.count!==void 0&&(this.count=fe(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(this.offset=fe(e.offset)),e.speed!==void 0&&(this.speed=fe(e.speed)),e.decay!==void 0&&(this.decay=fe(e.decay)),e.delay!==void 0&&(this.delay=fe(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class bg{constructor(){this.h=new Ya,this.s=new Ya,this.l=new Ya}load(e){e&&(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}}class Fr extends ct{constructor(){super(),this.animation=new bg}static create(e,t){const i=new Fr;return i.load(e),t!==void 0&&(un(t)||Bt(t)?i.load({value:t}):i.load(t)),i}load(e){if(super.load(e),!e)return;const t=e.animation;t!==void 0&&(t.enable!==void 0?this.animation.h.load(t):this.animation.load(e.animation))}}class wg{constructor(){this.speed=2}load(e){e&&e.speed!==void 0&&(this.speed=e.speed)}}class Eg{constructor(){this.enable=!0,this.retries=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.retries!==void 0&&(this.retries=e.retries))}}class Tg{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){e&&(e.count!==void 0&&(this.count=fe(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=fe(e.speed)),e.decay!==void 0&&(this.decay=fe(e.decay)),e.delay!==void 0&&(this.delay=fe(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class lf extends Tg{constructor(){super(),this.mode="auto",this.startValue="random"}load(e){super.load(e),e&&(e.minimumValue!==void 0&&(this.minimumValue=e.minimumValue),e.mode!==void 0&&(this.mode=e.mode),e.startValue!==void 0&&(this.startValue=e.startValue))}}class Ig{constructor(){this.enable=!1,this.minimumValue=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.minimumValue!==void 0&&(this.minimumValue=e.minimumValue))}}class Ri{constructor(){this.random=new Ig,this.value=0}load(e){e&&(Ei(e.random)?this.random.enable=e.random:this.random.load(e.random),e.value!==void 0&&(this.value=fe(e.value,this.random.enable?this.random.minimumValue:void 0)))}}class xu extends Ri{constructor(){super(),this.random.minimumValue=.1,this.value=1}}class cf{constructor(){this.horizontal=new xu,this.vertical=new xu}load(e){e&&(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class Ag{constructor(){this.absorb=new wg,this.bounce=new cf,this.enable=!1,this.maxSpeed=50,this.mode="bounce",this.overlap=new Eg}load(e){e&&(this.absorb.load(e.absorb),this.bounce.load(e.bounce),e.enable!==void 0&&(this.enable=e.enable),e.maxSpeed!==void 0&&(this.maxSpeed=fe(e.maxSpeed)),e.mode!==void 0&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class Cg{constructor(){this.offset=0,this.value=90}load(e){e&&(e.offset!==void 0&&(this.offset=fe(e.offset)),e.value!==void 0&&(this.value=fe(e.value)))}}class Sg{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}get rotateX(){return this.rotate.x}set rotateX(e){this.rotate.x=e}get rotateY(){return this.rotate.y}set rotateY(e){this.rotate.y=e}load(e){if(!e)return;e.distance!==void 0&&(this.distance=fe(e.distance)),e.enable!==void 0&&(this.enable=e.enable);const t=e.rotate?.x??e.rotateX;t!==void 0&&(this.rotate.x=t);const i=e.rotate?.y??e.rotateY;i!==void 0&&(this.rotate.y=i)}}class xg{constructor(){this.x=50,this.y=50,this.mode="percent",this.radius=0}load(e){e&&(e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.mode!==void 0&&(this.mode=e.mode),e.radius!==void 0&&(this.radius=e.radius))}}class Pg{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){e&&(e.acceleration!==void 0&&(this.acceleration=fe(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.inverse!==void 0&&(this.inverse=e.inverse),e.maxSpeed!==void 0&&(this.maxSpeed=fe(e.maxSpeed)))}}class kg{constructor(){this.clamp=!0,this.delay=new Ri,this.enable=!1,this.options={}}load(e){e&&(e.clamp!==void 0&&(this.clamp=e.clamp),this.delay.load(e.delay),e.enable!==void 0&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=vt(this.options,e.options)))}}class Rg{load(e){e&&(e.color!==void 0&&(this.color=ct.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image))}}class Dg{constructor(){this.enable=!1,this.length=10,this.fill=new Rg}get fillColor(){return this.fill.color}set fillColor(e){this.fill.load({color:e})}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),(e.fill!==void 0||e.fillColor!==void 0)&&this.fill.load(e.fill||{color:e.fillColor}),e.length!==void 0&&(this.length=e.length))}}class Og{constructor(){this.default="out"}load(e){e&&(e.default!==void 0&&(this.default=e.default),this.bottom=e.bottom??e.default,this.left=e.left??e.default,this.right=e.right??e.default,this.top=e.top??e.default)}}class Mg{constructor(){this.acceleration=0,this.enable=!1}load(e){e&&(e.acceleration!==void 0&&(this.acceleration=fe(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.position&&(this.position=vt({},e.position)))}}class Vg{constructor(){this.angle=new Cg,this.attract=new Sg,this.center=new xg,this.decay=0,this.distance={},this.direction="none",this.drift=0,this.enable=!1,this.gravity=new Pg,this.path=new kg,this.outModes=new Og,this.random=!1,this.size=!1,this.speed=2,this.spin=new Mg,this.straight=!1,this.trail=new Dg,this.vibrate=!1,this.warp=!1}get bounce(){return this.collisions}set bounce(e){this.collisions=e}get collisions(){return!1}set collisions(e){}get noise(){return this.path}set noise(e){this.path=e}get outMode(){return this.outModes.default}set outMode(e){this.outModes.default=e}get out_mode(){return this.outMode}set out_mode(e){this.outMode=e}load(e){if(!e)return;this.angle.load(hn(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),e.decay!==void 0&&(this.decay=fe(e.decay)),e.direction!==void 0&&(this.direction=e.direction),e.distance!==void 0&&(this.distance=hn(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),e.drift!==void 0&&(this.drift=fe(e.drift)),e.enable!==void 0&&(this.enable=e.enable),this.gravity.load(e.gravity);const t=e.outModes??e.outMode??e.out_mode;t!==void 0&&(Bs(t)?this.outModes.load(t):this.outModes.load({default:t})),this.path.load(e.path??e.noise),e.random!==void 0&&(this.random=e.random),e.size!==void 0&&(this.size=e.size),e.speed!==void 0&&(this.speed=fe(e.speed)),this.spin.load(e.spin),e.straight!==void 0&&(this.straight=e.straight),this.trail.load(e.trail),e.vibrate!==void 0&&(this.vibrate=e.vibrate),e.warp!==void 0&&(this.warp=e.warp)}}class Lg extends lf{constructor(){super(),this.destroy="none",this.speed=2}get opacity_min(){return this.minimumValue}set opacity_min(e){this.minimumValue=e}load(e){e?.opacity_min!==void 0&&e.minimumValue===void 0&&(e.minimumValue=e.opacity_min),super.load(e),e&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class Ng extends Ri{constructor(){super(),this.animation=new Lg,this.random.minimumValue=.1,this.value=1}get anim(){return this.animation}set anim(e){this.animation=e}load(e){if(!e)return;super.load(e);const t=e.animation??e.anim;t!==void 0&&(this.animation.load(t),this.value=fe(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class Fg{constructor(){this.enable=!1,this.width=1920,this.height=1080}get area(){return this.width}set area(e){this.width=e}get factor(){return this.height}set factor(e){this.height=e}get value_area(){return this.area}set value_area(e){this.area=e}load(e){if(!e)return;e.enable!==void 0&&(this.enable=e.enable);const t=e.width??e.area??e.value_area;t!==void 0&&(this.width=t);const i=e.height??e.factor;i!==void 0&&(this.height=i)}}class zg{constructor(){this.density=new Fg,this.limit=0,this.value=0}get max(){return this.limit}set max(e){this.limit=e}load(e){if(!e)return;this.density.load(e.density);const t=e.limit??e.max;t!==void 0&&(this.limit=t),e.value!==void 0&&(this.value=e.value)}}class Bg{constructor(){this.blur=0,this.color=new ct,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){e&&(e.blur!==void 0&&(this.blur=e.blur),this.color=ct.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(e.offset.x!==void 0&&(this.offset.x=e.offset.x),e.offset.y!==void 0&&(this.offset.y=e.offset.y)))}}const Ja="character",Za="char",el="image",tl="images",nl="polygon",il="star";class $g{constructor(){this.loadShape=(e,t,i,s)=>{if(!e)return;const r=Bt(e),a=r?[]:{},c=r!==Bt(this.options[t]),h=r!==Bt(this.options[i]);c&&(this.options[t]=a),h&&s&&(this.options[i]=a),this.options[t]=vt(this.options[t]??a,e),(!this.options[i]||s)&&(this.options[i]=vt(this.options[i]??a,e))},this.close=!0,this.fill=!0,this.options={},this.type="circle"}get character(){return this.options[Ja]??this.options[Za]}set character(e){this.options[Za]=this.options[Ja]=e}get custom(){return this.options}set custom(e){this.options=e}get image(){return this.options[el]??this.options[tl]}set image(e){this.options[tl]=this.options[el]=e}get images(){return this.image}set images(e){this.image=e}get polygon(){return this.options[nl]??this.options[il]}set polygon(e){this.options[il]=this.options[nl]=e}get stroke(){return[]}set stroke(e){}load(e){if(!e)return;const t=e.options??e.custom;if(t!==void 0)for(const i in t){const s=t[i];s&&(this.options[i]=vt(this.options[i]??{},s))}this.loadShape(e.character,Ja,Za,!0),this.loadShape(e.polygon,nl,il,!1),this.loadShape(e.image??e.images,el,tl,!0),e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class Ug extends lf{constructor(){super(),this.destroy="none",this.speed=5}get size_min(){return this.minimumValue}set size_min(e){this.minimumValue=e}load(e){e?.size_min!==void 0&&e.minimumValue===void 0&&(e.minimumValue=e.size_min),super.load(e),e&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class jg extends Ri{constructor(){super(),this.animation=new Ug,this.random.minimumValue=1,this.value=3}get anim(){return this.animation}set anim(e){this.animation=e}load(e){if(super.load(e),!e)return;const t=e.animation??e.anim;t!==void 0&&(this.animation.load(t),this.value=fe(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class Pu{constructor(){this.width=0}load(e){e&&(e.color!==void 0&&(this.color=Fr.create(this.color,e.color)),e.width!==void 0&&(this.width=fe(e.width)),e.opacity!==void 0&&(this.opacity=fe(e.opacity)))}}class qg extends Ri{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),e&&(e.opacityRate!==void 0&&(this.opacityRate=e.opacityRate),e.sizeRate!==void 0&&(this.sizeRate=e.sizeRate),e.velocityRate!==void 0&&(this.velocityRate=e.velocityRate))}}class Hg{constructor(e,t){this._engine=e,this._container=t,this.bounce=new cf,this.collisions=new Ag,this.color=new Fr,this.color.value="#fff",this.groups={},this.move=new Vg,this.number=new zg,this.opacity=new Ng,this.reduceDuplicates=!1,this.shadow=new Bg,this.shape=new $g,this.size=new jg,this.stroke=new Pu,this.zIndex=new qg}load(e){if(!e)return;if(this.bounce.load(e.bounce),this.color.load(Fr.create(this.color,e.color)),e.groups!==void 0)for(const s in e.groups){const r=e.groups[s];r!==void 0&&(this.groups[s]=vt(this.groups[s]??{},r))}this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),e.reduceDuplicates!==void 0&&(this.reduceDuplicates=e.reduceDuplicates),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex);const t=e.move?.collisions??e.move?.bounce;t!==void 0&&(this.collisions.enable=t),this.collisions.load(e.collisions),e.interactivity!==void 0&&(this.interactivity=vt({},e.interactivity));const i=e.stroke??e.shape?.stroke;if(i&&(this.stroke=it(i,s=>{const r=new Pu;return r.load(s),r})),this._container){const s=this._engine.plugins.updaters.get(this._container);if(s)for(const a of s)a.loadOptions&&a.loadOptions(this,e);const r=this._engine.plugins.interactors.get(this._container);if(r)for(const a of r)a.loadParticlesOptions&&a.loadParticlesOptions(this,e)}}}function uf(n,...e){for(const t of e)n.load(t)}function hf(n,e,...t){const i=new Hg(n,e);return uf(i,...t),i}class Gg{constructor(e,t){this._findDefaultTheme=i=>this.themes.find(s=>s.default.value&&s.default.mode===i)??this.themes.find(s=>s.default.value&&s.default.mode==="any"),this._importPreset=i=>{this.load(this._engine.plugins.getPreset(i))},this._engine=e,this._container=t,this.autoPlay=!0,this.background=new og,this.backgroundMask=new lg,this.defaultThemes={},this.delay=0,this.fullScreen=new cg,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new af(e,t),this.manualParticles=[],this.particles=hf(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}get backgroundMode(){return this.fullScreen}set backgroundMode(e){this.fullScreen.load(e)}get fps_limit(){return this.fpsLimit}set fps_limit(e){this.fpsLimit=e}get retina_detect(){return this.detectRetina}set retina_detect(e){this.detectRetina=e}load(e){if(!e)return;e.preset!==void 0&&it(e.preset,a=>this._importPreset(a)),e.autoPlay!==void 0&&(this.autoPlay=e.autoPlay),e.delay!==void 0&&(this.delay=fe(e.delay));const t=e.detectRetina??e.retina_detect;t!==void 0&&(this.detectRetina=t),e.duration!==void 0&&(this.duration=fe(e.duration));const i=e.fpsLimit??e.fps_limit;i!==void 0&&(this.fpsLimit=i),e.pauseOnBlur!==void 0&&(this.pauseOnBlur=e.pauseOnBlur),e.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=e.pauseOnOutsideViewport),e.zLayers!==void 0&&(this.zLayers=e.zLayers),this.background.load(e.background);const s=e.fullScreen??e.backgroundMode;Ei(s)?this.fullScreen.enable=s:this.fullScreen.load(s),this.backgroundMask.load(e.backgroundMask),this.interactivity.load(e.interactivity),e.manualParticles&&(this.manualParticles=e.manualParticles.map(a=>{const c=new gg;return c.load(a),c})),this.particles.load(e.particles),this.style=vt(this.style,e.style),this._engine.plugins.loadOptions(this,e),e.smooth!==void 0&&(this.smooth=e.smooth);const r=this._engine.plugins.interactors.get(this._container);if(r)for(const a of r)a.loadOptions&&a.loadOptions(this,e);if(e.responsive!==void 0)for(const a of e.responsive){const c=new yg;c.load(a),this.responsive.push(c)}if(this.responsive.sort((a,c)=>a.maxWidth-c.maxWidth),e.themes!==void 0)for(const a of e.themes){const c=this.themes.find(h=>h.name===a.name);if(c)c.load(a);else{const h=new vg;h.load(a),this.themes.push(h)}}this.defaultThemes.dark=this._findDefaultTheme("dark")?.name,this.defaultThemes.light=this._findDefaultTheme("light")?.name}setResponsive(e,t,i){this.load(i);const s=this.responsive.find(r=>r.mode==="screen"&&screen?r.maxWidth>screen.availWidth:r.maxWidth*t>e);return this.load(s?.options),s?.maxWidth}setTheme(e){if(e){const t=this.themes.find(i=>i.name===e);t&&this.load(t.options)}else{const t=Kh("(prefers-color-scheme: dark)"),i=t&&t.matches,s=this._findDefaultTheme(i?"dark":"light");s&&this.load(s.options)}}}class Wg{constructor(e,t){this.container=t,this._engine=e,this._interactors=e.plugins.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[]}async externalInteract(e){for(const t of this._externalInteractors)t.isEnabled()&&await t.interact(e)}handleClickMode(e){for(const t of this._externalInteractors)t.handleClickMode&&t.handleClickMode(e)}init(){this._externalInteractors=[],this._particleInteractors=[];for(const e of this._interactors){switch(e.type){case"external":this._externalInteractors.push(e);break;case"particles":this._particleInteractors.push(e);break}e.init()}}async particlesInteract(e,t){for(const i of this._externalInteractors)i.clear(e,t);for(const i of this._particleInteractors)i.isEnabled(e)&&await i.interact(e,t)}async reset(e){for(const t of this._externalInteractors)t.isEnabled()&&t.reset(e);for(const t of this._particleInteractors)t.isEnabled(e)&&t.reset(e)}}const ku=n=>{if(!Ue(n.outMode,n.checkModes))return;const e=n.radius*2;n.coord>n.maxCoord-e?n.setCb(-n.radius):n.coord<e&&n.setCb(n.radius)};class Kg{constructor(e,t,i,s,r,a){this.container=i,this._calcPosition=(c,h,f,g=0)=>{for(const[,j]of c.plugins){const G=j.particlePosition!==void 0?j.particlePosition(h,this):void 0;if(G)return Mt.create(G.x,G.y,f)}const y=c.canvas.size,b=Mm({size:y,position:h}),x=Mt.create(b.x,b.y,f),M=this.getRadius(),V=this.options.move.outModes,$=j=>{ku({outMode:j,checkModes:["bounce","bounce-horizontal"],coord:x.x,maxCoord:c.canvas.size.width,setCb:G=>x.x+=G,radius:M})},L=j=>{ku({outMode:j,checkModes:["bounce","bounce-vertical"],coord:x.y,maxCoord:c.canvas.size.height,setCb:G=>x.y+=G,radius:M})};return $(V.left??V.default),$(V.right??V.default),L(V.top??V.default),L(V.bottom??V.default),this._checkOverlap(x,g)?this._calcPosition(c,void 0,f,g+1):x},this._calculateVelocity=()=>{const c=Om(this.direction),h=c.copy(),f=this.options.move;if(f.direction==="inside"||f.direction==="outside")return h;const g=Math.PI/180*ee(f.angle.value),y=Math.PI/180*ee(f.angle.offset),b={left:y-g/2,right:y+g/2};return f.straight||(h.angle+=Rt(fe(b.left,b.right))),f.random&&typeof f.speed=="number"&&(h.length*=Oe()),h},this._checkOverlap=(c,h=0)=>{const f=this.options.collisions,g=this.getRadius();if(!f.enable)return!1;const y=f.overlap;if(y.enable)return!1;const b=y.retries;if(b>=0&&h>b)throw new Error(`${Zt} particle is overlapping and can't be placed`);return!!this.container.particles.find(x=>zt(c,x.position)<g+x.getRadius())},this._getRollColor=c=>{if(!c||!this.roll||!this.backColor&&!this.roll.alter)return c;const h=this.roll.horizontal&&this.roll.vertical?2:1,f=this.roll.horizontal?Math.PI/2:0;return Math.floor(((this.roll.angle??0)+f)/(Math.PI/h))%2?this.backColor?this.backColor:this.roll.alter?ng(c,this.roll.alter.type,this.roll.alter.value):c:c},this._initPosition=c=>{const h=this.container,f=ee(this.options.zIndex.value);this.position=this._calcPosition(h,c,dn(f,0,h.zLayers)),this.initialPosition=this.position.copy();const g=h.canvas.size;switch(this.moveCenter={...Zh(this.options.move.center,g),radius:this.options.move.center.radius??0,mode:this.options.move.center.mode??"percent"},this.direction=Dm(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case"inside":this.outType="inside";break;case"outside":this.outType="outside";break}this.offset=nt.origin},this._loadShapeData=(c,h)=>{const f=c.options[this.shape];if(f)return vt({close:c.close,fill:c.fill},ti(f,this.id,h))},this._engine=e,this.init(t,s,r,a)}destroy(e){if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const t=this.container,i=this.pathGenerator;for(const[,s]of t.plugins)s.particleDestroyed&&s.particleDestroyed(this,e);for(const s of t.particles.updaters)s.particleDestroyed&&s.particleDestroyed(this,e);i&&i.reset(this)}draw(e){const t=this.container;for(const[,i]of t.plugins)t.canvas.drawParticlePlugin(i,this,e);t.canvas.drawParticle(this,e)}getFillColor(){return this._getRollColor(this.bubble.color??Cu(this.color))}getMass(){return this.getRadius()**2*Math.PI/2}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??Cu(this.strokeColor))}init(e,t,i,s){const r=this.container,a=this._engine;this.id=e,this.group=s,this.fill=!0,this.pathRotation=!1,this.close=!0,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType="normal",this.ignoresResizeRatio=!0;const c=r.retina.pixelRatio,h=r.actualOptions,f=hf(this._engine,r,h.particles),g=f.shape.type,{reduceDuplicates:y}=f;this.shape=ti(g,this.id,y);const b=f.shape;if(i&&i.shape&&i.shape.type){const G=i.shape.type,U=ti(G,this.id,y);U&&(this.shape=U,b.load(i.shape))}this.shapeData=this._loadShapeData(b,y),f.load(i);const x=this.shapeData;x&&f.load(x.particles);const M=new af(a,r);M.load(r.actualOptions.interactivity),M.load(f.interactivity),this.interactivity=M,this.fill=x?.fill??f.shape.fill,this.close=x?.close??f.shape.close,this.options=f;const V=this.options.move.path;this.pathDelay=ls(V.delay)*1e3,V.generator&&(this.pathGenerator=this._engine.plugins.getPathGenerator(V.generator),this.pathGenerator&&r.addPath(V.generator,this.pathGenerator)&&this.pathGenerator.init(r)),r.retina.initParticle(this),this.size=Jh(this.options.size,c),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(t),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=1-ee(this.options.move.decay);const $=r.particles;$.needsSort=$.needsSort||$.lastZIndex<this.position.z,$.lastZIndex=this.position.z,this.zIndexFactor=this.position.z/r.zLayers,this.sides=24;let L=r.drawers.get(this.shape);L||(L=this._engine.plugins.getShapeDrawer(this.shape),L&&r.drawers.set(this.shape,L)),L&&L.loadShape&&L.loadShape(this);const j=L?.getSidesCount;j&&(this.sides=j(this)),this.spawning=!1,this.shadowColor=fn(this.options.shadow.color);for(const G of r.particles.updaters)G.init(this);for(const G of r.particles.movers)G.init&&G.init(this);L&&L.particleInit&&L.particleInit(r,this);for(const[,G]of r.plugins)G.particleCreated&&G.particleCreated(this)}isInsideCanvas(){const e=this.getRadius(),t=this.container.canvas.size,i=this.position;return i.x>=-e&&i.y>=-e&&i.y<=t.height+e&&i.x<=t.width+e}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){for(const e of this.container.particles.updaters)e.reset&&e.reset(this)}}class Qg{constructor(e,t){this.position=e,this.particle=t}}class ff{constructor(e,t){this.position={x:e,y:t}}}class pn extends ff{constructor(e,t,i,s){super(e,t),this.size={height:s,width:i}}contains(e){const t=this.size.width,i=this.size.height,s=this.position;return e.x>=s.x&&e.x<=s.x+t&&e.y>=s.y&&e.y<=s.y+i}intersects(e){e instanceof bt&&e.intersects(this);const t=this.size.width,i=this.size.height,s=this.position,r=e.position,a=e instanceof pn?e.size:{width:0,height:0},c=a.width,h=a.height;return r.x<s.x+t&&r.x+c>s.x&&r.y<s.y+i&&r.y+h>s.y}}class bt extends ff{constructor(e,t,i){super(e,t),this.radius=i}contains(e){return zt(e,this.position)<=this.radius}intersects(e){const t=this.position,i=e.position,s={x:Math.abs(i.x-t.x),y:Math.abs(i.y-t.y)},r=this.radius;if(e instanceof bt){const a=r+e.radius,c=Math.sqrt(s.x**2+s.y**2);return a>c}else if(e instanceof pn){const{width:a,height:c}=e.size;return Math.pow(s.x-a,2)+Math.pow(s.y-c,2)<=r**2||s.x<=r+a&&s.y<=r+c||s.x<=a||s.y<=c}return!1}}class zo{constructor(e,t){this.rectangle=e,this.capacity=t,this._subdivide=()=>{const{x:i,y:s}=this.rectangle.position,{width:r,height:a}=this.rectangle.size,{capacity:c}=this;for(let h=0;h<4;h++)this._subs.push(new zo(new pn(i+r/2*(h%2),s+a/2*(Math.round(h/2)-h%2),r/2,a/2),c));this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(e){return this.rectangle.contains(e.position)?this._points.length<this.capacity?(this._points.push(e),!0):(this._divided||this._subdivide(),this._subs.some(t=>t.insert(e))):!1}query(e,t,i){const s=i||[];if(!e.intersects(this.rectangle))return[];for(const r of this._points)!e.contains(r.position)&&zt(e.position,r.position)>r.particle.getRadius()&&(!t||t(r.particle))||s.push(r.particle);if(this._divided)for(const r of this._subs)r.query(e,t,s);return s}queryCircle(e,t,i){return this.query(new bt(e.x,e.y,t),i)}queryRectangle(e,t,i){return this.query(new pn(e.x,e.y,t.width,t.height),i)}}const Ru=4,Du=n=>new pn(-n.width/4,-n.height/4,n.width*3/2,n.height*3/2);let Xg=class{constructor(e,t){this._applyDensity=(s,r,a)=>{if(!s.number.density?.enable)return;const c=s.number,h=this._initDensityFactor(c.density),f=c.value,g=c.limit>0?c.limit:f,y=Math.min(f,g)*h+r,b=Math.min(this.count,this.filter(x=>x.group===a).length);this.limit=c.limit*h,b<y?this.push(Math.abs(y-b),void 0,s,a):b>y&&this.removeQuantity(b-y,a)},this._initDensityFactor=s=>{const r=this._container;if(!r.canvas.element||!s.enable)return 1;const a=r.canvas.element,c=r.retina.pixelRatio;return a.width*a.height/(s.factor*c**2*s.area)},this._pushParticle=(s,r,a,c)=>{try{let h=this.pool.pop();h?h.init(this._nextId,s,r,a):h=new Kg(this._engine,this._nextId,this._container,s,r,a);let f=!0;return c&&(f=c(h)),f?(this._array.push(h),this._zArray.push(h),this._nextId++,this._engine.dispatchEvent("particleAdded",{container:this._container,data:{particle:h}}),h):void 0}catch(h){cs().warning(`${Zt} adding particle: ${h}`);return}},this._removeParticle=(s,r,a)=>{const c=this._array[s];if(!c||c.group!==r)return!1;c.destroy(a);const h=this._zArray.indexOf(c);return this._array.splice(s,1),this._zArray.splice(h,1),this.pool.push(c),this._engine.dispatchEvent("particleRemoved",{container:this._container,data:{particle:c}}),!0},this._engine=e,this._container=t,this._nextId=0,this._array=[],this._zArray=[],this.pool=[],this.limit=0,this.needsSort=!1,this.lastZIndex=0,this._interactionManager=new Wg(e,t);const i=t.canvas.size;this.quadTree=new zo(Du(i),Ru),this.movers=this._engine.plugins.getMovers(t,!0),this.updaters=this._engine.plugins.getUpdaters(t,!0)}get count(){return this._array.length}addManualParticles(){const e=this._container,t=e.actualOptions;for(const i of t.manualParticles)this.addParticle(i.position?Zh(i.position,e.canvas.size):void 0,i.options)}addParticle(e,t,i,s){const r=this._container,a=r.actualOptions,c=a.particles.number.limit;if(c>0){const h=this.count+1-c;h>0&&this.removeQuantity(h)}return this._pushParticle(e,t,i,s)}clear(){this._array=[],this._zArray=[]}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}async draw(e){const t=this._container;t.canvas.clear(),await this.update(e);for(const[,i]of t.plugins)t.canvas.drawPlugin(i,e);for(const i of this._zArray)i.draw(e)}filter(e){return this._array.filter(e)}find(e){return this._array.find(e)}handleClickMode(e){this._interactionManager.handleClickMode(e)}init(){const e=this._container,t=e.actualOptions;this.lastZIndex=0,this.needsSort=!1;let i=!1;this.updaters=this._engine.plugins.getUpdaters(e,!0),this._interactionManager.init();for(const[,s]of e.plugins)if(s.particlesInitialization!==void 0&&(i=s.particlesInitialization()),i)break;this._interactionManager.init();for(const[,s]of e.pathGenerators)s.init(e);if(this.addManualParticles(),!i){for(const s in t.particles.groups){const r=t.particles.groups[s];for(let a=this.count,c=0;c<r.number?.value&&a<t.particles.number.value;a++,c++)this.addParticle(void 0,r,s)}for(let s=this.count;s<t.particles.number.value;s++)this.addParticle()}}push(e,t,i,s){this.pushing=!0;for(let r=0;r<e;r++)this.addParticle(t?.position,i,s);this.pushing=!1}async redraw(){this.clear(),this.init(),await this.draw({value:0,factor:0})}remove(e,t,i){this.removeAt(this._array.indexOf(e),void 0,t,i)}removeAt(e,t=1,i,s){if(e<0||e>this.count)return;let r=0;for(let a=e;r<t&&a<this.count;a++)this._removeParticle(a--,i,s)&&r++}removeQuantity(e,t){this.removeAt(0,e,t)}setDensity(){const e=this._container.actualOptions,t=e.particles.groups;for(const i in t)this._applyDensity(t[i],0,i);this._applyDensity(e.particles,e.manualParticles.length)}async update(e){const t=this._container,i=new Set;this.quadTree=new zo(Du(t.canvas.size),Ru);for(const[,s]of t.pathGenerators)s.update();for(const[,s]of t.plugins)s.update&&s.update(e);for(const s of this._array){const r=t.canvas.resizeFactor;r&&!s.ignoresResizeRatio&&(s.position.x*=r.width,s.position.y*=r.height,s.initialPosition.x*=r.width,s.initialPosition.y*=r.height),s.ignoresResizeRatio=!1,await this._interactionManager.reset(s);for(const[,a]of this._container.plugins){if(s.destroyed)break;a.particleUpdate&&a.particleUpdate(s,e)}for(const a of this.movers)a.isEnabled(s)&&a.move(s,e);if(s.destroyed){i.add(s);continue}this.quadTree.insert(new Qg(s.getPosition(),s))}if(i.size){const s=r=>!i.has(r);this._array=this.filter(s),this._zArray=this._zArray.filter(s),this.pool.push(...i)}await this._interactionManager.externalInteract(e);for(const s of this._array){for(const r of this.updaters)r.update(s,e);!s.destroyed&&!s.spawning&&await this._interactionManager.particlesInteract(s,e)}if(delete t.canvas.resizeFactor,this.needsSort){const s=this._zArray;s.sort((r,a)=>a.position.z-r.position.z||r.id-a.id),this.lastZIndex=s[s.length-1].position.z,this.needsSort=!1}}};class Yg{constructor(e){this.container=e,this.pixelRatio=1,this.reduceFactor=1}init(){const e=this.container,t=e.actualOptions;this.pixelRatio=!t.detectRetina||Us()?1:window.devicePixelRatio,this.reduceFactor=1;const i=this.pixelRatio;if(e.canvas.element){const a=e.canvas.element;e.canvas.size.width=a.offsetWidth*i,e.canvas.size.height=a.offsetHeight*i}const s=t.particles,r=s.move;this.attractDistance=ee(r.attract.distance)*i,this.maxSpeed=ee(r.gravity.maxSpeed)*i,this.sizeAnimationSpeed=ee(s.size.animation.speed)*i}initParticle(e){const t=e.options,i=this.pixelRatio,s=t.move,r=s.distance,a=e.retina;a.attractDistance=ee(s.attract.distance)*i,a.moveDrift=ee(s.drift)*i,a.moveSpeed=ee(s.speed)*i,a.sizeAnimationSpeed=ee(t.size.animation.speed)*i;const c=a.maxDistance;c.horizontal=r.horizontal!==void 0?r.horizontal*i:void 0,c.vertical=r.vertical!==void 0?r.vertical*i:void 0,a.maxSpeed=ee(s.gravity.maxSpeed)*i}}function Le(n){return n&&!n.destroyed}function Jg(n,e=60,t=!1){return{value:n,factor:t?60/e:60*n/1e3}}function Ns(n,e,...t){const i=new Gg(n,e);return uf(i,...t),i}const Zg="default",Ou={generate:n=>n.velocity,init:()=>{},update:()=>{},reset:()=>{}};class ey{constructor(e,t,i){this.id=t,this._intersectionManager=s=>{if(!(!Le(this)||!this.actualOptions.pauseOnOutsideViewport))for(const r of s)r.target===this.interactivity.element&&(r.isIntersecting?this.play:this.pause)()},this._nextFrame=async s=>{try{if(!this.smooth&&this.lastFrameTime!==void 0&&s<this.lastFrameTime+1e3/this.fpsLimit){this.draw(!1);return}this.lastFrameTime??=s;const r=Jg(s-this.lastFrameTime,this.fpsLimit,this.smooth);if(this.addLifeTime(r.value),this.lastFrameTime=s,r.value>1e3){this.draw(!1);return}if(await this.particles.draw(r),!this.alive()){this.destroy();return}this.getAnimationStatus()&&this.draw(!1)}catch(r){cs().error(`${Zt} in animation loop`,r)}},this._engine=e,this.fpsLimit=120,this.smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this.lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._sourceOptions=i,this._initialSourceOptions=i,this.retina=new Yg(this),this.canvas=new sg(this),this.particles=new Xg(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.drawers=new Map,this._options=Ns(this._engine,this),this.actualOptions=Ns(this._engine,this),this._eventListeners=new rg(this),typeof IntersectionObserver<"u"&&IntersectionObserver&&(this._intersectionObserver=new IntersectionObserver(s=>this._intersectionManager(s))),this._engine.dispatchEvent("containerBuilt",{container:this})}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(e){if(!Le(this))return;const t=this.interactivity.element;if(!t)return;const i=(y,b,x)=>{if(!Le(this))return;const M=this.retina.pixelRatio,V={x:b.x*M,y:b.y*M},$=this.particles.quadTree.queryCircle(V,x*M);e(y,$)},s=y=>{if(!Le(this))return;const b=y,x={x:b.offsetX||b.clientX,y:b.offsetY||b.clientY};i(y,x,1)},r=()=>{Le(this)&&(f=!0,g=!1)},a=()=>{Le(this)&&(g=!0)},c=y=>{if(Le(this)){if(f&&!g){const b=y;let x=b.touches[b.touches.length-1];if(!x&&(x=b.changedTouches[b.changedTouches.length-1],!x))return;const M=this.canvas.element,V=M?M.getBoundingClientRect():void 0,$={x:x.clientX-(V?V.left:0),y:x.clientY-(V?V.top:0)};i(y,$,Math.max(x.radiusX,x.radiusY))}f=!1,g=!1}},h=()=>{Le(this)&&(f=!1,g=!1)};let f=!1,g=!1;t.addEventListener("click",s),t.addEventListener("touchstart",r),t.addEventListener("touchmove",a),t.addEventListener("touchend",c),t.addEventListener("touchcancel",h)}addLifeTime(e){this._lifeTime+=e}addPath(e,t,i=!1){return!Le(this)||!i&&this.pathGenerators.has(e)?!1:(this.pathGenerators.set(e,t??Ou),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}destroy(){if(!Le(this))return;this.stop(),this.particles.destroy(),this.canvas.destroy();for(const[,i]of this.drawers)i.destroy&&i.destroy(this);for(const i of this.drawers.keys())this.drawers.delete(i);this._engine.plugins.destroy(this),this.destroyed=!0;const e=this._engine.dom(),t=e.findIndex(i=>i===this);t>=0&&e.splice(t,1),this._engine.dispatchEvent("containerDestroyed",{container:this})}draw(e){if(!Le(this))return;let t=e;this._drawAnimationFrame=requestAnimationFrame(async i=>{t&&(this.lastFrameTime=void 0,t=!1),await this._nextFrame(i)})}async export(e,t={}){for(const[,i]of this.plugins){if(!i.export)continue;const s=await i.export(e,t);if(s.supported)return s.blob}cs().error(`${Zt} - Export plugin with type ${e} not found`)}getAnimationStatus(){return!this._paused&&!this.pageHidden&&Le(this)}handleClickMode(e){if(Le(this)){this.particles.handleClickMode(e);for(const[,t]of this.plugins)t.handleClickMode&&t.handleClickMode(e)}}async init(){if(!Le(this))return;const e=this._engine.plugins.getSupportedShapes();for(const i of e){const s=this._engine.plugins.getShapeDrawer(i);s&&this.drawers.set(i,s)}this._options=Ns(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=Ns(this._engine,this,this._options);const t=this._engine.plugins.getAvailablePlugins(this);for(const[i,s]of t)this.plugins.set(i,s);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize(),this.zLayers=this.actualOptions.zLayers,this._duration=ee(this.actualOptions.duration)*1e3,this._delay=ee(this.actualOptions.delay)*1e3,this._lifeTime=0,this.fpsLimit=this.actualOptions.fpsLimit>0?this.actualOptions.fpsLimit:120,this.smooth=this.actualOptions.smooth;for(const[,i]of this.drawers)i.init&&await i.init(this);for(const[,i]of this.plugins)i.init&&await i.init();this._engine.dispatchEvent("containerInit",{container:this}),this.particles.init(),this.particles.setDensity();for(const[,i]of this.plugins)i.particlesSetup&&i.particlesSetup();this._engine.dispatchEvent("particlesSetup",{container:this})}async loadTheme(e){Le(this)&&(this._currentTheme=e,await this.refresh())}pause(){if(Le(this)&&(this._drawAnimationFrame!==void 0&&(cancelAnimationFrame(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const[,e]of this.plugins)e.pause&&e.pause();this.pageHidden||(this._paused=!0),this._engine.dispatchEvent("containerPaused",{container:this})}}play(e){if(!Le(this))return;const t=this._paused||e;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),t)for(const[,i]of this.plugins)i.play&&i.play();this._engine.dispatchEvent("containerPlay",{container:this}),this.draw(t||!1)}async refresh(){if(Le(this))return this.stop(),this.start()}async reset(){if(Le(this))return this._initialSourceOptions=void 0,this._options=Ns(this._engine,this),this.actualOptions=Ns(this._engine,this,this._options),this.refresh()}setNoise(e,t,i){Le(this)&&this.setPath(e,t,i)}setPath(e,t,i){if(!e||!Le(this))return;const s={...Ou};if(ef(e))s.generate=e,t&&(s.init=t),i&&(s.update=i);else{const r=s;s.generate=e.generate||r.generate,s.init=e.init||r.init,s.update=e.update||r.update}this.addPath(Zg,s,!0)}async start(){!Le(this)||this.started||(await this.init(),this.started=!0,await new Promise(e=>{this._delayTimeout=setTimeout(async()=>{this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const[,t]of this.plugins)t.start&&await t.start();this._engine.dispatchEvent("containerStarted",{container:this}),this.play(),e()},this._delay)}))}stop(){if(!(!Le(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const[,e]of this.plugins)e.stop&&e.stop();for(const e of this.plugins.keys())this.plugins.delete(e);this._sourceOptions=this._options,this._engine.dispatchEvent("containerStopped",{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const e=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this.responsiveMaxWidth===e?!1:(this.responsiveMaxWidth=e,!0)}}class ty{constructor(){this._listeners=new Map}addEventListener(e,t){this.removeEventListener(e,t);let i=this._listeners.get(e);i||(i=[],this._listeners.set(e,i)),i.push(t)}dispatchEvent(e,t){const i=this._listeners.get(e);i&&i.forEach(s=>s(t))}hasEventListener(e){return!!this._listeners.get(e)}removeAllEventListeners(e){e?this._listeners.delete(e):this._listeners=new Map}removeEventListener(e,t){const i=this._listeners.get(e);if(!i)return;const s=i.length,r=i.indexOf(t);r<0||(s===1?this._listeners.delete(e):i.splice(r,1))}}function sl(n,e,t,i=!1){let s=e.get(n);return(!s||i)&&(s=[...t.values()].map(r=>r(n)),e.set(n,s)),s}class ny{constructor(e){this._engine=e,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.drawers=new Map,this.pathGenerators=new Map}addInteractor(e,t){this._initializers.interactors.set(e,t)}addParticleMover(e,t){this._initializers.movers.set(e,t)}addParticleUpdater(e,t){this._initializers.updaters.set(e,t)}addPathGenerator(e,t){!this.getPathGenerator(e)&&this.pathGenerators.set(e,t)}addPlugin(e){!this.getPlugin(e.id)&&this.plugins.push(e)}addPreset(e,t,i=!1){(i||!this.getPreset(e))&&this.presets.set(e,t)}addShapeDrawer(e,t){it(e,i=>{!this.getShapeDrawer(i)&&this.drawers.set(i,t)})}destroy(e){this.updaters.delete(e),this.movers.delete(e),this.interactors.delete(e)}getAvailablePlugins(e){const t=new Map;for(const i of this.plugins)i.needsPlugin(e.actualOptions)&&t.set(i.id,i.getPlugin(e));return t}getInteractors(e,t=!1){return sl(e,this.interactors,this._initializers.interactors,t)}getMovers(e,t=!1){return sl(e,this.movers,this._initializers.movers,t)}getPathGenerator(e){return this.pathGenerators.get(e)}getPlugin(e){return this.plugins.find(t=>t.id===e)}getPreset(e){return this.presets.get(e)}getShapeDrawer(e){return this.drawers.get(e)}getSupportedShapes(){return this.drawers.keys()}getUpdaters(e,t=!1){return sl(e,this.updaters,this._initializers.updaters,t)}loadOptions(e,t){for(const i of this.plugins)i.loadOptions(e,t)}loadParticlesOptions(e,t,...i){const s=this.updaters.get(e);if(s)for(const r of s)r.loadOptions&&r.loadOptions(t,...i)}}async function iy(n){const e=ti(n.url,n.index);if(!e)return n.fallback;const t=await fetch(e);return t.ok?t.json():(cs().error(`${Zt} ${t.status} while retrieving config file`),n.fallback)}function sy(n){return!n.id&&!n.element&&!n.url&&!n.options}function ry(n){return!sy(n)}class oy{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new ty,this._initialized=!1,this.plugins=new ny(this)}get configs(){const e={};for(const[t,i]of this._configs)e[t]=i;return e}get version(){return"2.12.0"}addConfig(e,t){un(e)?t&&(t.name=e,this._configs.set(e,t)):this._configs.set(e.name??"default",e)}addEventListener(e,t){this._eventDispatcher.addEventListener(e,t)}async addInteractor(e,t,i=!0){this.plugins.addInteractor(e,t),await this.refresh(i)}async addMover(e,t,i=!0){this.plugins.addParticleMover(e,t),await this.refresh(i)}async addParticleUpdater(e,t,i=!0){this.plugins.addParticleUpdater(e,t),await this.refresh(i)}async addPathGenerator(e,t,i=!0){this.plugins.addPathGenerator(e,t),await this.refresh(i)}async addPlugin(e,t=!0){this.plugins.addPlugin(e),await this.refresh(t)}async addPreset(e,t,i=!1,s=!0){this.plugins.addPreset(e,t,i),await this.refresh(s)}async addShape(e,t,i,s,r,a=!0){let c,h=a,f,g,y;Ei(i)?(h=i,f=void 0):f=i,Ei(s)?(h=s,g=void 0):g=s,Ei(r)?(h=r,y=void 0):y=r,ef(t)?c={afterEffect:g,destroy:y,draw:t,init:f}:c=t,this.plugins.addShapeDrawer(e,c),await this.refresh(h)}dispatchEvent(e,t){this._eventDispatcher.dispatchEvent(e,t)}dom(){return this._domArray}domItem(e){const t=this.dom(),i=t[e];if(!i||i.destroyed){t.splice(e,1);return}return i}init(){this._initialized||(this._initialized=!0)}async load(e,t){return this.loadFromArray(e,t)}async loadFromArray(e,t,i){let s;return ry(e)?s=e:(s={},un(e)?s.id=e:s.options=e,hn(t)?s.index=t:s.options=t??s.options,s.index=i??s.index),this._loadParams(s)}async loadJSON(e,t,i){let s,r;return hn(t)||t===void 0?s=e:(r=e,s=t),this._loadParams({id:r,url:s,index:i})}async refresh(e=!0){e&&this.dom().forEach(t=>t.refresh())}removeEventListener(e,t){this._eventDispatcher.removeEventListener(e,t)}async set(e,t,i,s){const r={index:s};return un(e)?r.id=e:r.element=e,t instanceof HTMLElement?r.element=t:r.options=t,hn(i)?r.index=i:r.options=i??r.options,this._loadParams(r)}async setJSON(e,t,i,s){const r={};return e instanceof HTMLElement?(r.element=e,r.url=t,r.index=i):(r.id=e,r.element=t,r.url=i,r.index=s),this._loadParams(r)}setOnClickHandler(e){const t=this.dom();if(!t.length)throw new Error(`${Zt} can only set click handlers after calling tsParticles.load()`);for(const i of t)i.addClickHandler(e)}async _loadParams(e){const t=e.id??`tsparticles${Math.floor(Oe()*1e4)}`,{index:i,url:s}=e,r=s?await iy({fallback:e.options,url:s,index:i}):e.options;let a=e.element??document.getElementById(t);a||(a=document.createElement("div"),a.id=t,document.body.append(a));const c=ti(r,i),h=this.dom(),f=h.findIndex(b=>b.id===t);if(f>=0){const b=this.domItem(f);b&&!b.destroyed&&(b.destroy(),h.splice(f,1))}let g;if(a.tagName.toLowerCase()==="canvas")g=a,g.dataset[Sr]="false";else{const b=a.getElementsByTagName("canvas");b.length?(g=b[0],g.dataset[Sr]="false"):(g=document.createElement("canvas"),g.dataset[Sr]="true",a.appendChild(g))}g.style.width||(g.style.width="100%"),g.style.height||(g.style.height="100%");const y=new ey(this,t,c);return f>=0?h.splice(f,0,y):h.push(y),y.canvas.loadCanvas(g),await y.start(),y}}class ay{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){const t=e.value,i=t.hsl??e.value;if(i.h!==void 0&&i.s!==void 0&&i.l!==void 0)return js(i)}handleRangeColor(e){const t=e.value,i=t.hsl??e.value;if(i.h!==void 0&&i.l!==void 0)return js({h:ee(i.h),l:ee(i.l),s:ee(i.s)})}parseString(e){if(!e.startsWith("hsl"))return;const t=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i,i=t.exec(e);return i?Wm({a:i.length>4?Wh(i[5]):1,h:parseInt(i[1],10),l:parseInt(i[3],10),s:parseInt(i[2],10)}):void 0}}class ly{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){const t=e.value,i=t.rgb??e.value;if(i.r!==void 0)return i}handleRangeColor(e){const t=e.value,i=t.rgb??e.value;if(i.r!==void 0)return{r:ee(i.r),g:ee(i.g),b:ee(i.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const t=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i,i=t.exec(e);return i?{a:i.length>4?Wh(i[5]):1,b:parseInt(i[3],10),g:parseInt(i[2],10),r:parseInt(i[1],10)}:void 0}}function cy(){const n=new ly,e=new ay;Au(n),Au(e);const t=new oy;return t.init(),t}class Nn{constructor(e){this.container=e,this.type="external"}}class Wl{constructor(e){this.container=e,this.type="particles"}}const df=cy();Us()||(window.tsParticles=df);class Bo{static init(e){const t=new Bo,i=e.selector;if(!i)throw new Error("No selector provided");const s=document.querySelector(i);if(!s)throw new Error("No element found for selector");return df.set(i.replace(".","").replace("!",""),s,{fullScreen:{enable:!1},particles:{color:{value:e.color??"!000000"},links:{color:"random",distance:e.minDistance??120,enable:e.connectParticles??!1},move:{enable:!0,speed:e.speed??.5},number:{value:e.maxParticles??100},size:{value:{min:1,max:e.sizeVariations??3}}},responsive:e.responsive?.map(r=>({maxWidth:r.breakpoint,options:{particles:{color:{value:r.options?.color},links:{distance:r.options?.minDistance,enable:r.options?.connectParticles},number:{value:e.maxParticles},move:{enable:!0,speed:r.options?.speed},size:{value:r.options?.sizeVariations}}}}))}).then(r=>{t._container=r}),t}destroy(){const e=this._container;e&&e.destroy()}pauseAnimation(){const e=this._container;e&&e.pause()}resumeAnimation(){const e=this._container;e&&e.play()}}const uy=n=>{const e=(i,s)=>n.load(i,s);e.load=(i,s,r)=>{n.loadJSON(i,s).then(a=>{a&&r(a)}).catch(()=>{r(void 0)})},e.setOnClickHandler=i=>{n.setOnClickHandler(i)};const t=n.dom();return{particlesJS:e,pJSDom:t}},hy=n=>{const{particlesJS:e,pJSDom:t}=uy(n);return window.particlesJS=e,window.pJSDom=t,window.Particles=Bo,{particlesJS:e,pJSDom:t,Particles:Bo}};function fy(n){const e=n.initialPosition,{dx:t,dy:i}=At(e,n.position),s=Math.abs(t),r=Math.abs(i),{maxDistance:a}=n.retina,c=a.horizontal,h=a.vertical;if(!(!c&&!h)){if((c&&s>=c||h&&r>=h)&&!n.misplaced)n.misplaced=!!c&&s>c||!!h&&r>h,c&&(n.velocity.x=n.velocity.y/2-n.velocity.x),h&&(n.velocity.y=n.velocity.x/2-n.velocity.y);else if((!c||s<c)&&(!h||r<h)&&n.misplaced)n.misplaced=!1;else if(n.misplaced){const f=n.position,g=n.velocity;c&&(f.x<e.x&&g.x<0||f.x>e.x&&g.x>0)&&(g.x*=-Oe()),h&&(f.y<e.y&&g.y<0||f.y>e.y&&g.y>0)&&(g.y*=-Oe())}}}function dy(n,e,t,i,s,r){my(n,r);const a=n.gravity,c=a?.enable&&a.inverse?-1:1;s&&t&&(n.velocity.x+=s*r.factor/(60*t)),a?.enable&&t&&(n.velocity.y+=c*(a.acceleration*r.factor)/(60*t));const h=n.moveDecay;n.velocity.multTo(h);const f=n.velocity.mult(t);a?.enable&&i>0&&(!a.inverse&&f.y>=0&&f.y>=i||a.inverse&&f.y<=0&&f.y<=-i)&&(f.y=c*i,t&&(n.velocity.y=f.y/t));const g=n.options.zIndex,y=(1-n.zIndexFactor)**g.velocityRate;f.multTo(y);const{position:b}=n;b.addTo(f),e.vibrate&&(b.x+=Math.sin(b.x*Math.cos(b.y)),b.y+=Math.cos(b.y*Math.sin(b.x)))}function py(n,e){const t=n.container;if(!n.spin)return;const i={x:n.spin.direction==="clockwise"?Math.cos:Math.sin,y:n.spin.direction==="clockwise"?Math.sin:Math.cos};n.position.x=n.spin.center.x+n.spin.radius*i.x(n.spin.angle),n.position.y=n.spin.center.y+n.spin.radius*i.y(n.spin.angle),n.spin.radius+=n.spin.acceleration;const s=Math.max(t.canvas.size.width,t.canvas.size.height);n.spin.radius>s/2?(n.spin.radius=s/2,n.spin.acceleration*=-1):n.spin.radius<0&&(n.spin.radius=0,n.spin.acceleration*=-1),n.spin.angle+=e/100*(1-n.spin.radius/s)}function my(n,e){const t=n.options,i=t.move.path;if(!i.enable)return;if(n.lastPathTime<=n.pathDelay){n.lastPathTime+=e.value;return}const r=n.pathGenerator?.generate(n,e);r&&n.velocity.addTo(r),i.clamp&&(n.velocity.x=dn(n.velocity.x,-1,1),n.velocity.y=dn(n.velocity.y,-1,1)),n.lastPathTime-=n.pathDelay}function gy(n){return n.slow.inRange?n.slow.factor:1}const yy=2;class _y{constructor(){this._initSpin=e=>{const t=e.container,i=e.options,s=i.move.spin;if(!s.enable)return;const r=s.position??{x:50,y:50},a={x:r.x/100*t.canvas.size.width,y:r.y/100*t.canvas.size.height},c=e.getPosition(),h=zt(c,a),f=ee(s.acceleration);e.retina.spinAcceleration=f*t.retina.pixelRatio,e.spin={center:a,direction:e.velocity.x>=0?"clockwise":"counter-clockwise",angle:e.velocity.angle,radius:h,acceleration:e.retina.spinAcceleration}}}init(e){const t=e.options,i=t.move.gravity;e.gravity={enable:i.enable,acceleration:ee(i.acceleration),inverse:i.inverse},this._initSpin(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,t){const i=e.options,s=i.move;if(!s.enable)return;const r=e.container,a=r.retina.pixelRatio,c=gy(e),h=(e.retina.moveSpeed??=ee(s.speed)*a)*r.retina.reduceFactor,f=e.retina.moveDrift??=ee(e.options.move.drift)*a,g=wi(i.size.value)*a,y=s.size?e.getRadius()/g:1,b=h*y*c*(t.factor||1)/yy,x=e.retina.maxSpeed??r.retina.maxSpeed;s.spin.enable?py(e,b):dy(e,s,b,x,f,t),fy(e)}}async function vy(n,e=!0){await n.addMover("base",()=>new _y,e)}class by{draw(e,t,i){t.circleRange||(t.circleRange={min:0,max:Math.PI*2});const s=t.circleRange;e.arc(0,0,i,s.min,s.max,!1)}getSidesCount(){return 12}particleInit(e,t){const i=t.shapeData,s=i?.angle??{max:360,min:0};t.circleRange=Bs(s)?{min:s.min*Math.PI/180,max:s.max*Math.PI/180}:{min:0,max:s*Math.PI/180}}}async function wy(n,e=!0){await n.addShape("circle",new by,e)}function rl(n,e,t,i,s){if(!e||!t.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0)||(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=n.value),(e.delayTime??0)>0&&e.time<(e.delayTime??0)))return;const r=Rt(t.offset),a=(e.velocity??0)*n.factor+r*3.6,c=e.decay??1;!s||e.status==="increasing"?(e.value+=a,e.value>i&&(e.loops||(e.loops=0),e.loops++,s&&(e.status="decreasing",e.value-=e.value%i))):(e.value-=a,e.value<0&&(e.loops||(e.loops=0),e.loops++,e.status="increasing",e.value+=e.value)),e.velocity&&c!==1&&(e.velocity*=c),e.value>i&&(e.value%=i)}function Ey(n,e){const{h:t,s:i,l:s}=n.options.color.animation,{color:r}=n;if(!r)return;const{h:a,s:c,l:h}=r;a&&rl(e,a,t,360,!1),c&&rl(e,c,i,100,!0),h&&rl(e,h,s,100,!0)}class Ty{constructor(e){this.container=e}init(e){const t=Lr(e.options.color,e.id,e.options.reduceDuplicates);t&&(e.color=of(t,e.options.color.animation,this.container.retina.reduceFactor))}isEnabled(e){const{h:t,s:i,l:s}=e.options.color.animation,{color:r}=e;return!e.destroyed&&!e.spawning&&(r?.h.value!==void 0&&t.enable||r?.s.value!==void 0&&i.enable||r?.l.value!==void 0&&s.enable)}update(e,t){Ey(e,t)}}async function Iy(n,e=!0){await n.addParticleUpdater("color",t=>new Ty(t),e)}function Ay(n,e,t,i){switch(n.options.opacity.animation.destroy){case"max":e>=i&&n.destroy();break;case"min":e<=t&&n.destroy();break}}function Cy(n,e){const t=n.opacity;if(n.destroyed||!t?.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0))return;const i=t.min,s=t.max,r=t.decay??1;if(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),!((t.delayTime??0)>0&&t.time<(t.delayTime??0))){switch(t.status){case"increasing":t.value>=s?(t.status="decreasing",t.loops||(t.loops=0),t.loops++):t.value+=(t.velocity??0)*e.factor;break;case"decreasing":t.value<=i?(t.status="increasing",t.loops||(t.loops=0),t.loops++):t.value-=(t.velocity??0)*e.factor;break}t.velocity&&t.decay!==1&&(t.velocity*=r),Ay(n,t.value,i,s),n.destroyed||(t.value=dn(t.value,i,s))}}class Sy{constructor(e){this.container=e}init(e){const t=e.options.opacity;e.opacity=Jh(t,1);const i=t.animation;i.enable&&(e.opacity.velocity=ee(i.speed)/100*this.container.retina.reduceFactor,i.sync||(e.opacity.velocity*=Oe()))}isEnabled(e){return!e.destroyed&&!e.spawning&&!!e.opacity&&e.opacity.enable&&((e.opacity.maxLoops??0)<=0||(e.opacity.maxLoops??0)>0&&(e.opacity.loops??0)<(e.opacity.maxLoops??0))}reset(e){e.opacity&&(e.opacity.time=0,e.opacity.loops=0)}update(e,t){this.isEnabled(e)&&Cy(e,t)}}async function xy(n,e=!0){await n.addParticleUpdater("opacity",t=>new Sy(t),e)}function Py(n){if(n.outMode!=="bounce"&&n.outMode!=="bounce-horizontal"&&n.outMode!=="bounceHorizontal"&&n.outMode!=="split"||n.direction!=="left"&&n.direction!=="right")return;n.bounds.right<0&&n.direction==="left"?n.particle.position.x=n.size+n.offset.x:n.bounds.left>n.canvasSize.width&&n.direction==="right"&&(n.particle.position.x=n.canvasSize.width-n.size-n.offset.x);const e=n.particle.velocity.x;let t=!1;if(n.direction==="right"&&n.bounds.right>=n.canvasSize.width&&e>0||n.direction==="left"&&n.bounds.left<=0&&e<0){const s=ls(n.particle.options.bounce.horizontal);n.particle.velocity.x*=-s,t=!0}if(!t)return;const i=n.offset.x+n.size;n.bounds.right>=n.canvasSize.width&&n.direction==="right"?n.particle.position.x=n.canvasSize.width-i:n.bounds.left<=0&&n.direction==="left"&&(n.particle.position.x=i),n.outMode==="split"&&n.particle.destroy()}function ky(n){if(n.outMode!=="bounce"&&n.outMode!=="bounce-vertical"&&n.outMode!=="bounceVertical"&&n.outMode!=="split"||n.direction!=="bottom"&&n.direction!=="top")return;n.bounds.bottom<0&&n.direction==="top"?n.particle.position.y=n.size+n.offset.y:n.bounds.top>n.canvasSize.height&&n.direction==="bottom"&&(n.particle.position.y=n.canvasSize.height-n.size-n.offset.y);const e=n.particle.velocity.y;let t=!1;if(n.direction==="bottom"&&n.bounds.bottom>=n.canvasSize.height&&e>0||n.direction==="top"&&n.bounds.top<=0&&e<0){const s=ls(n.particle.options.bounce.vertical);n.particle.velocity.y*=-s,t=!0}if(!t)return;const i=n.offset.y+n.size;n.bounds.bottom>=n.canvasSize.height&&n.direction==="bottom"?n.particle.position.y=n.canvasSize.height-i:n.bounds.top<=0&&n.direction==="top"&&(n.particle.position.y=i),n.outMode==="split"&&n.particle.destroy()}class Ry{constructor(e){this.container=e,this.modes=["bounce","bounce-vertical","bounce-horizontal","bounceVertical","bounceHorizontal","split"]}update(e,t,i,s){if(!this.modes.includes(s))return;const r=this.container;let a=!1;for(const[,b]of r.plugins)if(b.particleBounce!==void 0&&(a=b.particleBounce(e,i,t)),a)break;if(a)return;const c=e.getPosition(),h=e.offset,f=e.getRadius(),g=Kr(c,f),y=r.canvas.size;Py({particle:e,outMode:s,direction:t,bounds:g,canvasSize:y,offset:h,size:f}),ky({particle:e,outMode:s,direction:t,bounds:g,canvasSize:y,offset:h,size:f})}}class Dy{constructor(e){this.container=e,this.modes=["destroy"]}update(e,t,i,s){if(!this.modes.includes(s))return;const r=this.container;switch(e.outType){case"normal":case"outside":if(jl(e.position,r.canvas.size,nt.origin,e.getRadius(),t))return;break;case"inside":{const{dx:a,dy:c}=At(e.position,e.moveCenter),{x:h,y:f}=e.velocity;if(h<0&&a>e.moveCenter.radius||f<0&&c>e.moveCenter.radius||h>=0&&a<-e.moveCenter.radius||f>=0&&c<-e.moveCenter.radius)return;break}}r.particles.remove(e,void 0,!0)}}class Oy{constructor(e){this.container=e,this.modes=["none"]}update(e,t,i,s){if(!this.modes.includes(s)||e.options.move.distance.horizontal&&(t==="left"||t==="right")||e.options.move.distance.vertical&&(t==="top"||t==="bottom"))return;const r=e.options.move.gravity,a=this.container,c=a.canvas.size,h=e.getRadius();if(r.enable){const f=e.position;(!r.inverse&&f.y>c.height+h&&t==="bottom"||r.inverse&&f.y<-h&&t==="top")&&a.particles.remove(e)}else{if(e.velocity.y>0&&e.position.y<=c.height+h||e.velocity.y<0&&e.position.y>=-h||e.velocity.x>0&&e.position.x<=c.width+h||e.velocity.x<0&&e.position.x>=-h)return;jl(e.position,a.canvas.size,nt.origin,h,t)||a.particles.remove(e)}}}class My{constructor(e){this.container=e,this.modes=["out"]}update(e,t,i,s){if(!this.modes.includes(s))return;const r=this.container;switch(e.outType){case"inside":{const{x:a,y:c}=e.velocity,h=nt.origin;h.length=e.moveCenter.radius,h.angle=e.velocity.angle+Math.PI,h.addTo(nt.create(e.moveCenter));const{dx:f,dy:g}=At(e.position,h);if(a<=0&&f>=0||c<=0&&g>=0||a>=0&&f<=0||c>=0&&g<=0)return;e.position.x=Math.floor(Rt({min:0,max:r.canvas.size.width})),e.position.y=Math.floor(Rt({min:0,max:r.canvas.size.height}));const{dx:y,dy:b}=At(e.position,e.moveCenter);e.direction=Math.atan2(-b,-y),e.velocity.angle=e.direction;break}default:{if(jl(e.position,r.canvas.size,nt.origin,e.getRadius(),t))return;switch(e.outType){case"outside":{e.position.x=Math.floor(Rt({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(Rt({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;const{dx:a,dy:c}=At(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(c,a),e.velocity.angle=e.direction);break}case"normal":{const a=e.options.move.warp,c=r.canvas.size,h={bottom:c.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:c.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},f=e.getRadius(),g=Kr(e.position,f);t==="right"&&g.left>c.width+e.offset.x?(e.position.x=h.left,e.initialPosition.x=e.position.x,a||(e.position.y=Oe()*c.height,e.initialPosition.y=e.position.y)):t==="left"&&g.right<-e.offset.x&&(e.position.x=h.right,e.initialPosition.x=e.position.x,a||(e.position.y=Oe()*c.height,e.initialPosition.y=e.position.y)),t==="bottom"&&g.top>c.height+e.offset.y?(a||(e.position.x=Oe()*c.width,e.initialPosition.x=e.position.x),e.position.y=h.top,e.initialPosition.y=e.position.y):t==="top"&&g.bottom<-e.offset.y&&(a||(e.position.x=Oe()*c.width,e.initialPosition.x=e.position.x),e.position.y=h.bottom,e.initialPosition.y=e.position.y);break}}break}}}}class Vy{constructor(e){this.container=e,this._updateOutMode=(t,i,s,r)=>{for(const a of this.updaters)a.update(t,r,i,s)},this.updaters=[new Ry(e),new Dy(e),new My(e),new Oy(e)]}init(){}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,t){const i=e.options.move.outModes;this._updateOutMode(e,t,i.bottom??i.default,"bottom"),this._updateOutMode(e,t,i.left??i.default,"left"),this._updateOutMode(e,t,i.right??i.default,"right"),this._updateOutMode(e,t,i.top??i.default,"top")}}async function Ly(n,e=!0){await n.addParticleUpdater("outModes",t=>new Vy(t),e)}function Ny(n,e,t,i){switch(n.options.size.animation.destroy){case"max":e>=i&&n.destroy();break;case"min":e<=t&&n.destroy();break}}function Fy(n,e){const t=n.size;if(n.destroyed||!t||!t.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0))return;const i=(t.velocity??0)*e.factor,s=t.min,r=t.max,a=t.decay??1;if(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),!((t.delayTime??0)>0&&t.time<(t.delayTime??0))){switch(t.status){case"increasing":t.value>=r?(t.status="decreasing",t.loops||(t.loops=0),t.loops++):t.value+=i;break;case"decreasing":t.value<=s?(t.status="increasing",t.loops||(t.loops=0),t.loops++):t.value-=i}t.velocity&&a!==1&&(t.velocity*=a),Ny(n,t.value,s,r),n.destroyed||(t.value=dn(t.value,s,r))}}class zy{init(e){const t=e.container,i=e.options.size,s=i.animation;s.enable&&(e.size.velocity=(e.retina.sizeAnimationSpeed??t.retina.sizeAnimationSpeed)/100*t.retina.reduceFactor,s.sync||(e.size.velocity*=Oe()))}isEnabled(e){return!e.destroyed&&!e.spawning&&e.size.enable&&((e.size.maxLoops??0)<=0||(e.size.maxLoops??0)>0&&(e.size.loops??0)<(e.size.maxLoops??0))}reset(e){e.size.loops=0}update(e,t){this.isEnabled(e)&&Fy(e,t)}}async function By(n,e=!0){await n.addParticleUpdater("size",()=>new zy,e)}async function $y(n,e=!0){await vy(n,!1),await wy(n,!1),await Iy(n,!1),await xy(n,!1),await Ly(n,!1),await By(n,!1),await n.refresh(e)}async function Uy(){Ga("ease-in-quad",n=>n**2),Ga("ease-out-quad",n=>1-(1-n)**2),Ga("ease-in-out-quad",n=>n<.5?2*n**2:1-(-2*n+2)**2/2)}class jy{constructor(){this.distance=200,this.duration=.4,this.easing="ease-out-quad",this.factor=1,this.maxSpeed=50,this.speed=1}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed),e.speed!==void 0&&(this.speed=e.speed))}}let qy=class extends Nn{constructor(e,t){super(t),this._clickAttract=()=>{const i=this.container;i.attract||(i.attract={particles:[]});const{attract:s}=i;if(s.finish||(s.count||(s.count=0),s.count++,s.count===i.particles.count&&(s.finish=!0)),s.clicking){const r=i.interactivity.mouse.clickPosition,a=i.retina.attractModeDistance;if(!a||a<0||!r)return;this._processAttract(r,a,new bt(r.x,r.y,a))}else s.clicking===!1&&(s.particles=[])},this._hoverAttract=()=>{const i=this.container,s=i.interactivity.mouse.position,r=i.retina.attractModeDistance;!r||r<0||!s||this._processAttract(s,r,new bt(s.x,s.y,r))},this._processAttract=(i,s,r)=>{const a=this.container,c=a.actualOptions.interactivity.modes.attract;if(!c)return;const h=a.particles.quadTree.query(r,f=>this.isEnabled(f));for(const f of h){const{dx:g,dy:y,distance:b}=At(f.position,i),x=c.speed*c.factor,M=dn(Gh(c.easing)(1-b/s)*x,0,c.maxSpeed),V=nt.create(b===0?x:g/b*M,b===0?x:y/b*M);f.position.subFrom(V)}},this._engine=e,t.attract||(t.attract={particles:[]}),this.handleClickMode=i=>{const s=this.container.actualOptions,r=s.interactivity.modes.attract;if(!(!r||i!=="attract")){t.attract||(t.attract={particles:[]}),t.attract.clicking=!0,t.attract.count=0;for(const a of t.attract.particles)this.isEnabled(a)&&a.velocity.setTo(a.initialVelocity);t.attract.particles=[],t.attract.finish=!1,setTimeout(()=>{t.destroyed||(t.attract||(t.attract={particles:[]}),t.attract.clicking=!1)},r.duration*1e3)}}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.attract;t&&(e.retina.attractModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions,i=e.interactivity.status===as,s=t.interactivity.events,r=s.onHover.enable,a=s.onHover.mode,c=s.onClick.enable,h=s.onClick.mode;i&&r&&Ue("attract",a)?this._hoverAttract():c&&Ue("attract",h)&&this._clickAttract()}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=(e?.interactivity??i.interactivity).events;if((!s.position||!r.onHover.enable)&&(!s.clickPosition||!r.onClick.enable))return!1;const a=r.onHover.mode,c=r.onClick.mode;return Ue("attract",a)||Ue("attract",c)}loadModeOptions(e,...t){e.attract||(e.attract=new jy);for(const i of t)e.attract.load(i?.attract)}reset(){}};async function Hy(n,e=!0){await n.addInteractor("externalAttract",t=>new qy(n,t),e)}class Gy{constructor(){this.distance=200}load(e){e&&e.distance!==void 0&&(this.distance=e.distance)}}class Wy extends Nn{constructor(e){super(e),this._processBounce=(t,i,s)=>{const r=this.container.particles.quadTree.query(s,a=>this.isEnabled(a));for(const a of r)s instanceof bt?Xh(El(a),{position:t,mass:i**2*Math.PI/2,velocity:nt.origin,factor:nt.origin}):s instanceof pn&&jm(a,Kr(t,i))},this._processMouseBounce=()=>{const t=this.container,i=t.retina.pixelRatio,s=10*i,r=t.interactivity.mouse.position,a=t.retina.bounceModeDistance;!a||a<0||!r||this._processBounce(r,a,new bt(r.x,r.y,a+s))},this._singleSelectorBounce=(t,i)=>{const s=this.container,r=document.querySelectorAll(t);r.length&&r.forEach(a=>{const c=a,h=s.retina.pixelRatio,f={x:(c.offsetLeft+c.offsetWidth/2)*h,y:(c.offsetTop+c.offsetHeight/2)*h},g=c.offsetWidth/2*h,y=10*h,b=i.type==="circle"?new bt(f.x,f.y,g+y):new pn(c.offsetLeft*h-y,c.offsetTop*h-y,c.offsetWidth*h+y*2,c.offsetHeight*h+y*2);this._processBounce(f,g,b)})}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bounce;t&&(e.retina.bounceModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions,i=t.interactivity.events,s=e.interactivity.status===as,r=i.onHover.enable,a=i.onHover.mode,c=i.onDiv;s&&r&&Ue("bounce",a)?this._processMouseBounce():Hl("bounce",c,(h,f)=>this._singleSelectorBounce(h,f))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=(e?.interactivity??i.interactivity).events,a=r.onDiv;return s.position&&r.onHover.enable&&Ue("bounce",r.onHover.mode)||ql("bounce",a)}loadModeOptions(e,...t){e.bounce||(e.bounce=new Gy);for(const i of t)e.bounce.load(i?.bounce)}reset(){}}async function Ky(n,e=!0){await n.addInteractor("externalBounce",t=>new Wy(t),e)}class pf{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(e){if(e){if(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.mix!==void 0&&(this.mix=e.mix),e.opacity!==void 0&&(this.opacity=e.opacity),e.color!==void 0){const t=Bt(this.color)?void 0:this.color;this.color=it(e.color,i=>ct.create(t,i))}e.size!==void 0&&(this.size=e.size)}}}class Qy extends pf{constructor(){super(),this.selectors=[]}get ids(){return it(this.selectors,e=>e.replace("#",""))}set ids(e){this.selectors=it(e,t=>`#${t}`)}load(e){super.load(e),e&&(e.ids!==void 0&&(this.ids=e.ids),e.selectors!==void 0&&(this.selectors=e.selectors))}}class Xy extends pf{load(e){super.load(e),e&&(this.divs=it(e.divs,t=>{const i=new Qy;return i.load(t),i}))}}function Mu(n,e,t,i){if(e>=t){const s=n+(e-t)*i;return dn(s,n,e)}else if(e<t){const s=n-(t-e)*i;return dn(s,e,n)}}class Yy extends Nn{constructor(e){super(e),this._clickBubble=()=>{const t=this.container,i=t.actualOptions,s=t.interactivity.mouse.clickPosition,r=i.interactivity.modes.bubble;if(!r||!s)return;t.bubble||(t.bubble={});const a=t.retina.bubbleModeDistance;if(!a||a<0)return;const c=t.particles.quadTree.queryCircle(s,a,f=>this.isEnabled(f)),{bubble:h}=t;for(const f of c){if(!h.clicking)continue;f.bubble.inRange=!h.durationEnd;const g=f.getPosition(),y=zt(g,s),b=(new Date().getTime()-(t.interactivity.mouse.clickTime||0))/1e3;b>r.duration&&(h.durationEnd=!0),b>r.duration*2&&(h.clicking=!1,h.durationEnd=!1);const x={bubbleObj:{optValue:t.retina.bubbleModeSize,value:f.bubble.radius},particlesObj:{optValue:wi(f.options.size.value)*t.retina.pixelRatio,value:f.size.value},type:"size"};this._process(f,y,b,x);const M={bubbleObj:{optValue:r.opacity,value:f.bubble.opacity},particlesObj:{optValue:wi(f.options.opacity.value),value:f.opacity?.value??1},type:"opacity"};this._process(f,y,b,M),!h.durationEnd&&y<=a?this._hoverBubbleColor(f,y):delete f.bubble.color}},this._hoverBubble=()=>{const t=this.container,i=t.interactivity.mouse.position,s=t.retina.bubbleModeDistance;if(!s||s<0||i===void 0)return;const r=t.particles.quadTree.queryCircle(i,s,a=>this.isEnabled(a));for(const a of r){a.bubble.inRange=!0;const c=a.getPosition(),h=zt(c,i),f=1-h/s;h<=s?f>=0&&t.interactivity.status===as&&(this._hoverBubbleSize(a,f),this._hoverBubbleOpacity(a,f),this._hoverBubbleColor(a,f)):this.reset(a),t.interactivity.status===bl&&this.reset(a)}},this._hoverBubbleColor=(t,i,s)=>{const r=this.container.actualOptions,a=s??r.interactivity.modes.bubble;if(a){if(!t.bubble.finalColor){const c=a.color;if(!c)return;const h=ti(c);t.bubble.finalColor=Lr(h)}if(t.bubble.finalColor)if(a.mix){t.bubble.color=void 0;const c=t.getFillColor();t.bubble.color=c?nf(Gl(c,t.bubble.finalColor,1-i,i)):t.bubble.finalColor}else t.bubble.color=t.bubble.finalColor}},this._hoverBubbleOpacity=(t,i,s)=>{const r=this.container,a=r.actualOptions,c=s?.opacity??a.interactivity.modes.bubble?.opacity;if(!c)return;const h=t.options.opacity.value,f=t.opacity?.value??1,g=Mu(f,c,wi(h),i);g!==void 0&&(t.bubble.opacity=g)},this._hoverBubbleSize=(t,i,s)=>{const r=this.container,a=s?.size?s.size*r.retina.pixelRatio:r.retina.bubbleModeSize;if(a===void 0)return;const c=wi(t.options.size.value)*r.retina.pixelRatio,h=t.size.value,f=Mu(h,a,c,i);f!==void 0&&(t.bubble.radius=f)},this._process=(t,i,s,r)=>{const a=this.container,c=r.bubbleObj.optValue,h=a.actualOptions,f=h.interactivity.modes.bubble;if(!f||c===void 0)return;const g=f.duration,y=a.retina.bubbleModeDistance,b=r.particlesObj.optValue,x=r.bubbleObj.value,M=r.particlesObj.value||0,V=r.type;if(!(!y||y<0||c===b))if(a.bubble||(a.bubble={}),a.bubble.durationEnd)x&&(V==="size"&&delete t.bubble.radius,V==="opacity"&&delete t.bubble.opacity);else if(i<=y){if((x??M)!==c){const L=M-s*(M-c)/g;V==="size"&&(t.bubble.radius=L),V==="opacity"&&(t.bubble.opacity=L)}}else V==="size"&&delete t.bubble.radius,V==="opacity"&&delete t.bubble.opacity},this._singleSelectorHover=(t,i,s)=>{const r=this.container,a=document.querySelectorAll(i),c=r.actualOptions.interactivity.modes.bubble;!c||!a.length||a.forEach(h=>{const f=h,g=r.retina.pixelRatio,y={x:(f.offsetLeft+f.offsetWidth/2)*g,y:(f.offsetTop+f.offsetHeight/2)*g},b=f.offsetWidth/2*g,x=s.type==="circle"?new bt(y.x,y.y,b):new pn(f.offsetLeft*g,f.offsetTop*g,f.offsetWidth*g,f.offsetHeight*g),M=r.particles.quadTree.query(x,V=>this.isEnabled(V));for(const V of M){if(!x.contains(V.getPosition()))continue;V.bubble.inRange=!0;const $=c.divs,L=Qh($,f);(!V.bubble.div||V.bubble.div!==f)&&(this.clear(V,t,!0),V.bubble.div=f),this._hoverBubbleSize(V,1,L),this._hoverBubbleOpacity(V,1,L),this._hoverBubbleColor(V,1,L)}})},e.bubble||(e.bubble={}),this.handleClickMode=t=>{t==="bubble"&&(e.bubble||(e.bubble={}),e.bubble.clicking=!0)}}clear(e,t,i){e.bubble.inRange&&!i||(delete e.bubble.div,delete e.bubble.opacity,delete e.bubble.radius,delete e.bubble.color)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bubble;t&&(e.retina.bubbleModeDistance=t.distance*e.retina.pixelRatio,t.size!==void 0&&(e.retina.bubbleModeSize=t.size*e.retina.pixelRatio))}async interact(e){const t=this.container.actualOptions,i=t.interactivity.events,s=i.onHover,r=i.onClick,a=s.enable,c=s.mode,h=r.enable,f=r.mode,g=i.onDiv;a&&Ue("bubble",c)?this._hoverBubble():h&&Ue("bubble",f)?this._clickBubble():Hl("bubble",g,(y,b)=>this._singleSelectorHover(e,y,b))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=(e?.interactivity??i.interactivity).events,{onClick:a,onDiv:c,onHover:h}=r,f=ql("bubble",c);return f||h.enable&&s.position||a.enable&&s.clickPosition?Ue("bubble",h.mode)||Ue("bubble",a.mode)||f:!1}loadModeOptions(e,...t){e.bubble||(e.bubble=new Xy);for(const i of t)e.bubble.load(i?.bubble)}reset(e){e.bubble.inRange=!1}}async function Jy(n,e=!0){await n.addInteractor("externalBubble",t=>new Yy(t),e)}class Zy{constructor(){this.opacity=.5}load(e){e&&e.opacity!==void 0&&(this.opacity=e.opacity)}}class e_{constructor(){this.distance=80,this.links=new Zy,this.radius=60}get lineLinked(){return this.links}set lineLinked(e){this.links=e}get line_linked(){return this.links}set line_linked(e){this.links=e}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links??e.lineLinked??e.line_linked),e.radius!==void 0&&(this.radius=e.radius))}}function t_(n,e,t,i){const s=Math.floor(t.getRadius()/e.getRadius()),r=e.getFillColor(),a=t.getFillColor();if(!r||!a)return;const c=e.getPosition(),h=t.getPosition(),f=Gl(r,a,e.getRadius(),t.getRadius()),g=n.createLinearGradient(c.x,c.y,h.x,h.y);return g.addColorStop(0,Nr(r,i)),g.addColorStop(s>1?1:s,ni(f,i)),g.addColorStop(1,Nr(a,i)),g}function n_(n,e,t,i,s){xr(n,i,s),n.lineWidth=e,n.strokeStyle=t,n.stroke()}function i_(n,e,t,i){const s=n.actualOptions,r=s.interactivity.modes.connect;if(r)return t_(e,t,i,r.links.opacity)}function s_(n,e,t){n.canvas.draw(i=>{const s=i_(n,i,e,t);if(!s)return;const r=e.getPosition(),a=t.getPosition();n_(i,e.retina.linksWidth??0,s,r,a)})}class r_ extends Nn{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.connect;t&&(e.retina.connectModeDistance=t.distance*e.retina.pixelRatio,e.retina.connectModeRadius=t.radius*e.retina.pixelRatio)}async interact(){const e=this.container;if(e.actualOptions.interactivity.events.onHover.enable&&e.interactivity.status==="pointermove"){const i=e.interactivity.mouse.position;if(!e.retina.connectModeDistance||e.retina.connectModeDistance<0||!e.retina.connectModeRadius||e.retina.connectModeRadius<0||!i)return;const s=Math.abs(e.retina.connectModeRadius),r=e.particles.quadTree.queryCircle(i,s,c=>this.isEnabled(c));let a=0;for(const c of r){const h=c.getPosition();for(const f of r.slice(a+1)){const g=f.getPosition(),y=Math.abs(e.retina.connectModeDistance),b=Math.abs(h.x-g.x),x=Math.abs(h.y-g.y);b<y&&x<y&&s_(e,c,f)}++a}}}isEnabled(e){const t=this.container,i=t.interactivity.mouse,s=(e?.interactivity??t.actualOptions.interactivity).events;return s.onHover.enable&&i.position?Ue("connect",s.onHover.mode):!1}loadModeOptions(e,...t){e.connect||(e.connect=new e_);for(const i of t)e.connect.load(i?.connect)}reset(){}}async function o_(n,e=!0){await n.addInteractor("externalConnect",t=>new r_(t),e)}class a_{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(e){e&&(e.blink!==void 0&&(this.blink=e.blink),e.color!==void 0&&(this.color=ct.create(this.color,e.color)),e.consent!==void 0&&(this.consent=e.consent),e.opacity!==void 0&&(this.opacity=e.opacity))}}class l_{constructor(){this.distance=100,this.links=new a_}get lineLinked(){return this.links}set lineLinked(e){this.links=e}get line_linked(){return this.links}set line_linked(e){this.links=e}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links??e.lineLinked??e.line_linked))}}function c_(n,e,t,i,s,r){xr(n,t,i),n.strokeStyle=ni(s,r),n.lineWidth=e,n.stroke()}function u_(n,e,t,i,s){n.canvas.draw(r=>{const a=e.getPosition();c_(r,e.retina.linksWidth??0,a,s,t,i)})}class h_ extends Nn{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.grab;t&&(e.retina.grabModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions,i=t.interactivity;if(!i.modes.grab||!i.events.onHover.enable||e.interactivity.status!==as)return;const s=e.interactivity.mouse.position;if(!s)return;const r=e.retina.grabModeDistance;if(!r||r<0)return;const a=e.particles.quadTree.queryCircle(s,r,c=>this.isEnabled(c));for(const c of a){const h=c.getPosition(),f=zt(h,s);if(f>r)continue;const g=i.modes.grab.links,y=g.opacity,b=y-f*y/r;if(b<=0)continue;const x=g.color??c.options.links?.color;if(!e.particles.grabLineColor&&x){const V=i.modes.grab.links;e.particles.grabLineColor=rf(x,V.blink,V.consent)}const M=Tl(c,void 0,e.particles.grabLineColor);M&&u_(e,c,M,b,s)}}isEnabled(e){const t=this.container,i=t.interactivity.mouse,s=(e?.interactivity??t.actualOptions.interactivity).events;return s.onHover.enable&&!!i.position&&Ue("grab",s.onHover.mode)}loadModeOptions(e,...t){e.grab||(e.grab=new l_);for(const i of t)e.grab.load(i?.grab)}reset(){}}async function f_(n,e=!0){await n.addInteractor("externalGrab",t=>new h_(t),e)}class d_ extends Nn{constructor(e){super(e),this.handleClickMode=t=>{if(t!=="pause")return;const i=this.container;i.getAnimationStatus()?i.pause():i.play()}}clear(){}init(){}async interact(){}isEnabled(){return!0}reset(){}}async function p_(n,e=!0){await n.addInteractor("externalPause",t=>new d_(t),e)}class m_{constructor(){this.default=!0,this.groups=[],this.quantity=4}get particles_nb(){return this.quantity}set particles_nb(e){this.quantity=fe(e)}load(e){if(!e)return;e.default!==void 0&&(this.default=e.default),e.groups!==void 0&&(this.groups=e.groups.map(i=>i)),this.groups.length||(this.default=!0);const t=e.quantity??e.particles_nb;t!==void 0&&(this.quantity=fe(t))}}class g_ extends Nn{constructor(e){super(e),this.handleClickMode=t=>{if(t!=="push")return;const i=this.container,s=i.actualOptions,r=s.interactivity.modes.push;if(!r)return;const a=ee(r.quantity);if(a<=0)return;const c=ia([void 0,...r.groups]),h=c!==void 0?i.actualOptions.particles.groups[c]:void 0;i.particles.push(a,i.interactivity.mouse,h,c)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.push||(e.push=new m_);for(const i of t)e.push.load(i?.push)}reset(){}}async function y_(n,e=!0){await n.addInteractor("externalPush",t=>new g_(t),e)}class __{constructor(){this.quantity=2}get particles_nb(){return this.quantity}set particles_nb(e){this.quantity=fe(e)}load(e){if(!e)return;const t=e.quantity??e.particles_nb;t!==void 0&&(this.quantity=fe(t))}}class v_ extends Nn{constructor(e){super(e),this.handleClickMode=t=>{const i=this.container,s=i.actualOptions;if(!s.interactivity.modes.remove||t!=="remove")return;const r=ee(s.interactivity.modes.remove.quantity);i.particles.removeQuantity(r)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.remove||(e.remove=new __);for(const i of t)e.remove.load(i?.remove)}reset(){}}async function b_(n,e=!0){await n.addInteractor("externalRemove",t=>new v_(t),e)}class mf{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing="ease-out-quad"}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.speed!==void 0&&(this.speed=e.speed),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed))}}class w_ extends mf{constructor(){super(),this.selectors=[]}get ids(){return it(this.selectors,e=>e.replace("#",""))}set ids(e){this.selectors=it(e,t=>`#${t}`)}load(e){super.load(e),e&&(e.ids!==void 0&&(this.ids=e.ids),e.selectors!==void 0&&(this.selectors=e.selectors))}}class E_ extends mf{load(e){super.load(e),e&&(this.divs=it(e.divs,t=>{const i=new w_;return i.load(t),i}))}}class T_ extends Nn{constructor(e,t){super(t),this._clickRepulse=()=>{const i=this.container,s=i.actualOptions.interactivity.modes.repulse;if(!s)return;const r=i.repulse||{particles:[]};if(r.finish||(r.count||(r.count=0),r.count++,r.count===i.particles.count&&(r.finish=!0)),r.clicking){const a=i.retina.repulseModeDistance;if(!a||a<0)return;const c=Math.pow(a/6,3),h=i.interactivity.mouse.clickPosition;if(h===void 0)return;const f=new bt(h.x,h.y,c),g=i.particles.quadTree.query(f,y=>this.isEnabled(y));for(const y of g){const{dx:b,dy:x,distance:M}=At(h,y.position),V=M**2,$=s.speed,L=-c*$/V;if(V<=c){r.particles.push(y);const j=nt.create(b,x);j.length=L,y.velocity.setTo(j)}}}else if(r.clicking===!1){for(const a of r.particles)a.velocity.setTo(a.initialVelocity);r.particles=[]}},this._hoverRepulse=()=>{const i=this.container,s=i.interactivity.mouse.position,r=i.retina.repulseModeDistance;!r||r<0||!s||this._processRepulse(s,r,new bt(s.x,s.y,r))},this._processRepulse=(i,s,r,a)=>{const c=this.container,h=c.particles.quadTree.query(r,g=>this.isEnabled(g)),f=c.actualOptions.interactivity.modes.repulse;if(f)for(const g of h){const{dx:y,dy:b,distance:x}=At(g.position,i),M=(a?.speed??f.speed)*f.factor,V=dn(Gh(f.easing)(1-x/s)*M,0,f.maxSpeed),$=nt.create(x===0?M:y/x*V,x===0?M:b/x*V);g.position.addTo($)}},this._singleSelectorRepulse=(i,s)=>{const r=this.container,a=r.actualOptions.interactivity.modes.repulse;if(!a)return;const c=document.querySelectorAll(i);c.length&&c.forEach(h=>{const f=h,g=r.retina.pixelRatio,y={x:(f.offsetLeft+f.offsetWidth/2)*g,y:(f.offsetTop+f.offsetHeight/2)*g},b=f.offsetWidth/2*g,x=s.type==="circle"?new bt(y.x,y.y,b):new pn(f.offsetLeft*g,f.offsetTop*g,f.offsetWidth*g,f.offsetHeight*g),M=a.divs,V=Qh(M,f);this._processRepulse(y,b,x,V)})},this._engine=e,t.repulse||(t.repulse={particles:[]}),this.handleClickMode=i=>{const s=this.container.actualOptions,r=s.interactivity.modes.repulse;if(!r||i!=="repulse")return;t.repulse||(t.repulse={particles:[]});const a=t.repulse;a.clicking=!0,a.count=0;for(const c of t.repulse.particles)this.isEnabled(c)&&c.velocity.setTo(c.initialVelocity);a.particles=[],a.finish=!1,setTimeout(()=>{t.destroyed||(a.clicking=!1)},r.duration*1e3)}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.repulse;t&&(e.retina.repulseModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions,i=e.interactivity.status===as,s=t.interactivity.events,r=s.onHover,a=r.enable,c=r.mode,h=s.onClick,f=h.enable,g=h.mode,y=s.onDiv;i&&a&&Ue("repulse",c)?this._hoverRepulse():f&&Ue("repulse",g)?this._clickRepulse():Hl("repulse",y,(b,x)=>this._singleSelectorRepulse(b,x))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=(e?.interactivity??i.interactivity).events,a=r.onDiv,c=r.onHover,h=r.onClick,f=ql("repulse",a);if(!(f||c.enable&&s.position||h.enable&&s.clickPosition))return!1;const g=c.mode,y=h.mode;return Ue("repulse",g)||Ue("repulse",y)||f}loadModeOptions(e,...t){e.repulse||(e.repulse=new E_);for(const i of t)e.repulse.load(i?.repulse)}reset(){}}async function I_(n,e=!0){await n.addInteractor("externalRepulse",t=>new T_(n,t),e)}class A_{constructor(){this.factor=3,this.radius=200}load(e){e&&(e.factor!==void 0&&(this.factor=e.factor),e.radius!==void 0&&(this.radius=e.radius))}}class C_ extends Nn{constructor(e){super(e)}clear(e,t,i){e.slow.inRange&&!i||(e.slow.factor=1)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.slow;t&&(e.retina.slowModeRadius=t.radius*e.retina.pixelRatio)}async interact(){}isEnabled(e){const t=this.container,i=t.interactivity.mouse,s=(e?.interactivity??t.actualOptions.interactivity).events;return s.onHover.enable&&!!i.position&&Ue("slow",s.onHover.mode)}loadModeOptions(e,...t){e.slow||(e.slow=new A_);for(const i of t)e.slow.load(i?.slow)}reset(e){e.slow.inRange=!1;const t=this.container,i=t.actualOptions,s=t.interactivity.mouse.position,r=t.retina.slowModeRadius,a=i.interactivity.modes.slow;if(!a||!r||r<0||!s)return;const c=e.getPosition(),h=zt(s,c),f=h/r,g=a.factor,{slow:y}=e;h>r||(y.inRange=!0,y.factor=f/g)}}async function S_(n,e=!0){await n.addInteractor("externalSlow",t=>new C_(t),e)}const ol=[0,4,2,1],Vu=[8,8,4,2];class x_{constructor(e){this.pos=0,this.data=new Uint8ClampedArray(e)}getString(e){const t=this.data.slice(this.pos,this.pos+e);return this.pos+=t.length,t.reduce((i,s)=>i+String.fromCharCode(s),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let e="",t=0;do{t=this.data[this.pos++];for(let i=t;--i>=0;e+=String.fromCharCode(this.data[this.pos++]));}while(t!==0);return e}readSubBlocksBin(){let e=0,t=0;for(let s=0;(e=this.data[this.pos+s])!==0;s+=e+1)t+=e;const i=new Uint8Array(t);for(let s=0;(e=this.data[this.pos++])!==0;)for(let r=e;--r>=0;i[s++]=this.data[this.pos++]);return i}skipSubBlocks(){for(;this.data[this.pos]!==0;this.pos+=this.data[this.pos]+1);this.pos++}}function gf(n,e){const t=[];for(let i=0;i<e;i++)t.push({r:n.data[n.pos],g:n.data[n.pos+1],b:n.data[n.pos+2]}),n.pos+=3;return t}async function P_(n,e,t,i){switch(n.nextByte()){case 249:{const s=e.frames[t(!1)];n.pos++;const r=n.nextByte();s.GCreserved=(r&224)>>>5,s.disposalMethod=(r&28)>>>2,s.userInputDelayFlag=(r&2)===2;const a=(r&1)===1;s.delayTime=n.nextTwoBytes()*10;const c=n.nextByte();a&&i(c),n.pos++;break}case 255:{n.pos++;const s={identifier:n.getString(8),authenticationCode:n.getString(3),data:n.readSubBlocksBin()};e.applicationExtensions.push(s);break}case 254:{e.comments.push([t(!1),n.readSubBlocks()]);break}case 1:{if(e.globalColorTable.length===0)throw new EvalError("plain text extension without global color table");n.pos++,e.frames[t(!1)].plainTextData={left:n.nextTwoBytes(),top:n.nextTwoBytes(),width:n.nextTwoBytes(),height:n.nextTwoBytes(),charSize:{width:n.nextTwoBytes(),height:n.nextTwoBytes()},foregroundColor:n.nextByte(),backgroundColor:n.nextByte(),text:n.readSubBlocks()};break}default:n.skipSubBlocks();break}}async function k_(n,e,t,i,s,r){const a=e.frames[i(!0)];a.left=n.nextTwoBytes(),a.top=n.nextTwoBytes(),a.width=n.nextTwoBytes(),a.height=n.nextTwoBytes();const c=n.nextByte(),h=(c&128)===128,f=(c&64)===64;a.sortFlag=(c&32)===32,a.reserved=(c&24)>>>3;const g=1<<(c&7)+1;h&&(a.localColorTable=gf(n,g));const y=L=>{const{r:j,g:G,b:U}=(h?a.localColorTable:e.globalColorTable)[L];return{r:j,g:G,b:U,a:L===s(null)?t?~~((j+G+U)/3):0:255}},b=(()=>{try{return new ImageData(a.width,a.height,{colorSpace:"srgb"})}catch(L){if(L instanceof DOMException&&L.name==="IndexSizeError")return null;throw L}})();if(b==null)throw new EvalError("GIF frame size is to large");const x=n.nextByte(),M=n.readSubBlocksBin(),V=1<<x,$=(L,j)=>{const G=L>>>3,U=L&7;return(M[G]+(M[G+1]<<8)+(M[G+2]<<16)&(1<<j)-1<<U)>>>U};if(f){for(let L=0,j=x+1,G=0,U=[[0]],ve=0;ve<4;ve++)if(ol[ve]<a.height)for(let me=0,I=0;;){const w=L;if(L=$(G,j),G+=j+1,L===V){j=x+1,U.length=V+2;for(let E=0;E<U.length;E++)U[E]=E<V?[E]:[]}else{L>=U.length?U.push(U[w].concat(U[w][0])):w!==V&&U.push(U[w].concat(U[L][0]));for(let E=0;E<U[L].length;E++){const{r:S,g:A,b:k,a:T}=y(U[L][E]);b.data.set([S,A,k,T],ol[ve]*a.width+Vu[ve]*I+me%(a.width*4)),me+=4}U.length===1<<j&&j<12&&j++}if(me===a.width*4*(I+1)&&(I++,ol[ve]+Vu[ve]*I>=a.height))break}a.image=b,a.bitmap=await createImageBitmap(b)}else{for(let L=0,j=x+1,G=0,U=[[0]],ve=-4;;){const me=L;if(L=$(G,j),G+=j,L===V){j=x+1,U.length=V+2;for(let I=0;I<U.length;I++)U[I]=I<V?[I]:[]}else{if(L===V+1)break;L>=U.length?U.push(U[me].concat(U[me][0])):me!==V&&U.push(U[me].concat(U[L][0]));for(let I=0;I<U[L].length;I++){const{r:w,g:E,b:S,a:A}=y(U[L][I]);b.data.set([w,E,S,A],ve+=4)}U.length>=1<<j&&j<12&&j++}}a.image=b,a.bitmap=await createImageBitmap(b)}}async function R_(n,e,t,i,s,r){switch(n.nextByte()){case 59:return!0;case 44:await k_(n,e,t,i,s);break;case 33:await P_(n,e,i,s);break;default:throw new EvalError("undefined block found")}return!1}function D_(n){for(const e of n.applicationExtensions)if(e.identifier+e.authenticationCode==="NETSCAPE2.0")return e.data[1]+(e.data[2]<<8);return NaN}async function O_(n,e,t){t||(t=!1);const i=await fetch(n);if(!i.ok&&i.status===404)throw new EvalError("file not found");const s=await i.arrayBuffer(),r={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},a=new x_(new Uint8ClampedArray(s));if(a.getString(6)!=="GIF89a")throw new Error("not a supported GIF file");r.width=a.nextTwoBytes(),r.height=a.nextTwoBytes();const c=a.nextByte(),h=(c&128)===128;r.colorRes=(c&112)>>>4,r.sortFlag=(c&8)===8;const f=1<<(c&7)+1,g=a.nextByte();r.pixelAspectRatio=a.nextByte(),r.pixelAspectRatio!==0&&(r.pixelAspectRatio=(r.pixelAspectRatio+15)/64),h&&(r.globalColorTable=gf(a,f));const y=(()=>{try{return new ImageData(r.width,r.height,{colorSpace:"srgb"})}catch(U){if(U instanceof DOMException&&U.name==="IndexSizeError")return null;throw U}})();if(y==null)throw new Error("GIF frame size is to large");const{r:b,g:x,b:M}=r.globalColorTable[g];y.data.set(h?[b,x,M,255]:[0,0,0,0]);for(let U=4;U<y.data.length;U*=2)y.data.copyWithin(U,0,U);r.backgroundImage=y;let V=-1,$=!0,L=-1;const j=U=>(U&&($=!0),V),G=U=>(U!=null&&(L=U),L);try{do $&&(r.frames.push({left:0,top:0,width:0,height:0,disposalMethod:0,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),V++,L=-1,$=!1);while(!await R_(a,r,t,j,G,e));r.frames.length--;for(const U of r.frames){if(U.userInputDelayFlag&&U.delayTime===0){r.totalTime=1/0;break}r.totalTime+=U.delayTime}return r}catch(U){throw U instanceof EvalError?new Error(`error while parsing frame ${V} "${U.message}"`):U}}const M_=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function V_(n,e,t){const{svgData:i}=n;if(!i)return"";const s=Nr(e,t);if(i.includes("fill"))return i.replace(M_,()=>s);const r=i.indexOf(">");return`${i.substring(0,r)} fill="${s}"${i.substring(r)}`}async function ra(n){return new Promise(e=>{n.loading=!0;const t=new Image;n.element=t,t.addEventListener("load",()=>{n.loading=!1,e()}),t.addEventListener("error",()=>{n.element=void 0,n.error=!0,n.loading=!1,cs().error(`${Zt} loading image: ${n.source}`),e()}),t.src=n.source})}async function L_(n){if(n.type!=="gif"){await ra(n);return}n.loading=!0;try{n.gifData=await O_(n.source),n.gifLoopCount=D_(n.gifData)??0,n.gifLoopCount===0&&(n.gifLoopCount=1/0)}catch{n.error=!0}n.loading=!1}async function N_(n){if(n.type!=="svg"){await ra(n);return}n.loading=!0;const e=await fetch(n.source);e.ok?n.svgData=await e.text():(cs().error(`${Zt} Image not found`),n.error=!0),n.loading=!1}function F_(n,e,t,i){const s=V_(n,t,i.opacity?.value??1),r={color:t,gif:e.gif,data:{...n,svgData:s},loaded:!1,ratio:e.width/e.height,replaceColor:e.replaceColor??e.replace_color,source:e.src};return new Promise(a=>{const c=new Blob([s],{type:"image/svg+xml"}),h=URL||window.URL||window.webkitURL||window,f=h.createObjectURL(c),g=new Image;g.addEventListener("load",()=>{r.loaded=!0,r.element=g,a(r),h.revokeObjectURL(f)}),g.addEventListener("error",async()=>{h.revokeObjectURL(f);const y={...n,error:!1,loading:!0};await ra(y),r.loaded=!0,r.element=y.element,a(r)}),g.src=f})}class z_{constructor(e){this.loadImageShape=async t=>{if(!this._engine.loadImage)throw new Error(`${Zt} image shape not initialized`);await this._engine.loadImage({gif:t.gif,name:t.name,replaceColor:t.replaceColor??t.replace_color??!1,src:t.src})},this._engine=e}addImage(e){this._engine.images||(this._engine.images=[]),this._engine.images.push(e)}draw(e,t,i,s,r){const a=t.image,c=a?.element;if(a){if(e.globalAlpha=s,a.gif&&a.gifData){const h=new OffscreenCanvas(a.gifData.width,a.gifData.height),f=h.getContext("2d");if(!f)throw new Error("could not create offscreen canvas context");f.imageSmoothingQuality="low",f.imageSmoothingEnabled=!1,f.clearRect(0,0,h.width,h.height),t.gifLoopCount===void 0&&(t.gifLoopCount=a.gifLoopCount??0);let g=t.gifFrame??0;const y={x:-a.gifData.width*.5,y:-a.gifData.height*.5},b=a.gifData.frames[g];if(t.gifTime===void 0&&(t.gifTime=0),!b.bitmap)return;switch(e.scale(i/a.gifData.width,i/a.gifData.height),b.disposalMethod){case 4:case 5:case 6:case 7:case 0:f.drawImage(b.bitmap,b.left,b.top),e.drawImage(h,y.x,y.y),f.clearRect(0,0,h.width,h.height);break;case 1:f.drawImage(b.bitmap,b.left,b.top),e.drawImage(h,y.x,y.y);break;case 2:f.drawImage(b.bitmap,b.left,b.top),e.drawImage(h,y.x,y.y),f.clearRect(0,0,h.width,h.height),a.gifData.globalColorTable.length===0?f.putImageData(a.gifData.frames[0].image,y.x+b.left,y.y+b.top):f.putImageData(a.gifData.backgroundImage,y.x,y.y);break;case 3:{const x=f.getImageData(0,0,h.width,h.height);f.drawImage(b.bitmap,b.left,b.top),e.drawImage(h,y.x,y.y),f.clearRect(0,0,h.width,h.height),f.putImageData(x,0,0)}break}if(t.gifTime+=r.value,t.gifTime>b.delayTime){if(t.gifTime-=b.delayTime,++g>=a.gifData.frames.length){if(--t.gifLoopCount<=0)return;g=0,f.clearRect(0,0,h.width,h.height)}t.gifFrame=g}e.scale(a.gifData.width/i,a.gifData.height/i)}else if(c){const h=a.ratio,f={x:-i,y:-i};e.drawImage(c,f.x,f.y,i*2,i*2/h)}e.globalAlpha=1}}getSidesCount(){return 12}async init(e){const t=e.actualOptions;if(!(!t.preload||!this._engine.loadImage))for(const i of t.preload)await this._engine.loadImage(i)}loadShape(e){if(e.shape!=="image"&&e.shape!=="images")return;this._engine.images||(this._engine.images=[]);const t=e.shapeData;this._engine.images.find(s=>s.name===t.name||s.source===t.src)||this.loadImageShape(t).then(()=>{this.loadShape(e)})}particleInit(e,t){if(t.shape!=="image"&&t.shape!=="images")return;this._engine.images||(this._engine.images=[]);const i=this._engine.images,s=t.shapeData,r=t.getFillColor(),a=i.find(h=>h.name===s.name||h.source===s.src);if(!a)return;const c=s.replaceColor??s.replace_color??a.replaceColor;if(a.loading){setTimeout(()=>{this.particleInit(e,t)});return}(async()=>{let h;a.svgData&&r?h=await F_(a,s,r,t):h={color:r,data:a,element:a.element,gif:a.gif,gifData:a.gifData,gifLoopCount:a.gifLoopCount,loaded:!0,ratio:s.width&&s.height?s.width/s.height:a.ratio??1,replaceColor:c,source:s.src},h.ratio||(h.ratio=1);const f=s.fill??t.fill,g=s.close??t.close,y={image:h,fill:f,close:g};t.image=y.image,t.fill=y.fill,t.close=y.close})()}}class B_{constructor(){this.src="",this.gif=!1}load(e){e&&(e.gif!==void 0&&(this.gif=e.gif),e.height!==void 0&&(this.height=e.height),e.name!==void 0&&(this.name=e.name),e.replaceColor!==void 0&&(this.replaceColor=e.replaceColor),e.src!==void 0&&(this.src=e.src),e.width!==void 0&&(this.width=e.width))}}class $_{constructor(e){this.id="imagePreloader",this._engine=e}getPlugin(){return{}}loadOptions(e,t){if(!t||!t.preload)return;e.preload||(e.preload=[]);const i=e.preload;for(const s of t.preload){const r=i.find(a=>a.name===s.name||a.src===s.src);if(r)r.load(s);else{const a=new B_;a.load(s),i.push(a)}}}needsPlugin(){return!0}}function U_(n){n.loadImage||(n.loadImage=async e=>{if(!e.name&&!e.src)throw new Error(`${Zt} no image source provided`);if(n.images||(n.images=[]),!n.images.find(t=>t.name===e.name||t.source===e.src))try{const t={gif:e.gif??!1,name:e.name??e.src,source:e.src,type:e.src.substring(e.src.length-3),error:!1,loading:!0,replaceColor:e.replaceColor,ratio:e.width&&e.height?e.width/e.height:void 0};n.images.push(t),await(e.gif?L_:e.replaceColor?N_:ra)(t)}catch{throw new Error(`${Zt} ${e.name??e.src} not found`)}})}async function j_(n,e=!0){U_(n);const t=new $_(n);await n.addPlugin(t,e),await n.addShape(["image","images"],new z_(n),e)}class q_ extends Ri{constructor(){super(),this.sync=!1}load(e){e&&(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class H_ extends Ri{constructor(){super(),this.random.minimumValue=1e-4,this.sync=!1}load(e){e&&(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class G_{constructor(){this.count=0,this.delay=new q_,this.duration=new H_}load(e){e&&(e.count!==void 0&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}class W_{constructor(e){this.container=e}init(e){const t=this.container,i=e.options,s=i.life;s&&(e.life={delay:t.retina.reduceFactor?ee(s.delay.value)*(s.delay.sync?1:Oe())/t.retina.reduceFactor*1e3:0,delayTime:0,duration:t.retina.reduceFactor?ee(s.duration.value)*(s.duration.sync?1:Oe())/t.retina.reduceFactor*1e3:0,time:0,count:s.count},e.life.duration<=0&&(e.life.duration=-1),e.life.count<=0&&(e.life.count=-1),e.life&&(e.spawning=e.life.delay>0))}isEnabled(e){return!e.destroyed}loadOptions(e,...t){e.life||(e.life=new G_);for(const i of t)e.life.load(i?.life)}update(e,t){if(!this.isEnabled(e)||!e.life)return;const i=e.life;let s=!1;if(e.spawning)if(i.delayTime+=t.value,i.delayTime>=e.life.delay)s=!0,e.spawning=!1,i.delayTime=0,i.time=0;else return;if(i.duration===-1||e.spawning||(s?i.time=0:i.time+=t.value,i.time<i.duration))return;if(i.time=0,e.life.count>0&&e.life.count--,e.life.count===0){e.destroy();return}const r=this.container.canvas.size,a=fe(0,r.width),c=fe(0,r.width);e.position.x=Rt(a),e.position.y=Rt(c),e.spawning=!0,i.delayTime=0,i.time=0,e.reset();const h=e.options.life;h&&(i.delay=ee(h.delay.value)*1e3,i.duration=ee(h.duration.value)*1e3)}}async function K_(n,e=!0){await n.addParticleUpdater("life",t=>new W_(t),e)}class Q_{draw(e,t,i){const s=t.shapeData;e.moveTo(-i/2,0),e.lineTo(i/2,0),e.lineCap=s?.cap??"butt"}getSidesCount(){return 1}}async function X_(n,e=!0){await n.addShape("line",new Q_,e)}class Y_{init(){}isEnabled(e){return!Us()&&!e.destroyed&&e.container.actualOptions.interactivity.events.onHover.parallax.enable}move(e){const t=e.container,i=t.actualOptions,s=i.interactivity.events.onHover.parallax;if(Us()||!s.enable)return;const r=s.force,a=t.interactivity.mouse.position;if(!a)return;const c=t.canvas.size,h={x:c.width/2,y:c.height/2},f=s.smooth,g=e.getRadius()/r,y={x:(a.x-h.x)*g,y:(a.y-h.y)*g},{offset:b}=e;b.x+=(y.x-b.x)/f,b.y+=(y.y-b.y)/f}}async function J_(n,e=!0){await n.addMover("parallax",()=>new Y_,e)}class Z_ extends Wl{constructor(e){super(e)}clear(){}init(){}async interact(e){const t=this.container,i=e.retina.attractDistance??t.retina.attractDistance,s=e.getPosition(),r=t.particles.quadTree.queryCircle(s,i);for(const a of r){if(e===a||!a.options.move.attract.enable||a.destroyed||a.spawning)continue;const c=a.getPosition(),{dx:h,dy:f}=At(s,c),g=e.options.move.attract.rotate,y=h/(g.x*1e3),b=f/(g.y*1e3),x=a.size.value/e.size.value,M=1/x;e.velocity.x-=y*x,e.velocity.y-=b*x,a.velocity.x+=y*M,a.velocity.y+=b*M}}isEnabled(e){return e.options.move.attract.enable}reset(){}}async function ev(n,e=!0){await n.addInteractor("particlesAttract",t=>new Z_(t),e)}function Lu(n,e,t,i,s,r){const a=dn(n.options.collisions.absorb.speed*s.factor/10,0,i);n.size.value+=a/2,t.size.value-=a,i<=r&&(t.size.value=0,t.destroy())}function tv(n,e,t,i){const s=n.getRadius(),r=e.getRadius();s===void 0&&r!==void 0?n.destroy():s!==void 0&&r===void 0?e.destroy():s!==void 0&&r!==void 0&&(s>=r?Lu(n,s,e,r,t,i):Lu(e,r,n,s,t,i))}const Nu=n=>{n.collisionMaxSpeed===void 0&&(n.collisionMaxSpeed=ee(n.options.collisions.maxSpeed)),n.velocity.length>n.collisionMaxSpeed&&(n.velocity.length=n.collisionMaxSpeed)};function yf(n,e){Xh(El(n),El(e)),Nu(n),Nu(e)}function nv(n,e){!n.unbreakable&&!e.unbreakable&&yf(n,e),n.getRadius()===void 0&&e.getRadius()!==void 0?n.destroy():n.getRadius()!==void 0&&e.getRadius()===void 0?e.destroy():n.getRadius()!==void 0&&e.getRadius()!==void 0&&(n.getRadius()>=e.getRadius()?e:n).destroy()}function iv(n,e,t,i){switch(n.options.collisions.mode){case"absorb":{tv(n,e,t,i);break}case"bounce":{yf(n,e);break}case"destroy":{nv(n,e);break}}}class sv extends Wl{constructor(e){super(e)}clear(){}init(){}async interact(e,t){if(e.destroyed||e.spawning)return;const i=this.container,s=e.getPosition(),r=e.getRadius(),a=i.particles.quadTree.queryCircle(s,r*2);for(const c of a){if(e===c||!c.options.collisions.enable||e.options.collisions.mode!==c.options.collisions.mode||c.destroyed||c.spawning)continue;const h=c.getPosition(),f=c.getRadius();if(Math.abs(Math.round(s.z)-Math.round(h.z))>r+f)continue;const g=zt(s,h),y=r+f;g>y||iv(e,c,t,i.retina.pixelRatio)}}isEnabled(e){return e.options.collisions.enable}reset(){}}async function rv(n,e=!0){await n.addInteractor("particlesCollisions",t=>new sv(t),e)}class ov extends bt{constructor(e,t,i,s){super(e,t,i),this.canvasSize=s,this.canvasSize={...s}}contains(e){const{width:t,height:i}=this.canvasSize,{x:s,y:r}=e;return super.contains(e)||super.contains({x:s-t,y:r})||super.contains({x:s-t,y:r-i})||super.contains({x:s,y:r-i})}intersects(e){if(super.intersects(e))return!0;const t=e,i=e,s={x:e.position.x-this.canvasSize.width,y:e.position.y-this.canvasSize.height};if(i.radius!==void 0){const r=new bt(s.x,s.y,i.radius*2);return super.intersects(r)}else if(t.size!==void 0){const r=new pn(s.x,s.y,t.size.width*2,t.size.height*2);return super.intersects(r)}return!1}}class av{constructor(){this.blur=5,this.color=new ct,this.color.value="#000",this.enable=!1}load(e){e&&(e.blur!==void 0&&(this.blur=e.blur),this.color=ct.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable))}}class lv{constructor(){this.enable=!1,this.frequency=1}load(e){e&&(e.color!==void 0&&(this.color=ct.create(this.color,e.color)),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity))}}class cv{constructor(){this.blink=!1,this.color=new ct,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new av,this.triangles=new lv,this.width=1,this.warp=!1}load(e){e&&(e.id!==void 0&&(this.id=e.id),e.blink!==void 0&&(this.blink=e.blink),this.color=ct.create(this.color,e.color),e.consent!==void 0&&(this.consent=e.consent),e.distance!==void 0&&(this.distance=e.distance),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity),this.shadow.load(e.shadow),this.triangles.load(e.triangles),e.width!==void 0&&(this.width=e.width),e.warp!==void 0&&(this.warp=e.warp))}}function uv(n,e,t,i,s){const{dx:r,dy:a,distance:c}=At(n,e);if(!s||c<=t)return c;const h={x:Math.abs(r),y:Math.abs(a)},f={x:Math.min(h.x,i.width-h.x),y:Math.min(h.y,i.height-h.y)};return Math.sqrt(f.x**2+f.y**2)}class hv extends Wl{constructor(e){super(e),this._setColor=t=>{if(!t.options.links)return;const i=this.linkContainer,s=t.options.links;let r=s.id===void 0?i.particles.linksColor:i.particles.linksColors.get(s.id);if(r)return;const a=s.color;r=rf(a,s.blink,s.consent),s.id===void 0?i.particles.linksColor=r:i.particles.linksColors.set(s.id,r)},this.linkContainer=e}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(e){if(!e.options.links)return;e.links=[];const t=e.getPosition(),i=this.container,s=i.canvas.size;if(t.x<0||t.y<0||t.x>s.width||t.y>s.height)return;const r=e.options.links,a=r.opacity,c=e.retina.linksDistance??0,h=r.warp,f=h?new ov(t.x,t.y,c,s):new bt(t.x,t.y,c),g=i.particles.quadTree.query(f);for(const y of g){const b=y.options.links;if(e===y||!b?.enable||r.id!==b.id||y.spawning||y.destroyed||!y.links||e.links.some($=>$.destination===y)||y.links.some($=>$.destination===e))continue;const x=y.getPosition();if(x.x<0||x.y<0||x.x>s.width||x.y>s.height)continue;const M=uv(t,x,c,s,h&&b.warp);if(M>c)continue;const V=(1-M/c)*a;this._setColor(e),e.links.push({destination:y,opacity:V})}}isEnabled(e){return!!e.options.links?.enable}loadParticlesOptions(e,...t){e.links||(e.links=new cv);for(const i of t)e.links.load(i?.links??i?.lineLinked??i?.line_linked)}reset(){}}async function fv(n,e=!0){await n.addInteractor("particlesLinks",t=>new hv(t),e)}function dv(n){let e=!1;const{begin:t,end:i,maxDistance:s,context:r,canvasSize:a,width:c,backgroundMask:h,colorLine:f,opacity:g,links:y}=n;if(zt(t,i)<=s)xr(r,t,i),e=!0;else if(y.warp){let x,M;const V={x:i.x-a.width,y:i.y},$=At(t,V);if($.distance<=s){const L=t.y-$.dy/$.dx*t.x;x={x:0,y:L},M={x:a.width,y:L}}else{const L={x:i.x,y:i.y-a.height},j=At(t,L);if(j.distance<=s){const U=-(t.y-j.dy/j.dx*t.x)/(j.dy/j.dx);x={x:U,y:0},M={x:U,y:a.height}}else{const G={x:i.x-a.width,y:i.y-a.height},U=At(t,G);if(U.distance<=s){const ve=t.y-U.dy/U.dx*t.x;x={x:-ve/(U.dy/U.dx),y:ve},M={x:x.x+a.width,y:x.y+a.height}}}}x&&M&&(xr(r,t,x),xr(r,i,M),e=!0)}if(!e)return;r.lineWidth=c,h.enable&&(r.globalCompositeOperation=h.composite),r.strokeStyle=ni(f,g);const{shadow:b}=y;if(b.enable){const x=fn(b.color);x&&(r.shadowBlur=b.blur,r.shadowColor=ni(x))}r.stroke()}function pv(n){const{context:e,pos1:t,pos2:i,pos3:s,backgroundMask:r,colorTriangle:a,opacityTriangle:c}=n;Km(e,t,i,s),r.enable&&(e.globalCompositeOperation=r.composite),e.fillStyle=ni(a,c),e.fill()}function mv(n){return n.sort((e,t)=>e-t),n.join("_")}function Fu(n,e){const t=mv(n.map(s=>s.id));let i=e.get(t);return i===void 0&&(i=Oe(),e.set(t,i)),i}class gv{constructor(e){this.container=e,this._drawLinkLine=(t,i)=>{const s=t.options.links;if(!s?.enable)return;const r=this.container,a=r.actualOptions,c=i.destination,h=t.getPosition(),f=c.getPosition();let g=i.opacity;r.canvas.draw(y=>{let b;const x=t.options.twinkle?.lines;if(x?.enable){const L=x.frequency,j=fn(x.color);Oe()<L&&j&&(b=j,g=ee(x.opacity))}if(!b){const L=s.id!==void 0?r.particles.linksColors.get(s.id):r.particles.linksColor;b=Tl(t,c,L)}if(!b)return;const M=t.retina.linksWidth??0,V=t.retina.linksDistance??0,{backgroundMask:$}=a;dv({context:y,width:M,begin:h,end:f,maxDistance:V,canvasSize:r.canvas.size,links:s,backgroundMask:$,colorLine:b,opacity:g})})},this._drawLinkTriangle=(t,i,s)=>{const r=t.options.links;if(!r?.enable)return;const a=r.triangles;if(!a.enable)return;const c=this.container,h=c.actualOptions,f=i.destination,g=s.destination,y=a.opacity??(i.opacity+s.opacity)/2;y<=0||c.canvas.draw(b=>{const x=t.getPosition(),M=f.getPosition(),V=g.getPosition(),$=t.retina.linksDistance??0;if(zt(x,M)>$||zt(V,M)>$||zt(V,x)>$)return;let L=fn(a.color);if(!L){const j=r.id!==void 0?c.particles.linksColors.get(r.id):c.particles.linksColor;L=Tl(t,f,j)}L&&pv({context:b,pos1:x,pos2:M,pos3:V,backgroundMask:h.backgroundMask,colorTriangle:L,opacityTriangle:y})})},this._drawTriangles=(t,i,s,r)=>{const a=s.destination;if(!(t.links?.triangles.enable&&a.options.links?.triangles.enable))return;const c=a.links?.filter(h=>{const f=this._getLinkFrequency(a,h.destination);return a.options.links&&f<=a.options.links.frequency&&r.findIndex(g=>g.destination===h.destination)>=0});if(c?.length)for(const h of c){const f=h.destination;this._getTriangleFrequency(i,a,f)>t.links.triangles.frequency||this._drawLinkTriangle(i,s,h)}},this._getLinkFrequency=(t,i)=>Fu([t,i],this._freqs.links),this._getTriangleFrequency=(t,i,s)=>Fu([t,i,s],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(e,t){const{links:i,options:s}=t;if(!i||i.length<=0)return;const r=i.filter(a=>s.links&&this._getLinkFrequency(t,a.destination)<=s.links.frequency);for(const a of r)this._drawTriangles(s,t,a,r),a.opacity>0&&(t.retina.linksWidth??0)>0&&this._drawLinkLine(t,a)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(e){if(e.links=[],!e.options.links)return;const t=this.container.retina.pixelRatio,{retina:i}=e,{distance:s,width:r}=e.options.links;i.linksDistance=s*t,i.linksWidth=r*t}particleDestroyed(e){e.links=[]}}class yv{constructor(){this.id="links"}getPlugin(e){return new gv(e)}loadOptions(){}needsPlugin(){return!0}}async function _v(n,e=!0){const t=new yv;await n.addPlugin(t,e)}async function vv(n,e=!0){await fv(n,e),await _v(n,e)}class _f{draw(e,t,i){const s=this.getCenter(t,i),r=this.getSidesData(t,i),a=r.count.numerator*r.count.denominator,c=r.count.numerator/r.count.denominator,h=180*(c-2)/c,f=Math.PI-Math.PI*h/180;if(e){e.beginPath(),e.translate(s.x,s.y),e.moveTo(0,0);for(let g=0;g<a;g++)e.lineTo(r.length,0),e.translate(r.length,0),e.rotate(f)}}getSidesCount(e){const t=e.shapeData;return Math.round(ee(t?.sides??t?.nb_sides??5))}}class bv extends _f{getCenter(e,t){return{x:-t/(e.sides/3.5),y:-t/(2.66/3.5)}}getSidesData(e,t){const i=e.sides;return{count:{denominator:1,numerator:i},length:t*2.66/(i/3)}}}class wv extends _f{getCenter(e,t){return{x:-t,y:t/1.66}}getSidesCount(){return 3}getSidesData(e,t){return{count:{denominator:2,numerator:3},length:t*2}}}async function Ev(n,e=!0){await n.addShape("polygon",new bv,e)}async function Tv(n,e=!0){await n.addShape("triangle",new wv,e)}async function Iv(n,e=!0){await Ev(n,e),await Tv(n,e)}class Av{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=fe(e.speed)),e.decay!==void 0&&(this.decay=fe(e.decay)),e.sync!==void 0&&(this.sync=e.sync))}}class Cv extends Ri{constructor(){super(),this.animation=new Av,this.direction="clockwise",this.path=!1,this.value=0}load(e){e&&(super.load(e),e.direction!==void 0&&(this.direction=e.direction),this.animation.load(e.animation),e.path!==void 0&&(this.path=e.path))}}function Sv(n,e){const t=n.rotate,i=n.options.rotate;if(!t||!i)return;const s=i.animation,r=(t.velocity??0)*e.factor,a=2*Math.PI,c=t.decay??1;if(s.enable){switch(t.status){case"increasing":t.value+=r,t.value>a&&(t.value-=a);break;case"decreasing":default:t.value-=r,t.value<0&&(t.value+=a);break}t.velocity&&c!==1&&(t.velocity*=c)}}class xv{constructor(e){this.container=e}init(e){const t=e.options.rotate;if(!t)return;e.rotate={enable:t.animation.enable,value:ee(t.value)*Math.PI/180},e.pathRotation=t.path;let i=t.direction;switch(i==="random"&&(i=Math.floor(Oe()*2)>0?"counter-clockwise":"clockwise"),i){case"counter-clockwise":case"counterClockwise":e.rotate.status="decreasing";break;case"clockwise":e.rotate.status="increasing";break}const s=t.animation;s.enable&&(e.rotate.decay=1-ee(s.decay),e.rotate.velocity=ee(s.speed)/360*this.container.retina.reduceFactor,s.sync||(e.rotate.velocity*=Oe())),e.rotation=e.rotate.value}isEnabled(e){const t=e.options.rotate;return t?!e.destroyed&&!e.spawning&&t.animation.enable&&!t.path:!1}loadOptions(e,...t){e.rotate||(e.rotate=new Cv);for(const i of t)e.rotate.load(i?.rotate)}update(e,t){this.isEnabled(e)&&(Sv(e,t),e.rotation=e.rotate?.value??0)}}async function Pv(n,e=!0){await n.addParticleUpdater("rotate",t=>new xv(t),e)}const kv=Math.sqrt(2);class Rv{draw(e,t,i){const s=i/kv,r=s*2;e.rect(-s,-s,r,r)}getSidesCount(){return 4}}async function Dv(n,e=!0){await n.addShape(["edge","square"],new Rv,e)}class Ov{draw(e,t,i){const s=t.sides,r=t.starInset??2;e.moveTo(0,0-i);for(let a=0;a<s;a++)e.rotate(Math.PI/s),e.lineTo(0,0-i*r),e.rotate(Math.PI/s),e.lineTo(0,0-i)}getSidesCount(e){const t=e.shapeData;return Math.round(ee(t?.sides??t?.nb_sides??5))}particleInit(e,t){const i=t.shapeData,s=ee(i?.inset??2);t.starInset=s}}async function Mv(n,e=!0){await n.addShape("star",new Ov,e)}function al(n,e,t,i,s){if(!e||!t.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0)||(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=n.value),(e.delayTime??0)>0&&e.time<(e.delayTime??0)))return;const r=Rt(t.offset),a=(e.velocity??0)*n.factor+r*3.6,c=e.decay??1;!s||e.status==="increasing"?(e.value+=a,e.value>i&&(e.loops||(e.loops=0),e.loops++,s&&(e.status="decreasing",e.value-=e.value%i))):(e.value-=a,e.value<0&&(e.loops||(e.loops=0),e.loops++,e.status="increasing",e.value+=e.value)),e.velocity&&c!==1&&(e.velocity*=c),e.value>i&&(e.value%=i)}function Vv(n,e){if(!n.strokeColor||!n.strokeAnimation)return;const{h:t,s:i,l:s}=n.strokeColor,{h:r,s:a,l:c}=n.strokeAnimation;t&&al(e,t,r,360,!1),i&&al(e,i,a,100,!0),s&&al(e,s,c,100,!0)}class Lv{constructor(e){this.container=e}init(e){const t=this.container,i=e.options,s=ti(i.stroke,e.id,i.reduceDuplicates);e.strokeWidth=ee(s.width)*t.retina.pixelRatio,e.strokeOpacity=ee(s.opacity??1),e.strokeAnimation=s.color?.animation;const r=Lr(s.color)??e.getFillColor();r&&(e.strokeColor=of(r,e.strokeAnimation,t.retina.reduceFactor))}isEnabled(e){const t=e.strokeAnimation,{strokeColor:i}=e;return!e.destroyed&&!e.spawning&&!!t&&(i?.h.value!==void 0&&i.h.enable||i?.s.value!==void 0&&i.s.enable||i?.l.value!==void 0&&i.l.enable)}update(e,t){this.isEnabled(e)&&Vv(e,t)}}async function Nv(n,e=!0){await n.addParticleUpdater("strokeColor",t=>new Lv(t),e)}const Oo=["text","character","char"];class Fv{draw(e,t,i,s){const r=t.shapeData;if(r===void 0)return;const a=r.value;if(a===void 0)return;t.text===void 0&&(t.text=ti(a,t.randomIndexData));const c=t.text,h=r.style??"",f=r.weight??"400",g=Math.round(i)*2,y=r.font??"Verdana",b=t.fill,x=c.length*i/2;e.font=`${h} ${f} ${g}px "${y}"`;const M={x:-x,y:i/2};e.globalAlpha=s,b?e.fillText(c,M.x,M.y):e.strokeText(c,M.x,M.y),e.globalAlpha=1}getSidesCount(){return 12}async init(e){const t=e.actualOptions;if(Oo.find(i=>Ue(i,t.particles.shape.type))){const i=Oo.map(r=>t.particles.shape.options[r]).find(r=>!!r),s=[];it(i,r=>{s.push(zm(r.font,r.weight))}),await Promise.all(s)}}particleInit(e,t){if(!t.shape||!Oo.includes(t.shape))return;const i=t.shapeData;if(i===void 0)return;const s=i.value;s!==void 0&&(t.text=ti(s,t.randomIndexData))}}async function zv(n,e=!0){await n.addShape(Oo,new Fv,e)}async function CI(n,e=!0){hy(n),await J_(n,!1),await Hy(n,!1),await Ky(n,!1),await Jy(n,!1),await o_(n,!1),await f_(n,!1),await p_(n,!1),await y_(n,!1),await b_(n,!1),await I_(n,!1),await S_(n,!1),await ev(n,!1),await rv(n,!1),await vv(n,!1),await Uy(),await j_(n,!1),await X_(n,!1),await Iv(n,!1),await Dv(n,!1),await Mv(n,!1),await zv(n,!1),await K_(n,!1),await Pv(n,!1),await Nv(n,!1),await $y(n,e)}const Bv=()=>{};var zu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},$v=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[t++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[t++],a=n[t++],c=n[t++],h=((s&7)<<18|(r&63)<<12|(a&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const r=n[t++],a=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return e.join("")},bf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],a=s+1<n.length,c=a?n[s+1]:0,h=s+2<n.length,f=h?n[s+2]:0,g=r>>2,y=(r&3)<<4|c>>4;let b=(c&15)<<2|f>>6,x=f&63;h||(x=64,a||(b=64)),i.push(t[g],t[y],t[b],t[x])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vf(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):$v(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,r==null||c==null||f==null||y==null)throw new Uv;const b=r<<2|c>>4;if(i.push(b),f!==64){const x=c<<4&240|f>>2;if(i.push(x),y!==64){const M=f<<6&192|y;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Uv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jv=function(n){const e=vf(n);return bf.encodeByteArray(e,!0)},$o=function(n){return jv(n).replace(/\./g,"")},qv=function(n){try{return bf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=()=>Hv().__FIREBASE_DEFAULTS__,Wv=()=>{if(typeof process>"u"||typeof zu>"u")return;const n=zu.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Kv=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&qv(n[1]);return e&&JSON.parse(e)},Kl=()=>{try{return Bv()||Gv()||Wv()||Kv()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qv=n=>Kl()?.emulatorHosts?.[n],Xv=n=>{const e=Qv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},wf=()=>Kl()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...n};return[$o(JSON.stringify(t)),$o(JSON.stringify(a)),""].join(".")}const Pr={};function eb(){const n={prod:[],emulator:[]};for(const e of Object.keys(Pr))Pr[e]?n.emulator.push(e):n.prod.push(e);return n}function tb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Bu=!1;function nb(n,e){if(typeof window>"u"||typeof document>"u"||!Ql(window.location.host)||Pr[n]===e||Pr[n]||Bu)return;Pr[n]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",r=eb().prod.length>0;function a(){const b=document.getElementById(i);b&&b.remove()}function c(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function h(b,x){b.setAttribute("width","24"),b.setAttribute("id",x),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function f(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Bu=!0,a()},b}function g(b,x){b.setAttribute("id",x),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function y(){const b=tb(i),x=t("text"),M=document.getElementById(x)||document.createElement("span"),V=t("learnmore"),$=document.getElementById(V)||document.createElement("a"),L=t("preprendIcon"),j=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const G=b.element;c(G),g($,V);const U=f();h(j,L),G.append(j,M,$,U),document.body.appendChild(G)}r?(M.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sb(){const n=Kl()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ob(){return!sb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ef(){try{return typeof indexedDB=="object"}catch{return!1}}function Tf(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}function ab(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="FirebaseError";class Di extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=lb,Object.setPrototypeOf(this,Di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oa.prototype.create)}}class oa{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],a=r?cb(r,i):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new Di(s,c,i)}}function cb(n,e){return n.replace(ub,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const ub=/\{\$([^}]+)}/g;function zr(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const r=n[s],a=e[s];if($u(r)&&$u(a)){if(!zr(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function $u(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=1e3,fb=2,db=14400*1e3,pb=.5;function Uu(n,e=hb,t=fb){const i=e*Math.pow(t,n),s=Math.round(pb*i*(Math.random()-.5)*2);return Math.min(db,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(n){return n&&n._delegate?n._delegate:n}class ii{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Yv;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yb(e))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ts){return this.instances.has(e)}getOptions(e=ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(r);i===c&&a.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:gb(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ts){return this.component?this.component.multipleInstances?e:ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gb(n){return n===ts?void 0:n}function yb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(_e||(_e={}));const vb={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},bb=_e.INFO,wb={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},Eb=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=wb[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xl{constructor(e){this.name=e,this._logLevel=bb,this._logHandler=Eb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const Tb=(n,e)=>e.some(t=>n instanceof t);let ju,qu;function Ib(){return ju||(ju=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ab(){return qu||(qu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const If=new WeakMap,Il=new WeakMap,Af=new WeakMap,ll=new WeakMap,Yl=new WeakMap;function Cb(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",a)},r=()=>{t(Ti(n.result)),s()},a=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&If.set(t,n)}).catch(()=>{}),Yl.set(e,n),e}function Sb(n){if(Il.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",a),n.removeEventListener("abort",a)},r=()=>{t(),s()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",a),n.addEventListener("abort",a)});Il.set(n,e)}let Al={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Il.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Af.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ti(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xb(n){Al=n(Al)}function Pb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(cl(this),e,...t);return Af.set(i,e.sort?e.sort():[e]),Ti(i)}:Ab().includes(n)?function(...e){return n.apply(cl(this),e),Ti(If.get(this))}:function(...e){return Ti(n.apply(cl(this),e))}}function kb(n){return typeof n=="function"?Pb(n):(n instanceof IDBTransaction&&Sb(n),Tb(n,Ib())?new Proxy(n,Al):n)}function Ti(n){if(n instanceof IDBRequest)return Cb(n);if(ll.has(n))return ll.get(n);const e=kb(n);return e!==n&&(ll.set(n,e),Yl.set(e,n)),e}const cl=n=>Yl.get(n);function Cf(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(n,e),c=Ti(a);return i&&a.addEventListener("upgradeneeded",h=>{i(Ti(a.result),h.oldVersion,h.newVersion,Ti(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{r&&h.addEventListener("close",()=>r()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const Rb=["get","getKey","getAll","getAllKeys","count"],Db=["put","add","delete","clear"],ul=new Map;function Hu(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ul.get(e))return ul.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=Db.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||Rb.includes(t)))return;const r=async function(a,...c){const h=this.transaction(a,s?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),s&&h.done]))[0]};return ul.set(e,r),r}xb(n=>({...n,get:(e,t,i)=>Hu(e,t)||n.get(e,t,i),has:(e,t)=>!!Hu(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Mb(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Mb(n){return n.getComponent()?.type==="VERSION"}const Cl="@firebase/app",Gu="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=new Xl("@firebase/app"),Vb="@firebase/app-compat",Lb="@firebase/analytics-compat",Nb="@firebase/analytics",Fb="@firebase/app-check-compat",zb="@firebase/app-check",Bb="@firebase/auth",$b="@firebase/auth-compat",Ub="@firebase/database",jb="@firebase/data-connect",qb="@firebase/database-compat",Hb="@firebase/functions",Gb="@firebase/functions-compat",Wb="@firebase/installations",Kb="@firebase/installations-compat",Qb="@firebase/messaging",Xb="@firebase/messaging-compat",Yb="@firebase/performance",Jb="@firebase/performance-compat",Zb="@firebase/remote-config",ew="@firebase/remote-config-compat",tw="@firebase/storage",nw="@firebase/storage-compat",iw="@firebase/firestore",sw="@firebase/ai",rw="@firebase/firestore-compat",ow="firebase",aw="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl="[DEFAULT]",lw={[Cl]:"fire-core",[Vb]:"fire-core-compat",[Nb]:"fire-analytics",[Lb]:"fire-analytics-compat",[zb]:"fire-app-check",[Fb]:"fire-app-check-compat",[Bb]:"fire-auth",[$b]:"fire-auth-compat",[Ub]:"fire-rtdb",[jb]:"fire-data-connect",[qb]:"fire-rtdb-compat",[Hb]:"fire-fn",[Gb]:"fire-fn-compat",[Wb]:"fire-iid",[Kb]:"fire-iid-compat",[Qb]:"fire-fcm",[Xb]:"fire-fcm-compat",[Yb]:"fire-perf",[Jb]:"fire-perf-compat",[Zb]:"fire-rc",[ew]:"fire-rc-compat",[tw]:"fire-gcs",[nw]:"fire-gcs-compat",[iw]:"fire-fst",[rw]:"fire-fst-compat",[sw]:"fire-vertex","fire-js":"fire-js",[ow]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new Map,cw=new Map,xl=new Map;function Wu(n,e){try{n.container.addComponent(e)}catch(t){si.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ai(n){const e=n.name;if(xl.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;xl.set(e,n);for(const t of Uo.values())Wu(t,n);for(const t of cw.values())Wu(t,n);return!0}function Qr(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function uw(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new oa("app","Firebase",hw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ii("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=aw;function pw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Sl,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Ii.create("bad-app-name",{appName:String(s)});if(t||(t=wf()),!t)throw Ii.create("no-options");const r=Uo.get(s);if(r){if(zr(t,r.options)&&zr(i,r.config))return r;throw Ii.create("duplicate-app",{appName:s})}const a=new _b(s);for(const h of xl.values())a.addComponent(h);const c=new fw(t,i,a);return Uo.set(s,c),c}function Sf(n=Sl){const e=Uo.get(n);if(!e&&n===Sl&&wf())return pw();if(!e)throw Ii.create("no-app",{appName:n});return e}function Dn(n,e,t){let i=lw[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(a.join(" "));return}Ai(new ii(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="firebase-heartbeat-database",gw=1,Br="firebase-heartbeat-store";let hl=null;function xf(){return hl||(hl=Cf(mw,gw,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Br)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ii.create("idb-open",{originalErrorMessage:n.message})})),hl}async function yw(n){try{const t=(await xf()).transaction(Br),i=await t.objectStore(Br).get(Pf(n));return await t.done,i}catch(e){if(e instanceof Di)si.warn(e.message);else{const t=Ii.create("idb-get",{originalErrorMessage:e?.message});si.warn(t.message)}}}async function Ku(n,e){try{const i=(await xf()).transaction(Br,"readwrite");await i.objectStore(Br).put(e,Pf(n)),await i.done}catch(t){if(t instanceof Di)si.warn(t.message);else{const i=Ii.create("idb-set",{originalErrorMessage:t?.message});si.warn(i.message)}}}function Pf(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=1024,vw=30;class bw{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ew(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>vw){const s=Tw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){si.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Qu(),{heartbeatsToSend:t,unsentEntries:i}=ww(this._heartbeatsCache.heartbeats),s=$o(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return si.warn(e),""}}}function Qu(){return new Date().toISOString().substring(0,10)}function ww(n,e=_w){const t=[];let i=n.slice();for(const s of n){const r=t.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),Xu(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Xu(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Ew{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ef()?Tf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yw(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ku(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ku(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Xu(n){return $o(JSON.stringify({version:2,heartbeats:n})).length}function Tw(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(n){Ai(new ii("platform-logger",e=>new Ob(e),"PRIVATE")),Ai(new ii("heartbeat",e=>new bw(e),"PRIVATE")),Dn(Cl,Gu,n),Dn(Cl,Gu,"esm2020"),Dn("fire-js","")}Iw("");var Aw="firebase",Cw="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn(Aw,Cw,"app");var Yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jl;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,w){function E(){}E.prototype=w.prototype,I.F=w.prototype,I.prototype=new E,I.prototype.constructor=I,I.D=function(S,A,k){for(var T=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)T[Ge-2]=arguments[Ge];return w.prototype[A].apply(S,T)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,w,E){E||(E=0);const S=Array(16);if(typeof w=="string")for(var A=0;A<16;++A)S[A]=w.charCodeAt(E++)|w.charCodeAt(E++)<<8|w.charCodeAt(E++)<<16|w.charCodeAt(E++)<<24;else for(A=0;A<16;++A)S[A]=w[E++]|w[E++]<<8|w[E++]<<16|w[E++]<<24;w=I.g[0],E=I.g[1],A=I.g[2];let k=I.g[3],T;T=w+(k^E&(A^k))+S[0]+3614090360&4294967295,w=E+(T<<7&4294967295|T>>>25),T=k+(A^w&(E^A))+S[1]+3905402710&4294967295,k=w+(T<<12&4294967295|T>>>20),T=A+(E^k&(w^E))+S[2]+606105819&4294967295,A=k+(T<<17&4294967295|T>>>15),T=E+(w^A&(k^w))+S[3]+3250441966&4294967295,E=A+(T<<22&4294967295|T>>>10),T=w+(k^E&(A^k))+S[4]+4118548399&4294967295,w=E+(T<<7&4294967295|T>>>25),T=k+(A^w&(E^A))+S[5]+1200080426&4294967295,k=w+(T<<12&4294967295|T>>>20),T=A+(E^k&(w^E))+S[6]+2821735955&4294967295,A=k+(T<<17&4294967295|T>>>15),T=E+(w^A&(k^w))+S[7]+4249261313&4294967295,E=A+(T<<22&4294967295|T>>>10),T=w+(k^E&(A^k))+S[8]+1770035416&4294967295,w=E+(T<<7&4294967295|T>>>25),T=k+(A^w&(E^A))+S[9]+2336552879&4294967295,k=w+(T<<12&4294967295|T>>>20),T=A+(E^k&(w^E))+S[10]+4294925233&4294967295,A=k+(T<<17&4294967295|T>>>15),T=E+(w^A&(k^w))+S[11]+2304563134&4294967295,E=A+(T<<22&4294967295|T>>>10),T=w+(k^E&(A^k))+S[12]+1804603682&4294967295,w=E+(T<<7&4294967295|T>>>25),T=k+(A^w&(E^A))+S[13]+4254626195&4294967295,k=w+(T<<12&4294967295|T>>>20),T=A+(E^k&(w^E))+S[14]+2792965006&4294967295,A=k+(T<<17&4294967295|T>>>15),T=E+(w^A&(k^w))+S[15]+1236535329&4294967295,E=A+(T<<22&4294967295|T>>>10),T=w+(A^k&(E^A))+S[1]+4129170786&4294967295,w=E+(T<<5&4294967295|T>>>27),T=k+(E^A&(w^E))+S[6]+3225465664&4294967295,k=w+(T<<9&4294967295|T>>>23),T=A+(w^E&(k^w))+S[11]+643717713&4294967295,A=k+(T<<14&4294967295|T>>>18),T=E+(k^w&(A^k))+S[0]+3921069994&4294967295,E=A+(T<<20&4294967295|T>>>12),T=w+(A^k&(E^A))+S[5]+3593408605&4294967295,w=E+(T<<5&4294967295|T>>>27),T=k+(E^A&(w^E))+S[10]+38016083&4294967295,k=w+(T<<9&4294967295|T>>>23),T=A+(w^E&(k^w))+S[15]+3634488961&4294967295,A=k+(T<<14&4294967295|T>>>18),T=E+(k^w&(A^k))+S[4]+3889429448&4294967295,E=A+(T<<20&4294967295|T>>>12),T=w+(A^k&(E^A))+S[9]+568446438&4294967295,w=E+(T<<5&4294967295|T>>>27),T=k+(E^A&(w^E))+S[14]+3275163606&4294967295,k=w+(T<<9&4294967295|T>>>23),T=A+(w^E&(k^w))+S[3]+4107603335&4294967295,A=k+(T<<14&4294967295|T>>>18),T=E+(k^w&(A^k))+S[8]+1163531501&4294967295,E=A+(T<<20&4294967295|T>>>12),T=w+(A^k&(E^A))+S[13]+2850285829&4294967295,w=E+(T<<5&4294967295|T>>>27),T=k+(E^A&(w^E))+S[2]+4243563512&4294967295,k=w+(T<<9&4294967295|T>>>23),T=A+(w^E&(k^w))+S[7]+1735328473&4294967295,A=k+(T<<14&4294967295|T>>>18),T=E+(k^w&(A^k))+S[12]+2368359562&4294967295,E=A+(T<<20&4294967295|T>>>12),T=w+(E^A^k)+S[5]+4294588738&4294967295,w=E+(T<<4&4294967295|T>>>28),T=k+(w^E^A)+S[8]+2272392833&4294967295,k=w+(T<<11&4294967295|T>>>21),T=A+(k^w^E)+S[11]+1839030562&4294967295,A=k+(T<<16&4294967295|T>>>16),T=E+(A^k^w)+S[14]+4259657740&4294967295,E=A+(T<<23&4294967295|T>>>9),T=w+(E^A^k)+S[1]+2763975236&4294967295,w=E+(T<<4&4294967295|T>>>28),T=k+(w^E^A)+S[4]+1272893353&4294967295,k=w+(T<<11&4294967295|T>>>21),T=A+(k^w^E)+S[7]+4139469664&4294967295,A=k+(T<<16&4294967295|T>>>16),T=E+(A^k^w)+S[10]+3200236656&4294967295,E=A+(T<<23&4294967295|T>>>9),T=w+(E^A^k)+S[13]+681279174&4294967295,w=E+(T<<4&4294967295|T>>>28),T=k+(w^E^A)+S[0]+3936430074&4294967295,k=w+(T<<11&4294967295|T>>>21),T=A+(k^w^E)+S[3]+3572445317&4294967295,A=k+(T<<16&4294967295|T>>>16),T=E+(A^k^w)+S[6]+76029189&4294967295,E=A+(T<<23&4294967295|T>>>9),T=w+(E^A^k)+S[9]+3654602809&4294967295,w=E+(T<<4&4294967295|T>>>28),T=k+(w^E^A)+S[12]+3873151461&4294967295,k=w+(T<<11&4294967295|T>>>21),T=A+(k^w^E)+S[15]+530742520&4294967295,A=k+(T<<16&4294967295|T>>>16),T=E+(A^k^w)+S[2]+3299628645&4294967295,E=A+(T<<23&4294967295|T>>>9),T=w+(A^(E|~k))+S[0]+4096336452&4294967295,w=E+(T<<6&4294967295|T>>>26),T=k+(E^(w|~A))+S[7]+1126891415&4294967295,k=w+(T<<10&4294967295|T>>>22),T=A+(w^(k|~E))+S[14]+2878612391&4294967295,A=k+(T<<15&4294967295|T>>>17),T=E+(k^(A|~w))+S[5]+4237533241&4294967295,E=A+(T<<21&4294967295|T>>>11),T=w+(A^(E|~k))+S[12]+1700485571&4294967295,w=E+(T<<6&4294967295|T>>>26),T=k+(E^(w|~A))+S[3]+2399980690&4294967295,k=w+(T<<10&4294967295|T>>>22),T=A+(w^(k|~E))+S[10]+4293915773&4294967295,A=k+(T<<15&4294967295|T>>>17),T=E+(k^(A|~w))+S[1]+2240044497&4294967295,E=A+(T<<21&4294967295|T>>>11),T=w+(A^(E|~k))+S[8]+1873313359&4294967295,w=E+(T<<6&4294967295|T>>>26),T=k+(E^(w|~A))+S[15]+4264355552&4294967295,k=w+(T<<10&4294967295|T>>>22),T=A+(w^(k|~E))+S[6]+2734768916&4294967295,A=k+(T<<15&4294967295|T>>>17),T=E+(k^(A|~w))+S[13]+1309151649&4294967295,E=A+(T<<21&4294967295|T>>>11),T=w+(A^(E|~k))+S[4]+4149444226&4294967295,w=E+(T<<6&4294967295|T>>>26),T=k+(E^(w|~A))+S[11]+3174756917&4294967295,k=w+(T<<10&4294967295|T>>>22),T=A+(w^(k|~E))+S[2]+718787259&4294967295,A=k+(T<<15&4294967295|T>>>17),T=E+(k^(A|~w))+S[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(A+(T<<21&4294967295|T>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+k&4294967295}i.prototype.v=function(I,w){w===void 0&&(w=I.length);const E=w-this.blockSize,S=this.C;let A=this.h,k=0;for(;k<w;){if(A==0)for(;k<=E;)s(this,I,k),k+=this.blockSize;if(typeof I=="string"){for(;k<w;)if(S[A++]=I.charCodeAt(k++),A==this.blockSize){s(this,S),A=0;break}}else for(;k<w;)if(S[A++]=I[k++],A==this.blockSize){s(this,S),A=0;break}}this.h=A,this.o+=w},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;w=this.o*8;for(var E=I.length-8;E<I.length;++E)I[E]=w&255,w/=256;for(this.v(I),I=Array(16),w=0,E=0;E<4;++E)for(let S=0;S<32;S+=8)I[w++]=this.g[E]>>>S&255;return I};function r(I,w){var E=c;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=w(I)}function a(I,w){this.h=w;const E=[];let S=!0;for(let A=I.length-1;A>=0;A--){const k=I[A]|0;S&&k==w||(E[A]=k,S=!1)}this.g=E}var c={};function h(I){return-128<=I&&I<128?r(I,function(w){return new a([w|0],w<0?-1:0)}):new a([I|0],I<0?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return y;if(I<0)return $(f(-I));const w=[];let E=1;for(let S=0;I>=E;S++)w[S]=I/E|0,E*=4294967296;return new a(w,0)}function g(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return $(g(I.substring(1),w));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=f(Math.pow(w,8));let S=y;for(let k=0;k<I.length;k+=8){var A=Math.min(8,I.length-k);const T=parseInt(I.substring(k,k+A),w);A<8?(A=f(Math.pow(w,A)),S=S.j(A).add(f(T))):(S=S.j(E),S=S.add(f(T)))}return S}var y=h(0),b=h(1),x=h(16777216);n=a.prototype,n.m=function(){if(V(this))return-$(this).m();let I=0,w=1;for(let E=0;E<this.g.length;E++){const S=this.i(E);I+=(S>=0?S:4294967296+S)*w,w*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(M(this))return"0";if(V(this))return"-"+$(this).toString(I);const w=f(Math.pow(I,6));var E=this;let S="";for(;;){const A=U(E,w).g;E=L(E,A.j(w));let k=((E.g.length>0?E.g[0]:E.h)>>>0).toString(I);if(E=A,M(E))return k+S;for(;k.length<6;)k="0"+k;S=k+S}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function M(I){if(I.h!=0)return!1;for(let w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function V(I){return I.h==-1}n.l=function(I){return I=L(this,I),V(I)?-1:M(I)?0:1};function $(I){const w=I.g.length,E=[];for(let S=0;S<w;S++)E[S]=~I.g[S];return new a(E,~I.h).add(b)}n.abs=function(){return V(this)?$(this):this},n.add=function(I){const w=Math.max(this.g.length,I.g.length),E=[];let S=0;for(let A=0;A<=w;A++){let k=S+(this.i(A)&65535)+(I.i(A)&65535),T=(k>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);S=T>>>16,k&=65535,T&=65535,E[A]=T<<16|k}return new a(E,E[E.length-1]&-2147483648?-1:0)};function L(I,w){return I.add($(w))}n.j=function(I){if(M(this)||M(I))return y;if(V(this))return V(I)?$(this).j($(I)):$($(this).j(I));if(V(I))return $(this.j($(I)));if(this.l(x)<0&&I.l(x)<0)return f(this.m()*I.m());const w=this.g.length+I.g.length,E=[];for(var S=0;S<2*w;S++)E[S]=0;for(S=0;S<this.g.length;S++)for(let A=0;A<I.g.length;A++){const k=this.i(S)>>>16,T=this.i(S)&65535,Ge=I.i(A)>>>16,St=I.i(A)&65535;E[2*S+2*A]+=T*St,j(E,2*S+2*A),E[2*S+2*A+1]+=k*St,j(E,2*S+2*A+1),E[2*S+2*A+1]+=T*Ge,j(E,2*S+2*A+1),E[2*S+2*A+2]+=k*Ge,j(E,2*S+2*A+2)}for(I=0;I<w;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=w;I<2*w;I++)E[I]=0;return new a(E,0)};function j(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function G(I,w){this.g=I,this.h=w}function U(I,w){if(M(w))throw Error("division by zero");if(M(I))return new G(y,y);if(V(I))return w=U($(I),w),new G($(w.g),$(w.h));if(V(w))return w=U(I,$(w)),new G($(w.g),w.h);if(I.g.length>30){if(V(I)||V(w))throw Error("slowDivide_ only works with positive integers.");for(var E=b,S=w;S.l(I)<=0;)E=ve(E),S=ve(S);var A=me(E,1),k=me(S,1);for(S=me(S,2),E=me(E,2);!M(S);){var T=k.add(S);T.l(I)<=0&&(A=A.add(E),k=T),S=me(S,1),E=me(E,1)}return w=L(I,A.j(w)),new G(A,w)}for(A=y;I.l(w)>=0;){for(E=Math.max(1,Math.floor(I.m()/w.m())),S=Math.ceil(Math.log(E)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),k=f(E),T=k.j(w);V(T)||T.l(I)>0;)E-=S,k=f(E),T=k.j(w);M(k)&&(k=b),A=A.add(k),I=L(I,T)}return new G(A,I)}n.B=function(I){return U(this,I).h},n.and=function(I){const w=Math.max(this.g.length,I.g.length),E=[];for(let S=0;S<w;S++)E[S]=this.i(S)&I.i(S);return new a(E,this.h&I.h)},n.or=function(I){const w=Math.max(this.g.length,I.g.length),E=[];for(let S=0;S<w;S++)E[S]=this.i(S)|I.i(S);return new a(E,this.h|I.h)},n.xor=function(I){const w=Math.max(this.g.length,I.g.length),E=[];for(let S=0;S<w;S++)E[S]=this.i(S)^I.i(S);return new a(E,this.h^I.h)};function ve(I){const w=I.g.length+1,E=[];for(let S=0;S<w;S++)E[S]=I.i(S)<<1|I.i(S-1)>>>31;return new a(E,I.h)}function me(I,w){const E=w>>5;w%=32;const S=I.g.length-E,A=[];for(let k=0;k<S;k++)A[k]=w>0?I.i(k+E)>>>w|I.i(k+E+1)<<32-w:I.i(k+E);return new a(A,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=g,Jl=a}).apply(typeof Yu<"u"?Yu:typeof self<"u"?self:typeof window<"u"?window:{});var Co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kf,Ir,Rf,Mo,Pl,Df,Of,Mf;(function(){var n,e=Object.defineProperty;function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Co=="object"&&Co];for(var u=0;u<o.length;++u){var p=o[u];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var i=t(this);function s(o,u){if(u)e:{var p=i;o=o.split(".");for(var v=0;v<o.length-1;v++){var R=o[v];if(!(R in p))break e;p=p[R]}o=o[o.length-1],v=p[o],u=u(v),u!=v&&u!=null&&e(p,o,{configurable:!0,writable:!0,value:u})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(u){var p=[],v;for(v in u)Object.prototype.hasOwnProperty.call(u,v)&&p.push([v,u[v]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},a=this||self;function c(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function h(o,u,p){return o.call.apply(o.bind,arguments)}function f(o,u,p){return f=h,f.apply(null,arguments)}function g(o,u){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),o.apply(this,v)}}function y(o,u){function p(){}p.prototype=u.prototype,o.Z=u.prototype,o.prototype=new p,o.prototype.constructor=o,o.Ob=function(v,R,D){for(var q=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)q[ae-2]=arguments[ae];return u.prototype[R].apply(v,q)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function x(o){const u=o.length;if(u>0){const p=Array(u);for(let v=0;v<u;v++)p[v]=o[v];return p}return[]}function M(o,u){for(let v=1;v<arguments.length;v++){const R=arguments[v];var p=typeof R;if(p=p!="object"?p:R?Array.isArray(R)?"array":p:"null",p=="array"||p=="object"&&typeof R.length=="number"){p=o.length||0;const D=R.length||0;o.length=p+D;for(let q=0;q<D;q++)o[p+q]=R[q]}else o.push(R)}}class V{constructor(u,p){this.i=u,this.j=p,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function $(o){a.setTimeout(()=>{throw o},0)}function L(){var o=I;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class j{constructor(){this.h=this.g=null}add(u,p){const v=G.get();v.set(u,p),this.h?this.h.next=v:this.g=v,this.h=v}}var G=new V(()=>new U,o=>o.reset());class U{constructor(){this.next=this.g=this.h=null}set(u,p){this.h=u,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,me=!1,I=new j,w=()=>{const o=Promise.resolve(void 0);ve=()=>{o.then(E)}};function E(){for(var o;o=L();){try{o.h.call(o.g)}catch(p){$(p)}var u=G;u.j(o),u.h<100&&(u.h++,o.next=u.g,u.g=o)}me=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const p=()=>{};a.addEventListener("test",p,u),a.removeEventListener("test",p,u)}catch{}return o})();function T(o){return/^[\s\xa0]*$/.test(o)}function Ge(o,u){A.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,u)}y(Ge,A),Ge.prototype.init=function(o,u){const p=this.type=o.type,v=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget,u||(p=="mouseover"?u=o.fromElement:p=="mouseout"&&(u=o.toElement)),this.relatedTarget=u,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Ge.Z.h.call(this)},Ge.prototype.h=function(){Ge.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var St="closure_listenable_"+(Math.random()*1e6|0),K=0;function le(o,u,p,v,R){this.listener=o,this.proxy=null,this.src=u,this.type=p,this.capture=!!v,this.ha=R,this.key=++K,this.da=this.fa=!1}function ne(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Ie(o,u,p){for(const v in o)u.call(p,o[v],v,o)}function Ve(o,u){for(const p in o)u.call(void 0,o[p],p,o)}function N(o){const u={};for(const p in o)u[p]=o[p];return u}const tn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fn(o,u){let p,v;for(let R=1;R<arguments.length;R++){v=arguments[R];for(p in v)o[p]=v[p];for(let D=0;D<tn.length;D++)p=tn[D],Object.prototype.hasOwnProperty.call(v,p)&&(o[p]=v[p])}}function ht(o){this.src=o,this.g={},this.h=0}ht.prototype.add=function(o,u,p,v,R){const D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);const q=zn(o,u,v,R);return q>-1?(u=o[q],p||(u.fa=!1)):(u=new le(u,this.src,D,!!v,R),u.fa=p,o.push(u)),u};function Qe(o,u){const p=u.type;if(p in o.g){var v=o.g[p],R=Array.prototype.indexOf.call(v,u,void 0),D;(D=R>=0)&&Array.prototype.splice.call(v,R,1),D&&(ne(u),o.g[p].length==0&&(delete o.g[p],o.h--))}}function zn(o,u,p,v){for(let R=0;R<o.length;++R){const D=o[R];if(!D.da&&D.listener==u&&D.capture==!!p&&D.ha==v)return R}return-1}var wt="closure_lm_"+(Math.random()*1e6|0),Oi={};function Z(o,u,p,v,R){if(Array.isArray(u)){for(let D=0;D<u.length;D++)Z(o,u[D],p,v,R);return null}return p=to(p),o&&o[St]?o.J(u,p,c(v)?!!v.capture:!1,R):ys(o,u,p,!1,v,R)}function ys(o,u,p,v,R,D){if(!u)throw Error("Invalid event type");const q=c(R)?!!R.capture:!!R;let ae=Bn(o);if(ae||(o[wt]=ae=new ht(o)),p=ae.add(u,p,v,q,D),p.proxy)return p;if(v=Jr(),p.proxy=v,v.src=o,v.listener=p,o.addEventListener)k||(R=q),R===void 0&&(R=!1),o.addEventListener(u.toString(),v,R);else if(o.attachEvent)o.attachEvent(ri(u.toString()),v);else if(o.addListener&&o.removeListener)o.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Jr(){function o(p){return u.call(o.src,o.listener,p)}const u=eo;return o}function Zr(o,u,p,v,R){if(Array.isArray(u))for(var D=0;D<u.length;D++)Zr(o,u[D],p,v,R);else v=c(v)?!!v.capture:!!v,p=to(p),o&&o[St]?(o=o.i,D=String(u).toString(),D in o.g&&(u=o.g[D],p=zn(u,p,v,R),p>-1&&(ne(u[p]),Array.prototype.splice.call(u,p,1),u.length==0&&(delete o.g[D],o.h--)))):o&&(o=Bn(o))&&(u=o.g[u.toString()],o=-1,u&&(o=zn(u,p,v,R)),(p=o>-1?u[o]:null)&&Xs(p))}function Xs(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[St])Qe(u.i,o);else{var p=o.type,v=o.proxy;u.removeEventListener?u.removeEventListener(p,v,o.capture):u.detachEvent?u.detachEvent(ri(p),v):u.addListener&&u.removeListener&&u.removeListener(v),(p=Bn(u))?(Qe(p,o),p.h==0&&(p.src=null,u[wt]=null)):ne(o)}}}function ri(o){return o in Oi?Oi[o]:Oi[o]="on"+o}function eo(o,u){if(o.da)o=!0;else{u=new Ge(u,this);const p=o.listener,v=o.ha||o.src;o.fa&&Xs(o),o=p.call(v,u)}return o}function Bn(o){return o=o[wt],o instanceof ht?o:null}var gn="__closure_events_fn_"+(Math.random()*1e9>>>0);function to(o){return typeof o=="function"?o:(o[gn]||(o[gn]=function(u){return o.handleEvent(u)}),o[gn])}function Xe(){S.call(this),this.i=new ht(this),this.M=this,this.G=null}y(Xe,S),Xe.prototype[St]=!0,Xe.prototype.removeEventListener=function(o,u,p,v){Zr(this,o,u,p,v)};function st(o,u){var p,v=o.G;if(v)for(p=[];v;v=v.G)p.push(v);if(o=o.M,v=u.type||u,typeof u=="string")u=new A(u,o);else if(u instanceof A)u.target=u.target||o;else{var R=u;u=new A(v,o),Fn(u,R)}R=!0;let D,q;if(p)for(q=p.length-1;q>=0;q--)D=u.g=p[q],R=_s(D,v,!0,u)&&R;if(D=u.g=o,R=_s(D,v,!0,u)&&R,R=_s(D,v,!1,u)&&R,p)for(q=0;q<p.length;q++)D=u.g=p[q],R=_s(D,v,!1,u)&&R}Xe.prototype.N=function(){if(Xe.Z.N.call(this),this.i){var o=this.i;for(const u in o.g){const p=o.g[u];for(let v=0;v<p.length;v++)ne(p[v]);delete o.g[u],o.h--}}this.G=null},Xe.prototype.J=function(o,u,p,v){return this.i.add(String(o),u,!1,p,v)},Xe.prototype.K=function(o,u,p,v){return this.i.add(String(o),u,!0,p,v)};function _s(o,u,p,v){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();let R=!0;for(let D=0;D<u.length;++D){const q=u[D];if(q&&!q.da&&q.capture==p){const ae=q.listener,ze=q.ha||q.src;q.fa&&Qe(o.i,q),R=ae.call(ze,v)!==!1&&R}}return R&&!v.defaultPrevented}function wa(o,u){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=f(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:a.setTimeout(o,u||0)}function no(o){o.g=wa(()=>{o.g=null,o.i&&(o.i=!1,no(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Ea extends S{constructor(u,p){super(),this.m=u,this.l=p,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:no(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(o){S.call(this),this.h=o,this.g={}}y(yn,S);var nn=[];function Ys(o){Ie(o.g,function(u,p){this.g.hasOwnProperty(p)&&Xs(u)},o),o.g={}}yn.prototype.N=function(){yn.Z.N.call(this),Ys(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Js=a.JSON.stringify,Ta=a.JSON.parse,Mi=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function $n(){}function Un(){}var _n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zs(){A.call(this,"d")}y(Zs,A);function Vi(){A.call(this,"c")}y(Vi,A);var jn={},io=null;function vs(){return io=io||new Xe}jn.Ia="serverreachability";function so(o){A.call(this,jn.Ia,o)}y(so,A);function Li(o){const u=vs();st(u,new so(u))}jn.STAT_EVENT="statevent";function ro(o,u){A.call(this,jn.STAT_EVENT,o),this.stat=u}y(ro,A);function Ye(o){const u=vs();st(u,new ro(u,o))}jn.Ja="timingevent";function Ni(o,u){A.call(this,jn.Ja,o),this.size=u}y(Ni,A);function oi(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},u)}function ai(){this.g=!0}ai.prototype.ua=function(){this.g=!1};function Ia(o,u,p,v,R,D){o.info(function(){if(o.g)if(D){var q="",ae=D.split("&");for(let ge=0;ge<ae.length;ge++){var ze=ae[ge].split("=");if(ze.length>1){const ke=ze[0];ze=ze[1];const qt=ke.split("_");q=qt.length>=2&&qt[1]=="type"?q+(ke+"="+ze+"&"):q+(ke+"=redacted&")}}}else q=null;else q=D;return"XMLHTTP REQ ("+v+") [attempt "+R+"]: "+u+`
`+p+`
`+q})}function Aa(o,u,p,v,R,D,q){o.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+R+"]: "+u+`
`+p+`
`+D+" "+q})}function li(o,u,p,v){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+ci(o,p)+(v?" "+v:"")})}function Ca(o,u){o.info(function(){return"TIMEOUT: "+u})}ai.prototype.info=function(){};function ci(o,u){if(!o.g)return u;if(!u)return null;try{const D=JSON.parse(u);if(D){for(o=0;o<D.length;o++)if(Array.isArray(D[o])){var p=D[o];if(!(p.length<2)){var v=p[1];if(Array.isArray(v)&&!(v.length<1)){var R=v[0];if(R!="noop"&&R!="stop"&&R!="close")for(let q=1;q<v.length;q++)v[q]=""}}}}return Js(D)}catch{return u}}var vn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},oo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ao;function er(){}y(er,$n),er.prototype.g=function(){return new XMLHttpRequest},ao=new er;function Fi(o){return encodeURIComponent(String(o))}function Sa(o){var u=1;o=o.split(":");const p=[];for(;u>0&&o.length;)p.push(o.shift()),u--;return o.length&&p.push(o.join(":")),p}function Ut(o,u,p,v){this.j=o,this.i=u,this.l=p,this.S=v||1,this.V=new yn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qn}function qn(){this.i=null,this.g="",this.h=!1}var zi={},tr={};function Bi(o,u,p){o.M=1,o.A=Ui(Dt(u)),o.u=p,o.R=!0,lo(o,null)}function lo(o,u){o.F=Date.now(),Je(o),o.B=Dt(o.A);var p=o.B,v=o.S;Array.isArray(v)||(v=[String(v)]),As(p.i,"t",v),o.C=0,p=o.j.L,o.h=new qn,o.g=mo(o.j,p?u:null,!o.u),o.P>0&&(o.O=new Ea(f(o.Y,o,o.g),o.P)),u=o.V,p=o.g,v=o.ba;var R="readystatechange";Array.isArray(R)||(R&&(nn[0]=R.toString()),R=nn);for(let D=0;D<R.length;D++){const q=Z(p,R[D],v||u.handleEvent,!1,u.h||u);if(!q)break;u.g[q.key]=q}u=o.J?N(o.J):{},o.u?(o.v||(o.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,u)):(o.v="GET",o.g.ea(o.B,o.v,null,u)),Li(),Ia(o.i,o.v,o.B,o.l,o.S,o.u)}Ut.prototype.ba=function(o){o=o.target;const u=this.O;u&&an(o)==3?u.j():this.Y(o)},Ut.prototype.Y=function(o){try{if(o==this.g)e:{const ae=an(this.g),ze=this.g.ya(),ge=this.g.ca();if(!(ae<3)&&(ae!=3||this.g&&(this.h.h||this.g.la()||ks(this.g)))){this.K||ae!=4||ze==7||(ze==8||ge<=0?Li(3):Li(2)),We(this);var u=this.g.ca();this.X=u;var p=xa(this);if(this.o=u==200,Aa(this.i,this.v,this.B,this.l,this.S,ae,u),this.o){if(this.U&&!this.L){t:{if(this.g){var v,R=this.g;if((v=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(v)){var D=v;break t}}D=null}if(o=D)li(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,sn(this,o);else{this.o=!1,this.m=3,Ye(12),xt(this),bn(this);break e}}if(this.R){o=!0;let ke;for(;!this.K&&this.C<p.length;)if(ke=rt(this,p),ke==tr){ae==4&&(this.m=4,Ye(14),o=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(ke==zi){this.m=4,Ye(15),li(this.i,this.l,p,"[Invalid Chunk]"),o=!1;break}else li(this.i,this.l,ke,null),sn(this,ke);if(Hn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ae!=4||p.length!=0||this.h.h||(this.m=1,Ye(16),o=!1),this.o=this.o&&o,!o)li(this.i,this.l,p,"[Invalid Chunked Response]"),xt(this),bn(this);else if(p.length>0&&!this.W){this.W=!0;var q=this.j;q.g==this&&q.aa&&!q.P&&(q.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Ds(q),q.P=!0,Ye(11))}}else li(this.i,this.l,p,null),sn(this,p);ae==4&&xt(this),this.o&&!this.K&&(ae==4?fo(this.j,this):(this.o=!1,Je(this)))}else fr(this.g),u==400&&p.indexOf("Unknown SID")>0?(this.m=3,Ye(12)):(this.m=0,Ye(13)),xt(this),bn(this)}}}catch{}finally{}};function xa(o){if(!Hn(o))return o.g.la();const u=ks(o.g);if(u==="")return"";let p="";const v=u.length,R=an(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return xt(o),bn(o),"";o.h.i=new a.TextDecoder}for(let D=0;D<v;D++)o.h.h=!0,p+=o.h.i.decode(u[D],{stream:!(R&&D==v-1)});return u.length=0,o.h.g+=p,o.C=0,o.h.g}function Hn(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function rt(o,u){var p=o.C,v=u.indexOf(`
`,p);return v==-1?tr:(p=Number(u.substring(p,v)),isNaN(p)?zi:(v+=1,v+p>u.length?tr:(u=u.slice(v,v+p),o.C=v+p,u)))}Ut.prototype.cancel=function(){this.K=!0,xt(this)};function Je(o){o.T=Date.now()+o.H,ft(o,o.H)}function ft(o,u){if(o.D!=null)throw Error("WatchDog timer not null");o.D=oi(f(o.aa,o),u)}function We(o){o.D&&(a.clearTimeout(o.D),o.D=null)}Ut.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(Ca(this.i,this.B),this.M!=2&&(Li(),Ye(17)),xt(this),this.m=2,bn(this)):ft(this,this.T-o)};function bn(o){o.j.I==0||o.K||fo(o.j,o)}function xt(o){We(o);var u=o.O;u&&typeof u.dispose=="function"&&u.dispose(),o.O=null,Ys(o.V),o.g&&(u=o.g,o.g=null,u.abort(),u.dispose())}function sn(o,u){try{var p=o.j;if(p.I!=0&&(p.g==o||ws(p.h,o))){if(!o.L&&ws(p.h,o)&&p.I==3){try{var v=p.Ba.g.parse(u)}catch{v=null}if(Array.isArray(v)&&v.length==3){var R=v;if(R[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<o.F)Wi(p),mi(p);else break e;Rs(p),Ye(18)}}else p.xa=R[1],0<p.xa-p.K&&R[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=oi(f(p.Va,p),6e3));Gn(p.h)<=1&&p.ta&&(p.ta=void 0)}else In(p,11)}else if((o.L||p.g==o)&&Wi(p),!T(u))for(R=p.Ba.g.parse(u),u=0;u<R.length;u++){let ge=R[u];const ke=ge[0];if(!(ke<=p.K))if(p.K=ke,ge=ge[1],p.I==2)if(ge[0]=="c"){p.M=ge[1],p.ba=ge[2];const qt=ge[3];qt!=null&&(p.ka=qt,p.j.info("VER="+p.ka));const Ht=ge[4];Ht!=null&&(p.za=Ht,p.j.info("SVER="+p.za));const Sn=ge[5];Sn!=null&&typeof Sn=="number"&&Sn>0&&(v=1.5*Sn,p.O=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;const xn=o.g;if(xn){const Ms=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ms){var D=v.h;D.g||Ms.indexOf("spdy")==-1&&Ms.indexOf("quic")==-1&&Ms.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&($i(D,D.h),D.h=null))}if(v.G){const vr=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;vr&&(v.wa=vr,Ae(v.J,v.G,vr))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-o.F,p.j.info("Handshake RTT: "+p.T+"ms")),v=p;var q=o;if(v.na=Ki(v,v.L?v.ba:null,v.W),q.L){Es(v.h,q);var ae=q,ze=v.O;ze&&(ae.H=ze),ae.D&&(We(ae),Je(ae)),v.g=q}else gr(v);p.i.length>0&&Gi(p)}else ge[0]!="stop"&&ge[0]!="close"||In(p,7);else p.I==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?In(p,7):Jn(p):ge[0]!="noop"&&p.l&&p.l.qa(ge),p.A=0)}}Li(4)}catch{}}var ui=class{constructor(o,u){this.g=o,this.map=u}};function nr(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bs(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Gn(o){return o.h?1:o.g?o.g.size:0}function ws(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function $i(o,u){o.g?o.g.add(u):o.h=u}function Es(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}nr.prototype.cancel=function(){if(this.i=ir(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function ir(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const p of o.g.values())u=u.concat(p.G);return u}return x(o.i)}var sr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function co(o,u){if(o){o=o.split("&");for(let p=0;p<o.length;p++){const v=o[p].indexOf("=");let R,D=null;v>=0?(R=o[p].substring(0,v),D=o[p].substring(v+1)):R=o[p],u(R,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function rn(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;o instanceof rn?(this.l=o.l,hi(this,o.j),this.o=o.o,this.g=o.g,fi(this,o.u),this.h=o.h,Ts(this,lr(o.i)),this.m=o.m):o&&(u=String(o).match(sr))?(this.l=!1,hi(this,u[1]||"",!0),this.o=dt(u[2]||""),this.g=dt(u[3]||"",!0),fi(this,u[4]),this.h=dt(u[5]||"",!0),Ts(this,u[6]||"",!0),this.m=dt(u[7]||"")):(this.l=!1,this.i=new wn(null,this.l))}rn.prototype.toString=function(){const o=[];var u=this.j;u&&o.push(Ke(u,Et,!0),":");var p=this.g;return(p||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Ke(u,Et,!0),"@"),o.push(Fi(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&o.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&o.push("/"),o.push(Ke(p,p.charAt(0)=="/"?or:rr,!0))),(p=this.i.toString())&&o.push("?",p),(p=this.m)&&o.push("#",Ke(p,Kn)),o.join("")},rn.prototype.resolve=function(o){const u=Dt(this);let p=!!o.j;p?hi(u,o.j):p=!!o.o,p?u.o=o.o:p=!!o.g,p?u.g=o.g:p=o.u!=null;var v=o.h;if(p)fi(u,o.u);else if(p=!!o.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var R=u.h.lastIndexOf("/");R!=-1&&(v=u.h.slice(0,R+1)+v)}if(R=v,R==".."||R==".")v="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){v=R.lastIndexOf("/",0)==0,R=R.split("/");const D=[];for(let q=0;q<R.length;){const ae=R[q++];ae=="."?v&&q==R.length&&D.push(""):ae==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),v&&q==R.length&&D.push("")):(D.push(ae),v=!0)}v=D.join("/")}else v=R}return p?u.h=v:p=o.i.toString()!=="",p?Ts(u,lr(o.i)):p=!!o.m,p&&(u.m=o.m),u};function Dt(o){return new rn(o)}function hi(o,u,p){o.j=p?dt(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function fi(o,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);o.u=u}else o.u=null}function Ts(o,u,p){u instanceof wn?(o.i=u,Pa(o.i,o.l)):(p||(u=Ke(u,jt)),o.i=new wn(u,o.l))}function Ae(o,u,p){o.i.set(u,p)}function Ui(o){return Ae(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function dt(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ke(o,u,p){return typeof o=="string"?(o=encodeURI(o).replace(u,Wn),p&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Wn(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Et=/[#\/\?@]/g,rr=/[#\?:]/g,or=/[#\?]/g,jt=/[#\?@]/g,Kn=/#/g;function wn(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Pt(o){o.g||(o.g=new Map,o.h=0,o.i&&co(o.i,function(u,p){o.add(decodeURIComponent(u.replace(/\+/g," ")),p)}))}n=wn.prototype,n.add=function(o,u){Pt(this),this.i=null,o=pt(this,o);let p=this.g.get(o);return p||this.g.set(o,p=[]),p.push(u),this.h+=1,this};function Is(o,u){Pt(o),u=pt(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function ar(o,u){return Pt(o),u=pt(o,u),o.g.has(u)}n.forEach=function(o,u){Pt(this),this.g.forEach(function(p,v){p.forEach(function(R){o.call(u,R,v,this)},this)},this)};function Qn(o,u){Pt(o);let p=[];if(typeof u=="string")ar(o,u)&&(p=p.concat(o.g.get(pt(o,u))));else for(o=Array.from(o.g.values()),u=0;u<o.length;u++)p=p.concat(o[u]);return p}n.set=function(o,u){return Pt(this),this.i=null,o=pt(this,o),ar(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=Qn(this,o),o.length>0?String(o[0]):u):u};function As(o,u,p){Is(o,u),p.length>0&&(o.i=null,o.g.set(pt(o,u),x(p)),o.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(let v=0;v<u.length;v++){var p=u[v];const R=Fi(p);p=Qn(this,p);for(let D=0;D<p.length;D++){let q=R;p[D]!==""&&(q+="="+Fi(p[D])),o.push(q)}}return this.i=o.join("&")};function lr(o){const u=new wn;return u.i=o.i,o.g&&(u.g=new Map(o.g),u.h=o.h),u}function pt(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Pa(o,u){u&&!o.j&&(Pt(o),o.i=null,o.g.forEach(function(p,v){const R=v.toLowerCase();v!=R&&(Is(this,v),As(this,R,p))},o)),o.j=u}function En(o,u){const p=new ai;if(a.Image){const v=new Image;v.onload=g(on,p,"TestLoadImage: loaded",!0,u,v),v.onerror=g(on,p,"TestLoadImage: error",!1,u,v),v.onabort=g(on,p,"TestLoadImage: abort",!1,u,v),v.ontimeout=g(on,p,"TestLoadImage: timeout",!1,u,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=o}else u(!1)}function Cs(o,u){const p=new ai,v=new AbortController,R=setTimeout(()=>{v.abort(),on(p,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:v.signal}).then(D=>{clearTimeout(R),D.ok?on(p,"TestPingServer: ok",!0,u):on(p,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(R),on(p,"TestPingServer: error",!1,u)})}function on(o,u,p,v,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),v(p)}catch{}}function ji(){this.g=new Mi}function qi(o){this.i=o.Sb||null,this.h=o.ab||!1}y(qi,$n),qi.prototype.g=function(){return new Tn(this.i,this.h)};function Tn(o,u){Xe.call(this),this.H=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Tn,Xe),n=Tn.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=u,this.readyState=1,pi(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(u.body=o),(this.H||a).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,di(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;cr(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function cr(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?di(this):pi(this),this.readyState==3&&cr(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,di(this))},n.Na=function(o){this.g&&(this.response=o,di(this))},n.ga=function(){this.g&&di(this)};function di(o){o.readyState=4,o.l=null,o.j=null,o.B=null,pi(o)}n.setRequestHeader=function(o,u){this.A.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var p=u.next();!p.done;)p=p.value,o.push(p[0]+": "+p[1]),p=u.next();return o.join(`\r
`)};function pi(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Tn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Xn(o){let u="";return Ie(o,function(p,v){u+=v,u+=":",u+=p,u+=`\r
`}),u}function ur(o,u,p){e:{for(v in p){var v=!1;break e}v=!0}v||(p=Xn(p),typeof o=="string"?p!=null&&Fi(p):Ae(o,u,p))}function De(o){Xe.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(De,Xe);var hr=/^https?$/i,Ss=["POST","PUT"];n=De.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,u,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ao.g(),this.g.onreadystatechange=b(f(this.Ca,this));try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(D){xs(this,D);return}if(o=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var R in v)p.set(R,v[R]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const D of v.keys())p.set(D,v.get(D));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(D=>D.toLowerCase()=="content-type"),R=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(Ss,u,void 0)>=0)||v||R||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,q]of p)this.g.setRequestHeader(D,q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(D){xs(this,D)}};function xs(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.o=5,uo(o),Ps(o)}function uo(o){o.A||(o.A=!0,st(o,"complete"),st(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,st(this,"complete"),st(this,"abort"),Ps(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ps(this,!0)),De.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Hi(this):this.Xa())},n.Xa=function(){Hi(this)};function Hi(o){if(o.h&&typeof r<"u"){if(o.v&&an(o)==4)setTimeout(o.Ca.bind(o),0);else if(st(o,"readystatechange"),an(o)==4){o.h=!1;try{const D=o.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var p;if(!(p=u)){var v;if(v=D===0){let q=String(o.D).match(sr)[1]||null;!q&&a.self&&a.self.location&&(q=a.self.location.protocol.slice(0,-1)),v=!hr.test(q?q.toLowerCase():"")}p=v}if(p)st(o,"complete"),st(o,"success");else{o.o=6;try{var R=an(o)>2?o.g.statusText:""}catch{R=""}o.l=R+" ["+o.ca()+"]",uo(o)}}finally{Ps(o)}}}}function Ps(o,u){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const p=o.g;o.g=null,u||st(o,"ready");try{p.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function an(o){return o.g?o.g.readyState:0}n.ca=function(){try{return an(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Ta(u)}};function ks(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function fr(o){const u={};o=(o.g&&an(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<o.length;v++){if(T(o[v]))continue;var p=Sa(o[v]);const R=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const D=u[R]||[];u[R]=D,D.push(p)}Ve(u,function(v){return v.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yn(o,u,p){return p&&p.internalChannelParams&&p.internalChannelParams[o]||u}function dr(o){this.za=0,this.i=[],this.j=new ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Yn("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Yn("baseRetryDelayMs",5e3,o),this.Za=Yn("retryDelaySeedMs",1e4,o),this.Ta=Yn("forwardChannelMaxRetries",2,o),this.va=Yn("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new nr(o&&o.concurrentRequestLimit),this.Ba=new ji,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=dr.prototype,n.ka=8,n.I=1,n.connect=function(o,u,p,v){Ye(0),this.W=o,this.H=u||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.J=Ki(this,null,this.W),Gi(this)};function Jn(o){if(pr(o),o.I==3){var u=o.V++,p=Dt(o.J);if(Ae(p,"SID",o.M),Ae(p,"RID",u),Ae(p,"TYPE","terminate"),yi(o,p),u=new Ut(o,o.j,u),u.M=2,u.A=Ui(Dt(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(u.A.toString(),"")}catch{}!p&&a.Image&&(new Image().src=u.A,p=!0),p||(u.g=mo(u.j,null),u.g.ea(u.A)),u.F=Date.now(),Je(u)}yr(o)}function mi(o){o.g&&(Ds(o),o.g.cancel(),o.g=null)}function pr(o){mi(o),o.v&&(a.clearTimeout(o.v),o.v=null),Wi(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Gi(o){if(!bs(o.h)&&!o.m){o.m=!0;var u=o.Ea;ve||w(),me||(ve(),me=!0),I.add(u,o),o.D=0}}function gi(o,u){return Gn(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=u.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=oi(f(o.Ea,o,u),po(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const R=new Ut(this,this.j,o);let D=this.o;if(this.U&&(D?(D=N(D),Fn(D,this.U)):D=this.U),this.u!==null||this.R||(R.J=D,D=null),this.S)e:{for(var u=0,p=0;p<this.i.length;p++){t:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(u+=v,u>4096){u=p;break e}if(u===4096||p===this.i.length-1){u=p+1;break e}}u=1e3}else u=1e3;u=mr(this,R,u),p=Dt(this.J),Ae(p,"RID",o),Ae(p,"CVER",22),this.G&&Ae(p,"X-HTTP-Session-Id",this.G),yi(this,p),D&&(this.R?u="headers="+Fi(Xn(D))+"&"+u:this.u&&ur(p,this.u,D)),$i(this.h,R),this.Ra&&Ae(p,"TYPE","init"),this.S?(Ae(p,"$req",u),Ae(p,"SID","null"),R.U=!0,Bi(R,p,null)):Bi(R,p,u),this.I=2}}else this.I==3&&(o?ho(this,o):this.i.length==0||bs(this.h)||ho(this))};function ho(o,u){var p;u?p=u.l:p=o.V++;const v=Dt(o.J);Ae(v,"SID",o.M),Ae(v,"RID",p),Ae(v,"AID",o.K),yi(o,v),o.u&&o.o&&ur(v,o.u,o.o),p=new Ut(o,o.j,p,o.D+1),o.u===null&&(p.J=o.o),u&&(o.i=u.G.concat(o.i)),u=mr(o,p,1e3),p.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),$i(o.h,p),Bi(p,v,u)}function yi(o,u){o.H&&Ie(o.H,function(p,v){Ae(u,v,p)}),o.l&&Ie({},function(p,v){Ae(u,v,p)})}function mr(o,u,p){p=Math.min(o.i.length,p);const v=o.l?f(o.l.Ka,o.l,o):null;e:{var R=o.i;let ae=-1;for(;;){const ze=["count="+p];ae==-1?p>0?(ae=R[0].g,ze.push("ofs="+ae)):ae=0:ze.push("ofs="+ae);let ge=!0;for(let ke=0;ke<p;ke++){var D=R[ke].g;const qt=R[ke].map;if(D-=ae,D<0)ae=Math.max(0,R[ke].g-100),ge=!1;else try{D="req"+D+"_"||"";try{var q=qt instanceof Map?qt:Object.entries(qt);for(const[Ht,Sn]of q){let xn=Sn;c(Sn)&&(xn=Js(Sn)),ze.push(D+Ht+"="+encodeURIComponent(xn))}}catch(Ht){throw ze.push(D+"type="+encodeURIComponent("_badmap")),Ht}}catch{v&&v(qt)}}if(ge){q=ze.join("&");break e}}q=void 0}return o=o.i.splice(0,p),u.G=o,q}function gr(o){if(!o.g&&!o.v){o.Y=1;var u=o.Da;ve||w(),me||(ve(),me=!0),I.add(u,o),o.A=0}}function Rs(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=oi(f(o.Da,o),po(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,Os(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=oi(f(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ye(10),mi(this),Os(this))};function Ds(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Os(o){o.g=new Ut(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var u=Dt(o.na);Ae(u,"RID","rpc"),Ae(u,"SID",o.M),Ae(u,"AID",o.K),Ae(u,"CI",o.F?"0":"1"),!o.F&&o.ia&&Ae(u,"TO",o.ia),Ae(u,"TYPE","xmlhttp"),yi(o,u),o.u&&o.o&&ur(u,o.u,o.o),o.O&&(o.g.H=o.O);var p=o.g;o=o.ba,p.M=1,p.A=Ui(Dt(u)),p.u=null,p.R=!0,lo(p,o)}n.Va=function(){this.C!=null&&(this.C=null,mi(this),Rs(this),Ye(19))};function Wi(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function fo(o,u){var p=null;if(o.g==u){Wi(o),Ds(o),o.g=null;var v=2}else if(ws(o.h,u))p=u.G,Es(o.h,u),v=1;else return;if(o.I!=0){if(u.o)if(v==1){p=u.u?u.u.length:0,u=Date.now()-u.F;var R=o.D;v=vs(),st(v,new Ni(v,p)),Gi(o)}else gr(o);else if(R=u.m,R==3||R==0&&u.X>0||!(v==1&&gi(o,u)||v==2&&Rs(o)))switch(p&&p.length>0&&(u=o.h,u.i=u.i.concat(p)),R){case 1:In(o,5);break;case 4:In(o,10);break;case 3:In(o,6);break;default:In(o,2)}}}function po(o,u){let p=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(p*=2),p*u}function In(o,u){if(o.j.info("Error code "+u),u==2){var p=f(o.bb,o),v=o.Ua;const R=!v;v=new rn(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||hi(v,"https"),Ui(v),R?En(v.toString(),p):Cs(v.toString(),p)}else Ye(2);o.I=0,o.l&&o.l.pa(u),yr(o),pr(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function yr(o){if(o.I=0,o.ja=[],o.l){const u=ir(o.h);(u.length!=0||o.i.length!=0)&&(M(o.ja,u),M(o.ja,o.i),o.h.i.length=0,x(o.i),o.i.length=0),o.l.oa()}}function Ki(o,u,p){var v=p instanceof rn?Dt(p):new rn(p);if(v.g!="")u&&(v.g=u+"."+v.g),fi(v,v.u);else{var R=a.location;v=R.protocol,u=u?u+"."+R.hostname:R.hostname,R=+R.port;const D=new rn(null);v&&hi(D,v),u&&(D.g=u),R&&fi(D,R),p&&(D.h=p),v=D}return p=o.G,u=o.wa,p&&u&&Ae(v,p,u),Ae(v,"VER",o.ka),yi(o,v),v}function mo(o,u,p){if(u&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Aa&&!o.ma?new De(new qi({ab:p})):new De(o.ma),u.Fa(o.L),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function go(){}n=go.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function _i(){}_i.prototype.g=function(o,u){return new mt(o,u)};function mt(o,u){Xe.call(this),this.g=new dr(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(o?o["X-WebChannel-Client-Profile"]=u.sa:o={"X-WebChannel-Client-Profile":u.sa}),this.g.U=o,(o=u&&u.Qb)&&!T(o)&&(this.g.u=o),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!T(u)&&(this.g.G=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Cn(this)}y(mt,Xe),mt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mt.prototype.close=function(){Jn(this.g)},mt.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var p={};p.__data__=o,o=p}else this.v&&(p={},p.__data__=Js(o),o=p);u.i.push(new ui(u.Ya++,o)),u.I==3&&Gi(u)},mt.prototype.N=function(){this.g.l=null,delete this.j,Jn(this.g),delete this.g,mt.Z.N.call(this)};function _r(o){Zs.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const p in u){o=p;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}y(_r,Zs);function An(){Vi.call(this),this.status=1}y(An,Vi);function Cn(o){this.g=o}y(Cn,go),Cn.prototype.ra=function(){st(this.g,"a")},Cn.prototype.qa=function(o){st(this.g,new _r(o))},Cn.prototype.pa=function(o){st(this.g,new An)},Cn.prototype.oa=function(){st(this.g,"b")},_i.prototype.createWebChannel=_i.prototype.g,mt.prototype.send=mt.prototype.o,mt.prototype.open=mt.prototype.m,mt.prototype.close=mt.prototype.close,Mf=function(){return new _i},Of=function(){return vs()},Df=jn,Pl={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vn.NO_ERROR=0,vn.TIMEOUT=8,vn.HTTP_ERROR=6,Mo=vn,oo.COMPLETE="complete",Rf=oo,Un.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",Xe.prototype.listen=Xe.prototype.J,Ir=Un,De.prototype.listenOnce=De.prototype.K,De.prototype.getLastError=De.prototype.Ha,De.prototype.getLastErrorCode=De.prototype.ya,De.prototype.getStatus=De.prototype.ca,De.prototype.getResponseJson=De.prototype.La,De.prototype.getResponseText=De.prototype.la,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Fa,kf=De}).apply(typeof Co<"u"?Co:typeof self<"u"?self:typeof window<"u"?window:{});const Ju="@firebase/firestore",Zu="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ks="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Xl("@firebase/firestore");function Fs(){return us.logLevel}function J(n,...e){if(us.logLevel<=_e.DEBUG){const t=e.map(Zl);us.debug(`Firestore (${Ks}): ${n}`,...t)}}function Qs(n,...e){if(us.logLevel<=_e.ERROR){const t=e.map(Zl);us.error(`Firestore (${Ks}): ${n}`,...t)}}function aa(n,...e){if(us.logLevel<=_e.WARN){const t=e.map(Zl);us.warn(`Firestore (${Ks}): ${n}`,...t)}}function Zl(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Vf(n,i,t)}function Vf(n,e,t){let i=`FIRESTORE (${Ks}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Qs(i),new Error(i)}function He(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||Vf(e,s,i)}function ut(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Di{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(yt.UNAUTHENTICATED)))}shutdown(){}}class xw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Pw{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0,42304);let i=this.i;const s=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve();let r=new ss;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ss,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const h=r;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},c=h=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ss)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string",31837,{l:i}),new Lf(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new yt(e)}}class kw{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Rw{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new kw(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(yt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dw{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,uw(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){He(this.o===void 0,3512);const i=r=>{r.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,J("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable((()=>i(r)))};const s=r=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>s(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new eh(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(He(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new eh(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=Ow(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%62))}return i}}function Te(n,e){return n<e?-1:n>e?1:0}function kl(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),r=e.charAt(i);if(s!==r)return fl(s)===fl(r)?Te(s,r):fl(s)?1:-1}return Te(n.length,e.length)}const Mw=55296,Vw=57343;function fl(n){const e=n.charCodeAt(0);return e>=Mw&&e<=Vw}function qs(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="__name__";class Rn{constructor(e,t,i){t===void 0?t=0:t>e.length&&oe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&oe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Rn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rn?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const r=Rn.compareSegments(e.get(s),t.get(s));if(r!==0)return r}return Te(e.length,t.length)}static compareSegments(e,t){const i=Rn.isNumericId(e),s=Rn.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?Rn.extractNumericId(e).compare(Rn.extractNumericId(t)):kl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jl.fromString(e.substring(4,e.length-2))}}class Ne extends Rn{construct(e,t,i){return new Ne(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Y(B.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new Ne(t)}static emptyPath(){return new Ne([])}}const Lw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends Rn{construct(e,t,i){return new _t(e,t,i)}static isValidIdentifier(e){return Lw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===th}static keyField(){return new _t([th])}static fromServerFormat(e){const t=[];let i="",s=0;const r=()=>{if(i.length===0)throw new Y(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Y(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Y(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(i+=c,s++):(r(),s++)}if(r(),a)throw new Y(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(t)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Ne.fromString(e))}static fromName(e){return new ce(Ne.fromString(e).popFirst(5))}static empty(){return new ce(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Ne(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(n,e,t){if(!t)throw new Y(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Fw(n,e,t,i){if(e===!0&&i===!0)throw new Y(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nh(n){if(!ce.isDocumentKey(n))throw new Y(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Nf(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function tc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":oe(12329,{type:typeof n})}function Ff(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Y(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tc(n);throw new Y(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n,e){const t={typeString:n};return e&&(t.value=e),t}function Xr(n,e){if(!Nf(n))throw new Y(B.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,r="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const a=n[i];if(s&&typeof a!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){t=`Expected '${i}' field to equal '${r.value}'`;break}}if(t)throw new Y(B.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=-62135596800,sh=1e6;class Me{static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*sh);return new Me(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Y(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Y(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ih)throw new Y(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sh}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xr(e,Me._jsonSchema))return new Me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ih;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Me._jsonSchemaVersion="firestore/timestamp/1.0",Me._jsonSchema={type:qe("string",Me._jsonSchemaVersion),seconds:qe("number"),nanoseconds:qe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new Me(0,0))}static max(){return new Pe(new Me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=-1;function zw(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Pe.fromTimestamp(i===1e9?new Me(t+1,0):new Me(t,i));return new Ci(s,ce.empty(),e)}function Bw(n){return new Ci(n.readTime,n.key,$r)}class Ci{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ci(Pe.min(),ce.empty(),$r)}static max(){return new Ci(Pe.max(),ce.empty(),$r)}}function $w(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(n.documentKey,e.documentKey),t!==0?t:Te(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qw(n){if(n.code!==B.FAILED_PRECONDITION||n.message!==Uw)throw n;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F(((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):F.reject(t)}static resolve(e){return new F(((t,i)=>{t(e)}))}static reject(e){return new F(((t,i)=>{i(e)}))}static waitFor(e){return new F(((t,i)=>{let s=0,r=0,a=!1;e.forEach((c=>{++s,c.next((()=>{++r,a&&r===s&&t()}),(h=>i(h)))})),a=!0,r===s&&t()}))}static or(e){let t=F.resolve(!1);for(const i of e)t=t.next((s=>s?F.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,r)=>{i.push(t.call(this,s,r))})),this.waitFor(i)}static mapArray(e,t){return new F(((i,s)=>{const r=e.length,a=new Array(r);let c=0;for(let h=0;h<r;h++){const f=h;t(e[f]).next((g=>{a[f]=g,++c,c===r&&i(a)}),(g=>s(g)))}}))}static doWhile(e,t){return new F(((i,s)=>{const r=()=>{e()===!0?t().next((()=>{r()}),s):i()};r()}))}}function Hw(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function la(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}nc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=-1;function ca(n){return n==null}function jo(n){return n===0&&1/n==-1/0}function Ww(n){return typeof n=="number"&&Number.isInteger(n)&&!jo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="";function Kw(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rh(e)),e=Qw(n.get(t),e);return rh(e)}function Qw(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const r=n.charAt(s);switch(r){case"\0":t+="";break;case zf:t+="";break;default:t+=r}}return t}function rh(n){return n+zf+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ps(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Bf(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t){this.comparator=e,this.root=t||ot.EMPTY}insert(e,t){return new en(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new So(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new So(this.root,e,this.comparator,!1)}getReverseIterator(){return new So(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new So(this.root,e,this.comparator,!0)}}class So{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?i(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,t,i,s,r){this.key=e,this.value=t,this.color=i??ot.RED,this.left=s??ot.EMPTY,this.right=r??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,r){return new ot(e??this.key,t??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,i),null):r===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return ot.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw oe(27949);return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw oe(57766)}get value(){throw oe(16141)}get color(){throw oe(16727)}get left(){throw oe(29726)}get right(){throw oe(36894)}copy(e,t,i,s,r){return this}insert(e,t,i){return new ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ah(this.data.getIterator())}getIteratorFrom(e){return new ah(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new lt(this.comparator);return t.data=e,t}}class ah{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new Jt([])}unionWith(e){let t=new lt(_t.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Jt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qs(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Xw("Invalid base64 string: "+r):r}})(e);return new Vn(t)}static fromUint8Array(e){const t=(function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r})(e);return new Vn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vn.EMPTY_BYTE_STRING=new Vn("");const Yw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Si(n){if(He(!!n,39018),typeof n=="string"){let e=0;const t=Yw.exec(n);if(He(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:$e(n.seconds),nanos:$e(n.nanos)}}function $e(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function hs(n){return typeof n=="string"?Vn.fromBase64String(n):Vn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="server_timestamp",Uf="__type__",jf="__previous_value__",qf="__local_write_time__";function ic(n){return(n?.mapValue?.fields||{})[Uf]?.stringValue===$f}function ua(n){const e=n.mapValue.fields[jf];return ic(e)?ua(e):e}function Ur(n){const e=Si(n.mapValue.fields[qf].timestampValue);return new Me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,t,i,s,r,a,c,h,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const qo="(default)";class jr{constructor(e,t){this.projectId=e,this.database=t||qo}static empty(){return new jr("","")}get isDefaultDatabase(){return this.database===qo}isEqual(e){return e instanceof jr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="__type__",Zw="__max__",xo={mapValue:{}},Gf="__vector__",Ho="value";function xi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ic(n)?4:tE(n)?9007199254740991:eE(n)?10:11:oe(28295,{value:n})}function Ln(n,e){if(n===e)return!0;const t=xi(n);if(t!==xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ur(n).isEqual(Ur(e));case 3:return(function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=Si(s.timestampValue),c=Si(r.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,r){return hs(s.bytesValue).isEqual(hs(r.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,r){return $e(s.geoPointValue.latitude)===$e(r.geoPointValue.latitude)&&$e(s.geoPointValue.longitude)===$e(r.geoPointValue.longitude)})(n,e);case 2:return(function(s,r){if("integerValue"in s&&"integerValue"in r)return $e(s.integerValue)===$e(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=$e(s.doubleValue),c=$e(r.doubleValue);return a===c?jo(a)===jo(c):isNaN(a)&&isNaN(c)}return!1})(n,e);case 9:return qs(n.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return(function(s,r){const a=s.mapValue.fields||{},c=r.mapValue.fields||{};if(oh(a)!==oh(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(c[h]===void 0||!Ln(a[h],c[h])))return!1;return!0})(n,e);default:return oe(52216,{left:n})}}function qr(n,e){return(n.values||[]).find((t=>Ln(t,e)))!==void 0}function Hs(n,e){if(n===e)return 0;const t=xi(n),i=xi(e);if(t!==i)return Te(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Te(n.booleanValue,e.booleanValue);case 2:return(function(r,a){const c=$e(r.integerValue||r.doubleValue),h=$e(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(n,e);case 3:return lh(n.timestampValue,e.timestampValue);case 4:return lh(Ur(n),Ur(e));case 5:return kl(n.stringValue,e.stringValue);case 6:return(function(r,a){const c=hs(r),h=hs(a);return c.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(r,a){const c=r.split("/"),h=a.split("/");for(let f=0;f<c.length&&f<h.length;f++){const g=Te(c[f],h[f]);if(g!==0)return g}return Te(c.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(r,a){const c=Te($e(r.latitude),$e(a.latitude));return c!==0?c:Te($e(r.longitude),$e(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ch(n.arrayValue,e.arrayValue);case 10:return(function(r,a){const c=r.fields||{},h=a.fields||{},f=c[Ho]?.arrayValue,g=h[Ho]?.arrayValue,y=Te(f?.values?.length||0,g?.values?.length||0);return y!==0?y:ch(f,g)})(n.mapValue,e.mapValue);case 11:return(function(r,a){if(r===xo.mapValue&&a===xo.mapValue)return 0;if(r===xo.mapValue)return 1;if(a===xo.mapValue)return-1;const c=r.fields||{},h=Object.keys(c),f=a.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let y=0;y<h.length&&y<g.length;++y){const b=kl(h[y],g[y]);if(b!==0)return b;const x=Hs(c[h[y]],f[g[y]]);if(x!==0)return x}return Te(h.length,g.length)})(n.mapValue,e.mapValue);default:throw oe(23264,{he:t})}}function lh(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Te(n,e);const t=Si(n),i=Si(e),s=Te(t.seconds,i.seconds);return s!==0?s:Te(t.nanos,i.nanos)}function ch(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const r=Hs(t[s],i[s]);if(r)return r}return Te(t.length,i.length)}function Gs(n){return Rl(n)}function Rl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Si(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return hs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const r of t.values||[])s?s=!1:i+=",",i+=Rl(r);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${Rl(t.fields[a])}`;return s+"}"})(n.mapValue):oe(61005,{value:n})}function Vo(n){switch(xi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ua(n);return e?16+Vo(e):16;case 5:return 2*n.stringValue.length;case 6:return hs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,r)=>s+Vo(r)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return ps(i.fields,((r,a)=>{s+=r.length+Vo(a)})),s})(n.mapValue);default:throw oe(13486,{value:n})}}function Dl(n){return!!n&&"integerValue"in n}function sc(n){return!!n&&"arrayValue"in n}function dl(n){return!!n&&"mapValue"in n}function eE(n){return(n?.mapValue?.fields||{})[Hf]?.stringValue===Gf}function kr(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ps(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=kr(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kr(n.arrayValue.values[t]);return e}return{...n}}function tE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Zw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!dl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kr(t)}setAll(e){let t=_t.emptyPath(),i={},s=[];e.forEach(((a,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,i,s),i={},s=[],t=c.popLast()}a?i[c.lastSegment()]=kr(a):s.push(c.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,i,s)}delete(e){const t=this.field(e.popLast());dl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];dl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){ps(t,((s,r)=>e[s]=r));for(const s of i)delete e[s]}clone(){return new Nt(kr(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,t,i,s,r,a,c){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Vt(e,0,Pe.min(),Pe.min(),Pe.min(),Nt.empty(),0)}static newFoundDocument(e,t,i,s){return new Vt(e,1,t,Pe.min(),i,s,0)}static newNoDocument(e,t){return new Vt(e,2,t,Pe.min(),Pe.min(),Nt.empty(),0)}static newUnknownDocument(e,t){return new Vt(e,3,t,Pe.min(),Pe.min(),Nt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,t){this.position=e,this.inclusive=t}}function uh(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const r=e[s],a=n.position[s];if(r.field.isKeyField()?i=ce.comparator(ce.fromName(a.referenceValue),t.key):i=Hs(a,t.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function hh(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ln(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t="asc"){this.field=e,this.dir=t}}function nE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{}class tt extends Wf{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new sE(e,t,i):t==="array-contains"?new aE(e,i):t==="in"?new lE(e,i):t==="not-in"?new cE(e,i):t==="array-contains-any"?new uE(e,i):new tt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new rE(e,i):new oE(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Hs(t,this.value)):t!==null&&xi(this.value)===xi(t)&&this.matchesComparison(Hs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pi extends Wf{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Pi(e,t)}matches(e){return Kf(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Kf(n){return n.op==="and"}function Qf(n){return iE(n)&&Kf(n)}function iE(n){for(const e of n.filters)if(e instanceof Pi)return!1;return!0}function Ol(n){if(n instanceof tt)return n.field.canonicalString()+n.op.toString()+Gs(n.value);if(Qf(n))return n.filters.map((e=>Ol(e))).join(",");{const e=n.filters.map((t=>Ol(t))).join(",");return`${n.op}(${e})`}}function Xf(n,e){return n instanceof tt?(function(i,s){return s instanceof tt&&i.op===s.op&&i.field.isEqual(s.field)&&Ln(i.value,s.value)})(n,e):n instanceof Pi?(function(i,s){return s instanceof Pi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((r,a,c)=>r&&Xf(a,s.filters[c])),!0):!1})(n,e):void oe(19439)}function Yf(n){return n instanceof tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Gs(t.value)}`})(n):n instanceof Pi?(function(t){return t.op.toString()+" {"+t.getFilters().map(Yf).join(" ,")+"}"})(n):"Filter"}class sE extends tt{constructor(e,t,i){super(e,t,i),this.key=ce.fromName(i.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class rE extends tt{constructor(e,t){super(e,"in",t),this.keys=Jf("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class oE extends tt{constructor(e,t){super(e,"not-in",t),this.keys=Jf("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Jf(n,e){return(e.arrayValue?.values||[]).map((t=>ce.fromName(t.referenceValue)))}class aE extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sc(t)&&qr(t.arrayValue,this.value)}}class lE extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&qr(this.value.arrayValue,t)}}class cE extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(qr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!qr(this.value.arrayValue,t)}}class uE extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>qr(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,t=null,i=[],s=[],r=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=c,this.Te=null}}function fh(n,e=null,t=[],i=[],s=null,r=null,a=null){return new hE(n,e,t,i,s,r,a)}function rc(n){const e=ut(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Ol(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(r){return r.field.canonicalString()+r.dir})(i))).join(","),ca(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Gs(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Gs(i))).join(",")),e.Te=t}return e.Te}function oc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nE(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Xf(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hh(n.startAt,e.startAt)&&hh(n.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,t=null,i=[],s=[],r=null,a="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function fE(n,e,t,i,s,r,a,c){return new ha(n,e,t,i,s,r,a,c)}function dE(n){return new ha(n)}function dh(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pE(n){return n.collectionGroup!==null}function Rr(n){const e=ut(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),t.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new lt(_t.comparator);return a.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new Wo(r,i))})),t.has(_t.keyField().canonicalString())||e.Ie.push(new Wo(_t.keyField(),i))}return e.Ie}function rs(n){const e=ut(n);return e.Ee||(e.Ee=mE(e,Rr(n))),e.Ee}function mE(n,e){if(n.limitType==="F")return fh(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const r=s.dir==="desc"?"asc":"desc";return new Wo(s.field,r)}));const t=n.endAt?new Go(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Go(n.startAt.position,n.startAt.inclusive):null;return fh(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Ml(n,e,t){return new ha(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zf(n,e){return oc(rs(n),rs(e))&&n.limitType===e.limitType}function ed(n){return`${rc(rs(n))}|lt:${n.limitType}`}function Tr(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>Yf(s))).join(", ")}]`),ca(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>Gs(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>Gs(s))).join(",")),`Target(${i})`})(rs(n))}; limitType=${n.limitType})`}function ac(n,e){return e.isFoundDocument()&&(function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):ce.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)})(n,e)&&(function(i,s){for(const r of Rr(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(a,c,h){const f=uh(a,c,h);return a.inclusive?f<=0:f<0})(i.startAt,Rr(i),s)||i.endAt&&!(function(a,c,h){const f=uh(a,c,h);return a.inclusive?f>=0:f>0})(i.endAt,Rr(i),s))})(n,e)}function gE(n){return(e,t)=>{let i=!1;for(const s of Rr(n)){const r=yE(s,e,t);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function yE(n,e,t){const i=n.field.isKeyField()?ce.comparator(e.key,t.key):(function(r,a,c){const h=a.data.field(r),f=c.data.field(r);return h!==null&&f!==null?Hs(h,f):oe(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return oe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,((t,i)=>{for(const[s,r]of i)e(s,r)}))}isEmpty(){return Bf(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=new en(ce.comparator);function Vl(){return _E}const td=new en(ce.comparator);function Po(...n){let e=td;for(const t of n)e=e.insert(t.key,t);return e}function vE(n){let e=td;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ns(){return Dr()}function nd(){return Dr()}function Dr(){return new ms((n=>n.toString()),((n,e)=>n.isEqual(e)))}const bE=new lt(ce.comparator);function Lt(...n){let e=bE;for(const t of n)e=e.add(t);return e}const wE=new lt(Te);function EE(){return wE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jo(e)?"-0":e}}function id(n){return{integerValue:""+n}}function TE(n,e){return Ww(e)?id(e):lc(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this._=void 0}}function IE(n,e,t){return n instanceof Ko?(function(s,r){const a={fields:{[Uf]:{stringValue:$f},[qf]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&ic(r)&&(r=ua(r)),r&&(a.fields[jf]=r),{mapValue:a}})(t,e):n instanceof Hr?sd(n,e):n instanceof Gr?rd(n,e):(function(s,r){const a=CE(s,r),c=ph(a)+ph(s.Ae);return Dl(a)&&Dl(s.Ae)?id(c):lc(s.serializer,c)})(n,e)}function AE(n,e,t){return n instanceof Hr?sd(n,e):n instanceof Gr?rd(n,e):t}function CE(n,e){return n instanceof Qo?(function(i){return Dl(i)||(function(r){return!!r&&"doubleValue"in r})(i)})(e)?e:{integerValue:0}:null}class Ko extends fa{}class Hr extends fa{constructor(e){super(),this.elements=e}}function sd(n,e){const t=od(e);for(const i of n.elements)t.some((s=>Ln(s,i)))||t.push(i);return{arrayValue:{values:t}}}class Gr extends fa{constructor(e){super(),this.elements=e}}function rd(n,e){let t=od(e);for(const i of n.elements)t=t.filter((s=>!Ln(s,i)));return{arrayValue:{values:t}}}class Qo extends fa{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ph(n){return $e(n.integerValue||n.doubleValue)}function od(n){return sc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function SE(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof Hr&&s instanceof Hr||i instanceof Gr&&s instanceof Gr?qs(i.elements,s.elements,Ln):i instanceof Qo&&s instanceof Qo?Ln(i.Ae,s.Ae):i instanceof Ko&&s instanceof Ko})(n.transform,e.transform)}class Yt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yt}static exists(e){return new Yt(void 0,e)}static updateTime(e){return new Yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lo(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class da{}function ad(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new cc(n.key,Yt.none()):new Yr(n.key,n.data,Yt.none());{const t=n.data,i=Nt.empty();let s=new lt(_t.comparator);for(let r of e.fields)if(!s.has(r)){let a=t.field(r);a===null&&r.length>1&&(r=r.popLast(),a=t.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new gs(n.key,i,new Jt(s.toArray()),Yt.none())}}function xE(n,e,t){n instanceof Yr?(function(s,r,a){const c=s.value.clone(),h=gh(s.fieldTransforms,r,a.transformResults);c.setAll(h),r.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):n instanceof gs?(function(s,r,a){if(!Lo(s.precondition,r))return void r.convertToUnknownDocument(a.version);const c=gh(s.fieldTransforms,r,a.transformResults),h=r.data;h.setAll(ld(s)),h.setAll(c),r.convertToFoundDocument(a.version,h).setHasCommittedMutations()})(n,e,t):(function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Or(n,e,t,i){return n instanceof Yr?(function(r,a,c,h){if(!Lo(r.precondition,a))return c;const f=r.value.clone(),g=yh(r.fieldTransforms,h,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof gs?(function(r,a,c,h){if(!Lo(r.precondition,a))return c;const f=yh(r.fieldTransforms,h,a),g=a.data;return g.setAll(ld(r)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),c===null?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((y=>y.field)))})(n,e,t,i):(function(r,a,c){return Lo(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(n,e,t)}function mh(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&qs(i,s,((r,a)=>SE(r,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Yr extends da{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class gs extends da{constructor(e,t,i,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function ld(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function gh(n,e,t){const i=new Map;He(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const r=n[s],a=r.transform,c=e.data.field(r.field);i.set(r.field,AE(a,c,t[s]))}return i}function yh(n,e,t){const i=new Map;for(const s of n){const r=s.transform,a=t.data.field(s.field);i.set(s.field,IE(r,a,e))}return i}class cc extends da{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cd extends da{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&xE(r,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Or(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Or(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=nd();return this.mutations.forEach((s=>{const r=e.get(s.key),a=r.overlayedDocument;let c=this.applyToLocalView(a,r.mutatedFields);c=t.has(s.key)?null:c;const h=ad(a,c);h!==null&&i.set(s.key,h),a.isValidDocument()||a.convertToNoDocument(Pe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Lt())}isEqual(e){return this.batchId===e.batchId&&qs(this.mutations,e.mutations,((t,i)=>mh(t,i)))&&qs(this.baseMutations,e.baseMutations,((t,i)=>mh(t,i)))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,ye;function RE(n){switch(n){case B.OK:return oe(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return oe(15467,{code:n})}}function DE(n){if(n===void 0)return Qs("GRPC error has no .code"),B.UNKNOWN;switch(n){case je.OK:return B.OK;case je.CANCELLED:return B.CANCELLED;case je.UNKNOWN:return B.UNKNOWN;case je.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case je.INTERNAL:return B.INTERNAL;case je.UNAVAILABLE:return B.UNAVAILABLE;case je.UNAUTHENTICATED:return B.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case je.NOT_FOUND:return B.NOT_FOUND;case je.ALREADY_EXISTS:return B.ALREADY_EXISTS;case je.PERMISSION_DENIED:return B.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case je.ABORTED:return B.ABORTED;case je.OUT_OF_RANGE:return B.OUT_OF_RANGE;case je.UNIMPLEMENTED:return B.UNIMPLEMENTED;case je.DATA_LOSS:return B.DATA_LOSS;default:return oe(39323,{code:n})}}(ye=je||(je={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Jl([4294967295,4294967295],0);class OE{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ll(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ME(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function VE(n,e){return Ll(n,e.toTimestamp())}function Mr(n){return He(!!n,49232),Pe.fromTimestamp((function(t){const i=Si(t);return new Me(i.seconds,i.nanos)})(n))}function ud(n,e){return Nl(n,e).canonicalString()}function Nl(n,e){const t=(function(s){return new Ne(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function hd(n){const e=Ne.fromString(n);return He(pd(e),10190,{key:e.toString()}),e}function Xo(n,e){return ud(n.databaseId,e.path)}function _h(n,e){const t=hd(e);if(t.get(1)!==n.databaseId.projectId)throw new Y(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Y(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ce(fd(t))}function LE(n){const e=hd(n);return e.length===4?Ne.emptyPath():fd(e)}function fd(n){return He(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function vh(n,e,t){return{name:Xo(n,e),fields:t.value.mapValue.fields}}function NE(n,e){return"found"in e?(function(i,s){He(!!s.found,43571),s.found.name,s.found.updateTime;const r=_h(i,s.found.name),a=Mr(s.found.updateTime),c=s.found.createTime?Mr(s.found.createTime):Pe.min(),h=new Nt({mapValue:{fields:s.found.fields}});return Vt.newFoundDocument(r,a,c,h)})(n,e):"missing"in e?(function(i,s){He(!!s.missing,3894),He(!!s.readTime,22933);const r=_h(i,s.missing),a=Mr(s.readTime);return Vt.newNoDocument(r,a)})(n,e):oe(7234,{result:e})}function FE(n,e){let t;if(e instanceof Yr)t={update:vh(n,e.key,e.value)};else if(e instanceof cc)t={delete:Xo(n,e.key)};else if(e instanceof gs)t={update:vh(n,e.key,e.data),updateMask:BE(e.fieldMask)};else{if(!(e instanceof cd))return oe(16599,{Vt:e.type});t={verify:Xo(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(r,a){const c=a.transform;if(c instanceof Ko)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Hr)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Gr)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Qo)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw oe(20930,{transform:a.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,r){return r.updateTime!==void 0?{updateTime:VE(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:oe(27497)})(n,e.precondition)),t}function zE(n){let e=LE(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){He(i===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let r=[];t.where&&(r=(function(y){const b=dd(y);return b instanceof Pi&&Qf(b)?b.getFilters():[b]})(t.where));let a=[];t.orderBy&&(a=(function(y){return y.map((b=>(function(M){return new Wo(zs(M.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(b)))})(t.orderBy));let c=null;t.limit&&(c=(function(y){let b;return b=typeof y=="object"?y.value:y,ca(b)?null:b})(t.limit));let h=null;t.startAt&&(h=(function(y){const b=!!y.before,x=y.values||[];return new Go(x,b)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const b=!y.before,x=y.values||[];return new Go(x,b)})(t.endAt)),fE(e,s,a,r,c,"F",h,f)}function dd(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=zs(t.unaryFilter.field);return tt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=zs(t.unaryFilter.field);return tt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=zs(t.unaryFilter.field);return tt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=zs(t.unaryFilter.field);return tt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return oe(61313);default:return oe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return tt.create(zs(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return oe(58110);default:return oe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Pi.create(t.compositeFilter.filters.map((i=>dd(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe(1026)}})(t.compositeFilter.op))})(n):oe(30097,{filter:n})}function zs(n){return _t.fromServerFormat(n.fieldPath)}function BE(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function pd(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.yt=e}}function UE(n){const e=zE({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ml(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.Cn=new qE}addToCollectionParentIndex(e,t){return this.Cn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(Ci.min())}updateCollectionGroup(e,t,i){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class qE{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new lt(Ne.comparator),r=!s.has(i);return this.index[t]=s.add(i),r}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new lt(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},md=41943040;class kt{static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(md,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ws(0)}static cr(){return new Ws(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="LruGarbageCollector",HE=1048576;function Eh([n,e],[t,i]){const s=Te(n,t);return s===0?Te(e,i):s}class GE{constructor(e){this.Ir=e,this.buffer=new lt(Eh),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Eh(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WE{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(wh,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){la(t)?J(wh,"Ignoring IndexedDB error during garbage collection: ",t):await qw(t)}await this.Vr(3e5)}))}}class KE{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return F.resolve(nc.ce);const i=new GE(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(bh)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bh):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,r,a,c,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,a=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(i=y,c=Date.now(),this.removeTargets(e,i,t)))).next((y=>(r=y,h=Date.now(),this.removeOrphanedDocuments(e,i)))).next((y=>(f=Date.now(),Fs()<=_e.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-g}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${r} targets in `+(h-c)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:y}))))}}function QE(n,e){return new KE(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(){this.changes=new ms((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?F.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&Or(i.mutation,s,Jt.empty(),Me.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Lt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Lt()){const s=ns();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((r=>{let a=Po();return r.forEach(((c,h)=>{a=a.insert(c,h.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const i=ns();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Lt())))}populateOverlays(e,t,i){const s=[];return i.forEach((r=>{t.has(r)||s.push(r)})),this.documentOverlayCache.getOverlays(e,s).next((r=>{r.forEach(((a,c)=>{t.set(a,c)}))}))}computeViews(e,t,i,s){let r=Vl();const a=Dr(),c=(function(){return Dr()})();return t.forEach(((h,f)=>{const g=i.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof gs)?r=r.insert(f.key,f):g!==void 0?(a.set(f.key,g.mutation.getFieldMask()),Or(g.mutation,f,g.mutation.getFieldMask(),Me.now())):a.set(f.key,Jt.empty())})),this.recalculateAndSaveOverlays(e,r).next((h=>(h.forEach(((f,g)=>a.set(f,g))),t.forEach(((f,g)=>c.set(f,new YE(g,a.get(f)??null)))),c)))}recalculateAndSaveOverlays(e,t){const i=Dr();let s=new en(((a,c)=>a-c)),r=Lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const c of a)c.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let g=i.get(h)||Jt.empty();g=c.applyToLocalView(f,g),i.set(h,g);const y=(s.get(c.batchId)||Lt()).add(h);s=s.insert(c.batchId,y)}))})).next((()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,g=h.value,y=nd();g.forEach((b=>{if(!r.has(b)){const x=ad(t.get(b),i.get(b));x!==null&&y.set(b,x),r=r.add(b)}})),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return F.waitFor(a)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(a){return ce.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-r.size):F.resolve(ns());let c=$r,h=r;return a.next((f=>F.forEach(f,((g,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),r.get(g)?F.resolve():this.remoteDocumentCache.getEntry(e,g).next((b=>{h=h.insert(g,b)}))))).next((()=>this.populateOverlays(e,f,r))).next((()=>this.computeViews(e,h,f,Lt()))).next((g=>({batchId:c,changes:vE(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next((i=>{let s=Po();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const r=t.collectionGroup;let a=Po();return this.indexManager.getCollectionParents(e,r).next((c=>F.forEach(c,(h=>{const f=(function(y,b){return new ha(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,h.child(r));return this.getDocumentsMatchingCollectionQuery(e,f,i,s).next((g=>{g.forEach(((y,b)=>{a=a.insert(y,b)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r,s)))).next((a=>{r.forEach(((h,f)=>{const g=f.getKey();a.get(g)===null&&(a=a.insert(g,Vt.newInvalidDocument(g)))}));let c=Po();return a.forEach(((h,f)=>{const g=r.get(h);g!==void 0&&Or(g.mutation,f,Jt.empty(),Me.now()),ac(t,f)&&(c=c.insert(h,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return F.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Mr(s.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:UE(s.bundledQuery),readTime:Mr(s.readTime)}})(t)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(){this.overlays=new en(ce.comparator),this.qr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ns();return F.forEach(t,(s=>this.getOverlay(e,s).next((r=>{r!==null&&i.set(s,r)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,r)=>{this.St(e,t,r)})),F.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(i)),F.resolve()}getOverlaysForCollection(e,t,i){const s=ns(),r=t.length+1,a=new ce(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===r&&h.largestBatchId>i&&s.set(h.getKey(),h)}return F.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let r=new en(((f,g)=>f-g));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let g=r.get(f.largestBatchId);g===null&&(g=ns(),r=r.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const c=ns(),h=r.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,g)=>c.set(f,g))),!(c.size()>=s)););return F.resolve(c)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new kE(t,i));let r=this.qr.get(t);r===void 0&&(r=Lt(),this.qr.set(t,r)),this.qr.set(t,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(){this.sessionToken=Vn.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.Qr=new lt(et.$r),this.Ur=new lt(et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new et(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new et(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ce(new Ne([])),i=new et(t,e),s=new et(t,e+1),r=[];return this.Ur.forEachInRange([i,s],(a=>{this.Gr(a),r.push(a.key)})),r}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ce(new Ne([])),i=new et(t,e),s=new et(t,e+1);let r=Lt();return this.Ur.forEachInRange([i,s],(a=>{r=r.add(a.key)})),r}containsKey(e){const t=new et(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class et{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ce.comparator(e.key,t.key)||Te(e.Yr,t.Yr)}static Kr(e,t){return Te(e.Yr,t.Yr)||ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new lt(et.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new PE(r,t,i,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new et(c.key,r)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,t){return F.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),r=s<0?0:s;return F.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Gw:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new et(t,0),s=new et(t,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],(a=>{const c=this.Xr(a.Yr);r.push(c)})),F.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new lt(Te);return t.forEach((s=>{const r=new et(s,0),a=new et(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],(c=>{i=i.add(c.Yr)}))})),F.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let r=i;ce.isDocumentKey(r)||(r=r.child(""));const a=new et(new ce(r),0);let c=new lt(Te);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(c=c.add(h.Yr)),!0)}),a),F.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){He(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return F.forEach(t.mutations,(s=>{const r=new et(s.key,t.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new et(t,0),s=this.Zr.firstAfterOrEqual(i);return F.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e){this.ri=e,this.docs=(function(){return new en(ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),r=s?s.size:0,a=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return F.resolve(i?i.document.mutableCopy():Vt.newInvalidDocument(t))}getEntries(e,t){let i=Vl();return t.forEach((s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():Vt.newInvalidDocument(s))})),F.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let r=Vl();const a=t.path,c=new ce(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||$w(Bw(g),i)<=0||(s.has(g.key)||ac(t,g))&&(r=r.insert(g.key,g.mutableCopy()))}return F.resolve(r)}getAllFromCollectionGroup(e,t,i,s){oe(9500)}ii(e,t){return F.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new sT(this)}getSize(e){return F.resolve(this.size)}}class sT extends XE{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),F.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.persistence=e,this.si=new ms((t=>rc(t)),oc),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new uc,this.targetCount=0,this.ai=Ws.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),F.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ws(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Pr(t),F.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,i){let s=0;const r=[];return this.si.forEach(((a,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),F.waitFor(r).next((()=>s))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return F.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),F.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach((a=>{r.push(s.markPotentiallyOrphaned(e,a))})),F.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return F.resolve(i)}containsKey(e,t){return F.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t){this.ui={},this.overlays={},this.ci=new nc(0),this.li=!1,this.li=!0,this.hi=new tT,this.referenceDelegate=e(this),this.Pi=new rT(this),this.indexManager=new jE,this.remoteDocumentCache=(function(s){return new iT(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new $E(t),this.Ii=new ZE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new nT(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){J("MemoryPersistence","Starting transaction:",e);const s=new oT(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((r=>this.referenceDelegate.di(s).next((()=>r)))).toPromise().then((r=>(s.raiseOnCommittedEvent(),r)))}Ai(e,t){return F.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class oT extends jw{constructor(e){super(),this.currentSequenceNumber=e}}class hc{constructor(e){this.persistence=e,this.Ri=new uc,this.Vi=null}static mi(e){return new hc(e)}get fi(){if(this.Vi)return this.Vi;throw oe(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),F.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((r=>this.fi.add(r.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,(i=>{const s=ce.fromPath(i);return this.gi(e,s).next((r=>{r||t.removeEntry(s,Pe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return F.or([()=>F.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Yo{constructor(e,t){this.persistence=e,this.pi=new ms((i=>Kw(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=QE(this,t)}static mi(e,t){return new Yo(e,t)}Ei(){}di(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return F.forEach(this.pi,((i,s)=>this.br(e,i,s).next((r=>r?F.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(e,(a=>this.br(e,a,t).next((c=>{c||(i++,r.removeEntry(a,Pe.min()))})))).next((()=>r.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),F.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vo(e.data.value)),t}br(e,t,i){return F.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return F.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=Lt(),s=Lt();for(const r of t.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new fc(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ob()?8:Hw(ib())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const r={result:null};return this.ys(e,t).next((a=>{r.result=a})).next((()=>{if(!r.result)return this.ws(e,t,s,i).next((a=>{r.result=a}))})).next((()=>{if(r.result)return;const a=new aT;return this.Ss(e,t,a).next((c=>{if(r.result=c,this.Vs)return this.bs(e,t,a,c.size)}))})).next((()=>r.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(Fs()<=_e.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Tr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Fs()<=_e.DEBUG&&J("QueryEngine","Query:",Tr(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Fs()<=_e.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Tr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rs(t))):F.resolve())}ys(e,t){if(dh(t))return F.resolve(null);let i=rs(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Ml(t,null,"F"),i=rs(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((r=>{const a=Lt(...r);return this.ps.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,i).next((h=>{const f=this.Ds(t,c);return this.Cs(t,f,a,h.readTime)?this.ys(e,Ml(t,null,"F")):this.vs(e,f,t,h)}))))})))))}ws(e,t,i,s){return dh(t)||s.isEqual(Pe.min())?F.resolve(null):this.ps.getDocuments(e,i).next((r=>{const a=this.Ds(t,r);return this.Cs(t,a,i,s)?F.resolve(null):(Fs()<=_e.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Tr(t)),this.vs(e,a,t,zw(s,$r)).next((c=>c)))}))}Ds(e,t){let i=new lt(gE(e));return t.forEach(((s,r)=>{ac(e,r)&&(i=i.add(r))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const r=e.limitType==="F"?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(e,t,i){return Fs()<=_e.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Tr(t)),this.ps.getDocumentsMatchingQuery(e,t,Ci.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((r=>(t.forEach((a=>{r=r.insert(a.key,a)})),r)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="LocalStore";class uT{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new en(Te),this.xs=new ms((r=>rc(r)),oc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JE(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function hT(n,e,t,i){return new uT(n,e,t,i)}async function yd(n,e){const t=ut(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((r=>(s=r,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((r=>{const a=[],c=[];let h=Lt();for(const f of s){a.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of r){c.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(i,h).next((f=>({Ls:f,removedBatchIds:a,addedBatchIds:c})))}))}))}class Th{constructor(){this.activeTargetIds=EE()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fT{constructor(){this.Mo=new Th,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Th,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="ConnectivityMonitor";class Ah{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(Ih,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(Ih,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko=null;function Fl(){return ko===null?ko=(function(){return 268435456+Math.round(2147483648*Math.random())})():ko++,"0x"+ko.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl="RestConnection",pT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mT{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===qo?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,r){const a=Fl(),c=this.zo(e,t.toUriEncodedString());J(pl,`Sending RPC '${e}' ${a}:`,c,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,s,r);const{host:f}=new URL(c),g=Ql(f);return this.Jo(e,c,h,i,g).then((y=>(J(pl,`Received RPC '${e}' ${a}: `,y),y)),(y=>{throw aa(pl,`RPC '${e}' ${a} failed with error: `,y,"url: ",c,"request:",i),y}))}Ho(e,t,i,s,r,a){return this.Go(e,t,i,s,r)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ks})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,r)=>e[r]=s)),i&&i.headers.forEach(((s,r)=>e[r]=s))}zo(e,t){const i=pT[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class yT extends mT{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,r){const a=Fl();return new Promise(((c,h)=>{const f=new kf;f.setWithCredentials(!0),f.listenOnce(Rf.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Mo.NO_ERROR:const y=f.getResponseJson();J(gt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),c(y);break;case Mo.TIMEOUT:J(gt,`RPC '${e}' ${a} timed out`),h(new Y(B.DEADLINE_EXCEEDED,"Request time out"));break;case Mo.HTTP_ERROR:const b=f.getStatus();if(J(gt,`RPC '${e}' ${a} failed with status:`,b,"response text:",f.getResponseText()),b>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const M=x?.error;if(M&&M.status&&M.message){const V=(function(L){const j=L.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(j)>=0?j:B.UNKNOWN})(M.status);h(new Y(V,M.message))}else h(new Y(B.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new Y(B.UNAVAILABLE,"Connection failed."));break;default:oe(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{J(gt,`RPC '${e}' ${a} completed.`)}}));const g=JSON.stringify(s);J(gt,`RPC '${e}' ${a} sending request:`,s),f.send(t,"POST",g,i,15)}))}T_(e,t,i){const s=Fl(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Mf(),c=Of(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,i),h.encodeInitMessageHeaders=!0;const g=r.join("");J(gt,`Creating RPC '${e}' stream ${s}: ${g}`,h);const y=a.createWebChannel(g,h);this.I_(y);let b=!1,x=!1;const M=new gT({Yo:$=>{x?J(gt,`Not sending because RPC '${e}' stream ${s} is closed:`,$):(b||(J(gt,`Opening RPC '${e}' stream ${s} transport.`),y.open(),b=!0),J(gt,`RPC '${e}' stream ${s} sending:`,$),y.send($))},Zo:()=>y.close()}),V=($,L,j)=>{$.listen(L,(G=>{try{j(G)}catch(U){setTimeout((()=>{throw U}),0)}}))};return V(y,Ir.EventType.OPEN,(()=>{x||(J(gt,`RPC '${e}' stream ${s} transport opened.`),M.o_())})),V(y,Ir.EventType.CLOSE,(()=>{x||(x=!0,J(gt,`RPC '${e}' stream ${s} transport closed`),M.a_(),this.E_(y))})),V(y,Ir.EventType.ERROR,($=>{x||(x=!0,aa(gt,`RPC '${e}' stream ${s} transport errored. Name:`,$.name,"Message:",$.message),M.a_(new Y(B.UNAVAILABLE,"The operation could not be completed")))})),V(y,Ir.EventType.MESSAGE,($=>{if(!x){const L=$.data[0];He(!!L,16349);const j=L,G=j?.error||j[0]?.error;if(G){J(gt,`RPC '${e}' stream ${s} received error:`,G);const U=G.status;let ve=(function(w){const E=je[w];if(E!==void 0)return DE(E)})(U),me=G.message;ve===void 0&&(ve=B.INTERNAL,me="Unknown error status: "+U+" with message "+G.message),x=!0,M.a_(new Y(ve,me)),y.close()}else J(gt,`RPC '${e}' stream ${s} received:`,L),M.u_(L)}})),V(c,Df.STAT_EVENT,($=>{$.stat===Pl.PROXY?J(gt,`RPC '${e}' stream ${s} detected buffering proxy`):$.stat===Pl.NOPROXY&&J(gt,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function ml(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(n){return new OE(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t,i=1e3,s=1.5,r=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{}class vT extends _T{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Y(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,a])=>this.connection.Go(e,Nl(t,i),s,r,a))).catch((r=>{throw r.name==="FirebaseError"?(r.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Y(B.UNKNOWN,r.toString())}))}Ho(e,t,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Ho(e,Nl(t,i),s,a,c,r))).catch((a=>{throw a.name==="FirebaseError"?(a.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Y(B.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class bT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qs(t),this.aa=!1):J("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc="RemoteStore";class wT{constructor(e,t,i,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((a=>{i.enqueueAndForget((async()=>{mc(this)&&(J(dc,"Restarting streams for network reachability change."),await(async function(h){const f=ut(h);f.Ea.add(4),await ma(f),f.Ra.set("Unknown"),f.Ea.delete(4),await pc(f)})(this))}))})),this.Ra=new bT(i,s)}}async function pc(n){if(mc(n))for(const e of n.da)await e(!0)}async function ma(n){for(const e of n.da)await e(!1)}function mc(n){return ut(n).Ea.size===0}async function Ch(n,e){const t=ut(n);t.asyncQueue.verifyOperationInProgress(),J(dc,"RemoteStore received new credentials");const i=mc(t);t.Ea.add(3),await ma(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await pc(t)}async function ET(n,e){const t=ut(n);e?(t.Ea.delete(2),await pc(t)):e||(t.Ea.add(2),await ma(t),t.Ra.set("Unknown"))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,r){const a=Date.now()+i,c=new gc(e,t,a,s,r);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function TT(n,e){if(Qs("AsyncQueue",`${e}: ${n}`),la(n))return new Y(B.UNAVAILABLE,`${e}: ${n}`);throw n}class IT{constructor(){this.queries=Sh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=ut(t),r=s.queries;s.queries=Sh(),r.forEach(((a,c)=>{for(const h of c.Sa)h.onError(i)}))})(this,new Y(B.ABORTED,"Firestore shutting down"))}}function Sh(){return new ms((n=>ed(n)),Zf)}function AT(n){n.Ca.forEach((e=>{e.next()}))}var xh,Ph;(Ph=xh||(xh={})).Ma="default",Ph.Cache="cache";const CT="SyncEngine";class ST{constructor(e,t,i,s,r,a){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ms((c=>ed(c)),Zf),this.Iu=new Map,this.Eu=new Set,this.du=new en(ce.comparator),this.Au=new Map,this.Ru=new uc,this.Vu={},this.mu=new Map,this.fu=Ws.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}function kh(n,e,t){const i=ut(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((r,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(a,c){const h=ut(a);h.onlineState=c;let f=!1;h.queries.forEach(((g,y)=>{for(const b of y.Sa)b.va(c)&&(f=!0)})),f&&AT(h)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function xT(n,e,t){const i=ut(n),s=[],r=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach(((c,h)=>{a.push(i.pu(h,e,t).then((f=>{if((f||t)&&i.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;i.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){s.push(f);const g=fc.As(h.targetId,f);r.push(g)}})))})),await Promise.all(a),i.Pu.H_(s),await(async function(h,f){const g=ut(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>F.forEach(f,(b=>F.forEach(b.Es,(x=>g.persistence.referenceDelegate.addReference(y,b.targetId,x))).next((()=>F.forEach(b.ds,(x=>g.persistence.referenceDelegate.removeReference(y,b.targetId,x)))))))))}catch(y){if(!la(y))throw y;J(cT,"Failed to update sequence numbers: "+y)}for(const y of f){const b=y.targetId;if(!y.fromCache){const x=g.Ms.get(b),M=x.snapshotVersion,V=x.withLastLimboFreeSnapshotVersion(M);g.Ms=g.Ms.insert(b,V)}}})(i.localStore,r))}async function PT(n,e){const t=ut(n);if(!t.currentUser.isEqual(e)){J(CT,"User change. New user:",e.toKey());const i=await yd(t.localStore,e);t.currentUser=e,(function(r,a){r.mu.forEach((c=>{c.forEach((h=>{h.reject(new Y(B.CANCELLED,a))}))})),r.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await xT(t,i.Ls)}}class Jo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pa(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return hT(this.persistence,new lT,e.initialUser,this.serializer)}Cu(e){return new gd(hc.mi,this.serializer)}Du(e){return new fT}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jo.provider={build:()=>new Jo};class kT extends Jo{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){He(this.persistence.referenceDelegate instanceof Yo,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new WE(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new gd((i=>Yo.mi(i,t)),this.serializer)}}class zl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>kh(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=PT.bind(null,this.syncEngine),await ET(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new IT})()}createDatastore(e){const t=pa(e.databaseInfo.databaseId),i=(function(r){return new yT(r)})(e.databaseInfo);return(function(r,a,c,h){return new vT(r,a,c,h)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,r,a,c){return new wT(i,s,r,a,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>kh(this.syncEngine,t,0)),(function(){return Ah.v()?new Ah:new dT})())}createSyncEngine(e,t){return(function(s,r,a,c,h,f,g){const y=new ST(s,r,a,c,h,f);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=ut(t);J(dc,"RemoteStore shutting down."),i.Ea.add(5),await ma(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}zl.provider={build:()=>new zl};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Y(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(s,r){const a=ut(s),c={documents:r.map((y=>Xo(a.serializer,y)))},h=await a.Ho("BatchGetDocuments",a.serializer.databaseId,Ne.emptyPath(),c,r.length),f=new Map;h.forEach((y=>{const b=NE(a.serializer,y);f.set(b.key.toString(),b)}));const g=[];return r.forEach((y=>{const b=f.get(y.toString());He(!!b,55234,{key:y}),g.push(b)})),g})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new cc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const s=ce.fromPath(i);this.mutations.push(new cd(s,this.precondition(s)))})),await(async function(i,s){const r=ut(i),a={writes:s.map((c=>FE(r.serializer,c)))};await r.Go("Commit",r.serializer.databaseId,Ne.emptyPath(),a)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw oe(50498,{Gu:e.constructor.name});t=Pe.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Y(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Pe.min())?Yt.exists(!1):Yt.updateTime(t):Yt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pe.min()))throw new Y(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yt.updateTime(t)}return Yt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,t,i,s,r){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new _d(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new RT(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((s=>{this.Yu(s)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!ca(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!RE(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="FirestoreClient";class OT{constructor(e,t,i,s,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=yt.UNAUTHENTICATED,this.clientId=ec.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,(async a=>{J(ki,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,(a=>(J(ki,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=TT(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function gl(n,e){n.asyncQueue.verifyOperationInProgress(),J(ki,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await yd(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Rh(n,e){n.asyncQueue.verifyOperationInProgress();const t=await MT(n);J(ki,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Ch(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>Ch(e.remoteStore,s))),n._onlineComponents=e}async function MT(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){J(ki,"Using user provided OfflineComponentProvider");try{await gl(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;aa("Error using user provided cache. Falling back to memory cache: "+t),await gl(n,new Jo)}}else J(ki,"Using default OfflineComponentProvider"),await gl(n,new kT(void 0));return n._offlineComponents}async function VT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(J(ki,"Using user provided OnlineComponentProvider"),await Rh(n,n._uninitializedComponentsProvider._online)):(J(ki,"Using default OnlineComponentProvider"),await Rh(n,new zl))),n._onlineComponents}function LT(n){return VT(n).then((e=>e.datastore))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="firestore.googleapis.com",Oh=!0;class Mh{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bd,this.ssl=Oh}else this.host=e.host,this.ssl=e.ssl??Oh;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=md;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HE)throw new Y(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Fw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vd(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yc{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Sw;switch(i.type){case"firstParty":return new Rw(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Y(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Dh.get(t);i&&(J("ComponentProvider","Removing Datastore"),Dh.delete(t),i.terminate())})(this),Promise.resolve()}}function NT(n,e,t,i={}){n=Ff(n,yc);const s=Ql(e),r=n._getSettings(),a={...r,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(Jv(`https://${c}`),nb("Firestore",!0)),r.host!==bd&&r.host!==c&&aa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...r,host:c,ssl:s,emulatorOptions:i};if(!zr(h,a)&&(n._setSettings(h),i.mockUserToken)){let f,g;if(typeof i.mockUserToken=="string")f=i.mockUserToken,g=yt.MOCK_USER;else{f=Zv(i.mockUserToken,n._app?.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new Y(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new yt(y)}n._authCredentials=new xw(new Lf(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new _c(this.firestore,e,this._query)}}class at{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Xr(t,at._jsonSchema))return new at(e,i||null,new ce(Ne.fromString(t.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:qe("string",at._jsonSchemaVersion),referencePath:qe("string")};class Wr extends _c{constructor(e,t,i){super(e,t,dE(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new ce(e))}withConverter(e){return new Wr(this.firestore,e,this._path)}}function xI(n,e,...t){if(n=mn(n),arguments.length===1&&(e=ec.newId()),Nw("doc","path",e),n instanceof yc){const i=Ne.fromString(e,...t);return nh(i),new at(n,null,new ce(i))}{if(!(n instanceof at||n instanceof Wr))throw new Y(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ne.fromString(e,...t));return nh(i),new at(n.firestore,n instanceof Wr?n.converter:null,new ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="AsyncQueue";class Lh{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _d(this,"async_queue_retry"),this._c=()=>{const i=ml();i&&J(Vh,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=ml();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ml();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ss;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!la(e))throw e;J(Vh,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Qs("INTERNAL UNHANDLED ERROR: ",Nh(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=gc.createAndSchedule(this,e,t,i,(r=>this.hc(r)));return this.tc.push(s),s}uc(){this.nc&&oe(47125,{Pc:Nh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Nh(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class wd extends yc{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new Lh,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lh(e),this._firestoreClient=void 0,await e}}}function PI(n,e){const t=typeof n=="object"?n:Sf(),i=typeof n=="string"?n:qo,s=Qr(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=Xv("firestore");r&&NT(s,...r)}return s}function FT(n){if(n._terminated)throw new Y(B.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zT(n),n._firestoreClient}function zT(n){const e=n._freezeSettings(),t=(function(s,r,a,c){return new Jw(s,r,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,vd(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new OT(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ft(Vn.fromBase64String(e))}catch(t){throw new Y(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ft(Vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ft._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xr(e,Ft._jsonSchema))return Ft.fromBase64String(e.bytes)}}Ft._jsonSchemaVersion="firestore/bytes/1.0",Ft._jsonSchema={type:qe("string",Ft._jsonSchemaVersion),bytes:qe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Y(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Y(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Y(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:On._jsonSchemaVersion}}static fromJSON(e){if(Xr(e,On._jsonSchema))return new On(e.latitude,e.longitude)}}On._jsonSchemaVersion="firestore/geoPoint/1.0",On._jsonSchema={type:qe("string",On._jsonSchemaVersion),latitude:qe("number"),longitude:qe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Mn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xr(e,Mn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Mn(e.vectorValues);throw new Y(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mn._jsonSchemaVersion="firestore/vectorValue/1.0",Mn._jsonSchema={type:qe("string",Mn._jsonSchemaVersion),vectorValues:qe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=/^__.*__$/;class $T{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new gs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yr(e,this.data,t,this.fieldTransforms)}}class Ed{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new gs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Td(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe(40011,{Ac:n})}}class bc{constructor(e,t,i,s,r,a){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bc({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zo(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Td(this.Ac)&&BT.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class UT{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||pa(e)}Cc(e,t,i,s=!1){return new bc({Ac:e,methodName:t,Dc:i,path:_t.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jT(n){const e=n._freezeSettings(),t=pa(n._databaseId);return new UT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qT(n,e,t,i,s,r={}){const a=n.Cc(r.merge||r.mergeFields?2:0,e,t,s);wc("Data must be an object, but it was:",a,i);const c=Id(i,a);let h,f;if(r.merge)h=new Jt(a.fieldMask),f=a.fieldTransforms;else if(r.mergeFields){const g=[];for(const y of r.mergeFields){const b=Bl(e,y,t);if(!a.contains(b))throw new Y(B.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Cd(g,b)||g.push(b)}h=new Jt(g),f=a.fieldTransforms.filter((y=>h.covers(y.field)))}else h=null,f=a.fieldTransforms;return new $T(new Nt(c),h,f)}class ya extends vc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ya}}function HT(n,e,t,i){const s=n.Cc(1,e,t);wc("Data must be an object, but it was:",s,i);const r=[],a=Nt.empty();ps(i,((h,f)=>{const g=Ec(e,h,t);f=mn(f);const y=s.yc(g);if(f instanceof ya)r.push(g);else{const b=_a(f,y);b!=null&&(r.push(g),a.set(g,b))}}));const c=new Jt(r);return new Ed(a,c,s.fieldTransforms)}function GT(n,e,t,i,s,r){const a=n.Cc(1,e,t),c=[Bl(e,i,t)],h=[s];if(r.length%2!=0)throw new Y(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<r.length;b+=2)c.push(Bl(e,r[b])),h.push(r[b+1]);const f=[],g=Nt.empty();for(let b=c.length-1;b>=0;--b)if(!Cd(f,c[b])){const x=c[b];let M=h[b];M=mn(M);const V=a.yc(x);if(M instanceof ya)f.push(x);else{const $=_a(M,V);$!=null&&(f.push(x),g.set(x,$))}}const y=new Jt(f);return new Ed(g,y,a.fieldTransforms)}function _a(n,e){if(Ad(n=mn(n)))return wc("Unsupported field value:",e,n),Id(n,e);if(n instanceof vc)return(function(i,s){if(!Td(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const r=[];let a=0;for(const c of i){let h=_a(c,s.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),r.push(h),a++}return{arrayValue:{values:r}}})(n,e)}return(function(i,s){if((i=mn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return TE(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Me.fromDate(i);return{timestampValue:Ll(s.serializer,r)}}if(i instanceof Me){const r=new Me(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ll(s.serializer,r)}}if(i instanceof On)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ft)return{bytesValue:ME(s.serializer,i._byteString)};if(i instanceof at){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:ud(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Mn)return(function(a,c){return{mapValue:{fields:{[Hf]:{stringValue:Gf},[Ho]:{arrayValue:{values:a.toArray().map((f=>{if(typeof f!="number")throw c.Sc("VectorValues must only contain numeric values.");return lc(c.serializer,f)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${tc(i)}`)})(n,e)}function Id(n,e){const t={};return Bf(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(n,((i,s)=>{const r=_a(s,e.mc(i));r!=null&&(t[i]=r)})),{mapValue:{fields:t}}}function Ad(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Me||n instanceof On||n instanceof Ft||n instanceof at||n instanceof vc||n instanceof Mn)}function wc(n,e,t){if(!Ad(t)||!Nf(t)){const i=tc(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Bl(n,e,t){if((e=mn(e))instanceof ga)return e._internalPath;if(typeof e=="string")return Ec(n,e);throw Zo("Field path arguments must be of type string or ",n,!1,void 0,t)}const WT=new RegExp("[~\\*/\\[\\]]");function Ec(n,e,t){if(e.search(WT)>=0)throw Zo(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ga(...e.split("."))._internalPath}catch{throw Zo(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zo(n,e,t,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(r||a)&&(h+=" (found",r&&(h+=` in field ${i}`),a&&(h+=` in document ${s}`),h+=")"),new Y(B.INVALID_ARGUMENT,c+n+h)}function Cd(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KT extends ea{data(){return super.data()}}function Sd(n,e){return typeof e=="string"?Ec(n,e):e instanceof ga?e._internalPath:e._delegate._internalPath}class xd{convertValue(e,t="none"){switch(xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ps(e,((s,r)=>{i[s]=this.convertValue(r,t)})),i}convertVectorValue(e){const t=e.fields?.[Ho].arrayValue?.values?.map((i=>$e(i.doubleValue)));return new Mn(t)}convertGeoPoint(e){return new On($e(e.latitude),$e(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=ua(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ur(e));default:return null}}convertTimestamp(e){const t=Si(e);return new Me(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ne.fromString(e);He(pd(i),9688,{name:e});const s=new jr(i.get(1),i.get(3)),r=new ce(i.popFirst(5));return s.isEqual(t)||Qs(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class XT extends xd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ft(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,t)}}class Ar{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class os extends ea{constructor(e,t,i,s,r,a){super(e,t,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new No(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Sd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=os._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}os._jsonSchemaVersion="firestore/documentSnapshot/1.0",os._jsonSchema={type:qe("string",os._jsonSchemaVersion),bundleSource:qe("string","DocumentSnapshot"),bundleName:qe("string"),bundle:qe("string")};class No extends os{data(e={}){return super.data(e)}}class Vr{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ar(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new No(this._firestore,this._userDataWriter,i.key,i,new Ar(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Y(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((c=>{const h=new No(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ar(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>r||c.type!==3)).map((c=>{const h=new No(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ar(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),g=a.indexOf(c.doc.key)),{type:YT(c.type),doc:h,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ec.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((r=>{r._document!==null&&(t.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe(61501,{type:n})}}Vr._jsonSchemaVersion="firestore/querySnapshot/1.0",Vr._jsonSchema={type:qe("string",Vr._jsonSchemaVersion),bundleSource:qe("string","QuerySnapshot"),bundleName:qe("string"),bundle:qe("string")};class JT extends xd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ft(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,t)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT={maxAttempts:5};function Cr(n,e){if((n=mn(n)).firestore!==e)throw new Y(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jT(e)}get(e){const t=Cr(e,this._firestore),i=new XT(this._firestore);return this._transaction.lookup([t._key]).then((s=>{if(!s||s.length!==1)return oe(24041);const r=s[0];if(r.isFoundDocument())return new ea(this._firestore,i,r.key,r,t.converter);if(r.isNoDocument())return new ea(this._firestore,i,t._key,null,t.converter);throw oe(18433,{doc:r})}))}set(e,t,i){const s=Cr(e,this._firestore),r=QT(s.converter,t,i),a=qT(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(e,t,i,...s){const r=Cr(e,this._firestore);let a;return a=typeof(t=mn(t))=="string"||t instanceof ga?GT(this._dataReader,"Transaction.update",r._key,t,i,s):HT(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,a),this}delete(e){const t=Cr(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends e0{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Cr(e,this._firestore),i=new JT(this._firestore);return super.get(e).then((s=>new os(this._firestore,i,t._key,s._document,new Ar(!1,!1),t.converter)))}}function kI(n,e,t){n=Ff(n,wd);const i={...ZT,...t};return(function(r){if(r.maxAttempts<1)throw new Y(B.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(r,a,c){const h=new ss;return r.asyncQueue.enqueueAndForget((async()=>{const f=await LT(r);new DT(r.asyncQueue,f,c,a,h).ju()})),h.promise})(FT(n),(s=>e(new t0(n,s))),i)}(function(e,t=!0){(function(s){Ks=s})(dw),Ai(new ii("firestore",((i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),c=new wd(new Pw(i.getProvider("auth-internal")),new Dw(a,i.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Y(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jr(f.options.projectId,g)})(a,s),a);return r={useFetchStreams:t,...r},c._setSettings(r),c}),"PUBLIC").setMultipleInstances(!0)),Dn(Ju,Zu,e),Dn(Ju,Zu,"esm2020")})();const Pd="@firebase/installations",Tc="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=1e4,Rd=`w:${Tc}`,Dd="FIS_v2",n0="https://firebaseinstallations.googleapis.com/v1",i0=3600*1e3,s0="installations",r0="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},fs=new oa(s0,r0,o0);function Od(n){return n instanceof Di&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md({projectId:n}){return`${n0}/projects/${n}/installations`}function Vd(n){return{token:n.token,requestStatus:2,expiresIn:l0(n.expiresIn),creationTime:Date.now()}}async function Ld(n,e){const i=(await e.json()).error;return fs.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Nd({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function a0(n,{refreshToken:e}){const t=Nd(n);return t.append("Authorization",c0(e)),t}async function Fd(n){const e=await n();return e.status>=500&&e.status<600?n():e}function l0(n){return Number(n.replace("s","000"))}function c0(n){return`${Dd} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u0({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=Md(n),s=Nd(n),r=e.getImmediate({optional:!0});if(r){const f=await r.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const a={fid:t,authVersion:Dd,appId:n.appId,sdkVersion:Rd},c={method:"POST",headers:s,body:JSON.stringify(a)},h=await Fd(()=>fetch(i,c));if(h.ok){const f=await h.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:Vd(f.authToken)}}else throw await Ld("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=/^[cdef][\w-]{21}$/,$l="";function d0(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=p0(n);return f0.test(t)?t:$l}catch{return $l}}function p0(n){return h0(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=new Map;function $d(n,e){const t=va(n);Ud(t,e),m0(t,e)}function Ud(n,e){const t=Bd.get(n);if(t)for(const i of t)i(e)}function m0(n,e){const t=g0();t&&t.postMessage({key:n,fid:e}),y0()}let is=null;function g0(){return!is&&"BroadcastChannel"in self&&(is=new BroadcastChannel("[Firebase] FID Change"),is.onmessage=n=>{Ud(n.data.key,n.data.fid)}),is}function y0(){Bd.size===0&&is&&(is.close(),is=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="firebase-installations-database",v0=1,ds="firebase-installations-store";let yl=null;function Ic(){return yl||(yl=Cf(_0,v0,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ds)}}})),yl}async function ta(n,e){const t=va(n),s=(await Ic()).transaction(ds,"readwrite"),r=s.objectStore(ds),a=await r.get(t);return await r.put(e,t),await s.done,(!a||a.fid!==e.fid)&&$d(n,e.fid),e}async function jd(n){const e=va(n),i=(await Ic()).transaction(ds,"readwrite");await i.objectStore(ds).delete(e),await i.done}async function ba(n,e){const t=va(n),s=(await Ic()).transaction(ds,"readwrite"),r=s.objectStore(ds),a=await r.get(t),c=e(a);return c===void 0?await r.delete(t):await r.put(c,t),await s.done,c&&(!a||a.fid!==c.fid)&&$d(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(n){let e;const t=await ba(n.appConfig,i=>{const s=b0(i),r=w0(n,s);return e=r.registrationPromise,r.installationEntry});return t.fid===$l?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function b0(n){const e=n||{fid:d0(),registrationStatus:0};return qd(e)}function w0(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(fs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=E0(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:T0(n)}:{installationEntry:e}}async function E0(n,e){try{const t=await u0(n,e);return ta(n.appConfig,t)}catch(t){throw Od(t)&&t.customData.serverCode===409?await jd(n.appConfig):await ta(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function T0(n){let e=await Fh(n.appConfig);for(;e.registrationStatus===1;)await zd(100),e=await Fh(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await Ac(n);return i||t}return e}function Fh(n){return ba(n,e=>{if(!e)throw fs.create("installation-not-found");return qd(e)})}function qd(n){return I0(n)?{fid:n.fid,registrationStatus:0}:n}function I0(n){return n.registrationStatus===1&&n.registrationTime+kd<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A0({appConfig:n,heartbeatServiceProvider:e},t){const i=C0(n,t),s=a0(n,t),r=e.getImmediate({optional:!0});if(r){const f=await r.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const a={installation:{sdkVersion:Rd,appId:n.appId}},c={method:"POST",headers:s,body:JSON.stringify(a)},h=await Fd(()=>fetch(i,c));if(h.ok){const f=await h.json();return Vd(f)}else throw await Ld("Generate Auth Token",h)}function C0(n,{fid:e}){return`${Md(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(n,e=!1){let t;const i=await ba(n.appConfig,r=>{if(!Hd(r))throw fs.create("not-registered");const a=r.authToken;if(!e&&P0(a))return r;if(a.requestStatus===1)return t=S0(n,e),r;{if(!navigator.onLine)throw fs.create("app-offline");const c=R0(r);return t=x0(n,c),c}});return t?await t:i.authToken}async function S0(n,e){let t=await zh(n.appConfig);for(;t.authToken.requestStatus===1;)await zd(100),t=await zh(n.appConfig);const i=t.authToken;return i.requestStatus===0?Cc(n,e):i}function zh(n){return ba(n,e=>{if(!Hd(e))throw fs.create("not-registered");const t=e.authToken;return D0(t)?{...e,authToken:{requestStatus:0}}:e})}async function x0(n,e){try{const t=await A0(n,e),i={...e,authToken:t};return await ta(n.appConfig,i),t}catch(t){if(Od(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await jd(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await ta(n.appConfig,i)}throw t}}function Hd(n){return n!==void 0&&n.registrationStatus===2}function P0(n){return n.requestStatus===2&&!k0(n)}function k0(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+i0}function R0(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function D0(n){return n.requestStatus===1&&n.requestTime+kd<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O0(n){const e=n,{installationEntry:t,registrationPromise:i}=await Ac(e);return i?i.catch(console.error):Cc(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M0(n,e=!1){const t=n;return await V0(t),(await Cc(t,e)).token}async function V0(n){const{registrationPromise:e}=await Ac(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(n){if(!n||!n.options)throw _l("App Configuration");if(!n.name)throw _l("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw _l(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function _l(n){return fs.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="installations",N0="installations-internal",F0=n=>{const e=n.getProvider("app").getImmediate(),t=L0(e),i=Qr(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},z0=n=>{const e=n.getProvider("app").getImmediate(),t=Qr(e,Gd).getImmediate();return{getId:()=>O0(t),getToken:s=>M0(t,s)}};function B0(){Ai(new ii(Gd,F0,"PUBLIC")),Ai(new ii(N0,z0,"PRIVATE"))}B0();Dn(Pd,Tc);Dn(Pd,Tc,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="analytics",$0="firebase_id",U0="origin",j0=60*1e3,q0="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Sc="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct=new Xl("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},$t=new oa("analytics","Analytics",H0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(n){if(!n.startsWith(Sc)){const e=$t.create("invalid-gtag-resource",{gtagURL:n});return Ct.warn(e.message),""}return n}function Wd(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function W0(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function K0(n,e){const t=W0("firebase-js-sdk-policy",{createScriptURL:G0}),i=document.createElement("script"),s=`${Sc}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function Q0(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function X0(n,e,t,i,s,r){const a=i[s];try{if(a)await e[a];else{const h=(await Wd(t)).find(f=>f.measurementId===s);h&&await e[h.appId]}}catch(c){Ct.error(c)}n("config",s,r)}async function Y0(n,e,t,i,s){try{let r=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const c=await Wd(t);for(const h of a){const f=c.find(y=>y.measurementId===h),g=f&&e[f.appId];if(g)r.push(g);else{r=[];break}}}r.length===0&&(r=Object.values(e)),await Promise.all(r),n("event",i,s||{})}catch(r){Ct.error(r)}}function J0(n,e,t,i){async function s(r,...a){try{if(r==="event"){const[c,h]=a;await Y0(n,e,t,c,h)}else if(r==="config"){const[c,h]=a;await X0(n,e,t,i,c,h)}else if(r==="consent"){const[c,h]=a;n("consent",c,h)}else if(r==="get"){const[c,h,f]=a;n("get",c,h,f)}else if(r==="set"){const[c]=a;n("set",c)}else n(r,...a)}catch(c){Ct.error(c)}}return s}function Z0(n,e,t,i,s){let r=function(...a){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=J0(r,n,e,t),{gtagCore:r,wrappedGtag:window[s]}}function eI(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Sc)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=30,nI=1e3;class iI{constructor(e={},t=nI){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Kd=new iI;function sI(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function rI(n){const{appId:e,apiKey:t}=n,i={method:"GET",headers:sI(t)},s=q0.replace("{app-id}",e),r=await fetch(s,i);if(r.status!==200&&r.status!==304){let a="";try{const c=await r.json();c.error?.message&&(a=c.error.message)}catch{}throw $t.create("config-fetch-failed",{httpStatus:r.status,responseMessage:a})}return r.json()}async function oI(n,e=Kd,t){const{appId:i,apiKey:s,measurementId:r}=n.options;if(!i)throw $t.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw $t.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new cI;return setTimeout(async()=>{c.abort()},j0),Qd({appId:i,apiKey:s,measurementId:r},a,c,e)}async function Qd(n,{throttleEndTimeMillis:e,backoffCount:t},i,s=Kd){const{appId:r,measurementId:a}=n;try{await aI(i,e)}catch(c){if(a)return Ct.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:r,measurementId:a};throw c}try{const c=await rI(n);return s.deleteThrottleMetadata(r),c}catch(c){const h=c;if(!lI(h)){if(s.deleteThrottleMetadata(r),a)return Ct.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:r,measurementId:a};throw c}const f=Number(h?.customData?.httpStatus)===503?Uu(t,s.intervalMillis,tI):Uu(t,s.intervalMillis),g={throttleEndTimeMillis:Date.now()+f,backoffCount:t+1};return s.setThrottleMetadata(r,g),Ct.debug(`Calling attemptFetch again in ${f} millis`),Qd(n,g,i,s)}}function aI(n,e){return new Promise((t,i)=>{const s=Math.max(e-Date.now(),0),r=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(r),i($t.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function lI(n){if(!(n instanceof Di)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class cI{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function uI(n,e,t,i,s){if(s&&s.global){n("event",t,i);return}else{const r=await e,a={...i,send_to:r};n("event",t,a)}}async function hI(n,e,t,i){if(i&&i.global){const s={};for(const r of Object.keys(t))s[`user_properties.${r}`]=t[r];return n("set",s),Promise.resolve()}else{const s=await e;n("config",s,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fI(){if(Ef())try{await Tf()}catch(n){return Ct.warn($t.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Ct.warn($t.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function dI(n,e,t,i,s,r,a){const c=oI(n);c.then(b=>{t[b.measurementId]=b.appId,n.options.measurementId&&b.measurementId!==n.options.measurementId&&Ct.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>Ct.error(b)),e.push(c);const h=fI().then(b=>{if(b)return i.getId()}),[f,g]=await Promise.all([c,h]);eI(r)||K0(r,f.measurementId),s("js",new Date);const y=a?.config??{};return y[U0]="firebase",y.update=!0,g!=null&&(y[$0]=g),s("config",f.measurementId,y),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.app=e}_delete(){return delete $s[this.app.options.appId],Promise.resolve()}}let $s={},Bh=[];const $h={};let vl="dataLayer",mI="gtag",Uh,xc,jh=!1;function gI(){const n=[];if(rb()&&n.push("This is a browser extension environment."),ab()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,s)=>`(${s+1}) ${i}`).join(" "),t=$t.create("invalid-analytics-context",{errorInfo:e});Ct.warn(t.message)}}function yI(n,e,t){gI();const i=n.options.appId;if(!i)throw $t.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Ct.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw $t.create("no-api-key");if($s[i]!=null)throw $t.create("already-exists",{id:i});if(!jh){Q0(vl);const{wrappedGtag:r,gtagCore:a}=Z0($s,Bh,$h,vl,mI);xc=r,Uh=a,jh=!0}return $s[i]=dI(n,Bh,$h,e,Uh,vl,t),new pI(n)}function RI(n=Sf()){n=mn(n);const e=Qr(n,na);return e.isInitialized()?e.getImmediate():_I(n)}function _I(n,e={}){const t=Qr(n,na);if(t.isInitialized()){const s=t.getImmediate();if(zr(e,t.getOptions()))return s;throw $t.create("already-initialized")}return t.initialize({options:e})}function vI(n,e,t){n=mn(n),hI(xc,$s[n.app.options.appId],e,t).catch(i=>Ct.error(i))}function bI(n,e,t,i){n=mn(n),uI(xc,$s[n.app.options.appId],e,t,i).catch(s=>Ct.error(s))}const qh="@firebase/analytics",Hh="0.10.19";function wI(){Ai(new ii(na,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return yI(i,s,t)},"PUBLIC")),Ai(new ii("analytics-internal",n,"PRIVATE")),Dn(qh,Hh),Dn(qh,Hh,"esm2020");function n(e){try{const t=e.getProvider(na).getImmediate();return{logEvent:(i,s,r)=>bI(t,i,s,r),setUserProperties:(i,s)=>vI(t,i,s)}}catch(t){throw $t.create("interop-component-reg-failed",{reason:t})}}}wI();export{RI as a,EI as b,TI as c,xI as d,PI as g,pw as i,CI as l,kI as r,df as t};
